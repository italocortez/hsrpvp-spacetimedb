var _c=Object.defineProperty;var Vo=e=>{throw TypeError(e)};var Ic=(e,t,r)=>t in e?_c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var x=(e,t,r)=>Ic(e,typeof t!="symbol"?t+"":t,r),bs=(e,t,r)=>t.has(e)||Vo("Cannot "+r);var T=(e,t,r)=>(bs(e,t,"read from private field"),r?r.call(e):t.get(e)),G=(e,t,r)=>t.has(e)?Vo("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),se=(e,t,r,n)=>(bs(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),K=(e,t,r)=>(bs(e,t,"access private method"),r);var jo=(e,t,r,n)=>({set _(i){se(e,t,i,r)},get _(){return T(e,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function lo(e){const t=Object.create(null);for(const r of e.split(","))t[r]=1;return r=>r in t}const me={},en=[],bt=()=>{},su=()=>!1,os=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),co=e=>e.startsWith("onUpdate:"),Pe=Object.assign,fo=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Sc=Object.prototype.hasOwnProperty,le=(e,t)=>Sc.call(e,t),W=Array.isArray,tn=e=>wi(e)==="[object Map]",ou=e=>wi(e)==="[object Set]",zo=e=>wi(e)==="[object Date]",X=e=>typeof e=="function",Ce=e=>typeof e=="string",vt=e=>typeof e=="symbol",de=e=>e!==null&&typeof e=="object",au=e=>(de(e)||X(e))&&X(e.then)&&X(e.catch),uu=Object.prototype.toString,wi=e=>uu.call(e),xc=e=>wi(e).slice(8,-1),lu=e=>wi(e)==="[object Object]",ho=e=>Ce(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Nn=lo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),as=e=>{const t=Object.create(null);return(r=>t[r]||(t[r]=e(r)))},Tc=/-\w/g,Kt=as(e=>e.replace(Tc,t=>t.slice(1).toUpperCase())),Bc=/\B([A-Z])/g,vr=as(e=>e.replace(Bc,"-$1").toLowerCase()),cu=as(e=>e.charAt(0).toUpperCase()+e.slice(1)),vs=as(e=>e?`on${cu(e)}`:""),kt=(e,t)=>!Object.is(e,t),Ai=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},fu=(e,t,r,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:r})},po=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let qo;const us=()=>qo||(qo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ls(e){if(W(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=Ce(n)?Rc(n):ls(n);if(i)for(const s in i)t[s]=i[s]}return t}else if(Ce(e)||de(e))return e}const Uc=/;(?![^(]*\))/g,Ac=/:([^]+)/,Cc=/\/\*[^]*?\*\//g;function Rc(e){const t={};return e.replace(Cc,"").split(Uc).forEach(r=>{if(r){const n=r.split(Ac);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function mo(e){let t="";if(Ce(e))t=e;else if(W(e))for(let r=0;r<e.length;r++){const n=mo(e[r]);n&&(t+=n+" ")}else if(de(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const Ec="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Mc=lo(Ec);function du(e){return!!e||e===""}function Fc(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=go(e[n],t[n]);return r}function go(e,t){if(e===t)return!0;let r=zo(e),n=zo(t);if(r||n)return r&&n?e.getTime()===t.getTime():!1;if(r=vt(e),n=vt(t),r||n)return e===t;if(r=W(e),n=W(t),r||n)return r&&n?Fc(e,t):!1;if(r=de(e),n=de(t),r||n){if(!r||!n)return!1;const i=Object.keys(e).length,s=Object.keys(t).length;if(i!==s)return!1;for(const o in e){const u=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(u&&!l||!u&&l||!go(e[o],t[o]))return!1}}return String(e)===String(t)}const hu=e=>!!(e&&e.__v_isRef===!0),Ci=e=>Ce(e)?e:e==null?"":W(e)||de(e)&&(e.toString===uu||!X(e.toString))?hu(e)?Ci(e.value):JSON.stringify(e,pu,2):String(e),pu=(e,t)=>hu(t)?pu(e,t.value):tn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i],s)=>(r[_s(n,s)+" =>"]=i,r),{})}:ou(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>_s(r))}:vt(t)?_s(t):de(t)&&!W(t)&&!lu(t)?String(t):t,_s=(e,t="")=>{var r;return vt(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.5.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let We;class Oc{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.__v_skip=!0,this.parent=We,!t&&We&&(this.index=(We.scopes||(We.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].pause();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].resume();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].resume()}}run(t){if(this._active){const r=We;try{return We=this,t()}finally{We=r}}}on(){++this._on===1&&(this.prevScope=We,We=this)}off(){this._on>0&&--this._on===0&&(We=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Pc(){return We}let be;const Is=new WeakSet;class mu{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,We&&We.active&&We.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Is.has(this)&&(Is.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||yu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ko(this),wu(this);const t=be,r=it;be=this,it=!0;try{return this.fn()}finally{bu(this),be=t,it=r,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)bo(t);this.deps=this.depsTail=void 0,ko(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Is.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ms(this)&&this.run()}get dirty(){return Ms(this)}}let gu=0,Vn,jn;function yu(e,t=!1){if(e.flags|=8,t){e.next=jn,jn=e;return}e.next=Vn,Vn=e}function yo(){gu++}function wo(){if(--gu>0)return;if(jn){let t=jn;for(jn=void 0;t;){const r=t.next;t.next=void 0,t.flags&=-9,t=r}}let e;for(;Vn;){let t=Vn;for(Vn=void 0;t;){const r=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=r}}if(e)throw e}function wu(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function bu(e){let t,r=e.depsTail,n=r;for(;n;){const i=n.prevDep;n.version===-1?(n===r&&(r=i),bo(n),Dc(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}e.deps=t,e.depsTail=r}function Ms(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(vu(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function vu(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ti)||(e.globalVersion=ti,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ms(e))))return;e.flags|=2;const t=e.dep,r=be,n=it;be=e,it=!0;try{wu(e);const i=e.fn(e._value);(t.version===0||kt(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{be=r,it=n,bu(e),e.flags&=-3}}function bo(e,t=!1){const{dep:r,prevSub:n,nextSub:i}=e;if(n&&(n.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=n,e.nextSub=void 0),r.subs===e&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let s=r.computed.deps;s;s=s.nextDep)bo(s,!0)}!t&&!--r.sc&&r.map&&r.map.delete(r.key)}function Dc(e){const{prevDep:t,nextDep:r}=e;t&&(t.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=t,e.nextDep=void 0)}let it=!0;const _u=[];function Mt(){_u.push(it),it=!1}function Ft(){const e=_u.pop();it=e===void 0?!0:e}function ko(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const r=be;be=void 0;try{t()}finally{be=r}}}let ti=0;class $c{constructor(t,r){this.sub=t,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class vo{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!be||!it||be===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==be)r=this.activeLink=new $c(be,this),be.deps?(r.prevDep=be.depsTail,be.depsTail.nextDep=r,be.depsTail=r):be.deps=be.depsTail=r,Iu(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=be.depsTail,r.nextDep=void 0,be.depsTail.nextDep=r,be.depsTail=r,be.deps===r&&(be.deps=n)}return r}trigger(t){this.version++,ti++,this.notify(t)}notify(t){yo();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{wo()}}}function Iu(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Iu(n)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const Fs=new WeakMap,gr=Symbol(""),Os=Symbol(""),ri=Symbol("");function $e(e,t,r){if(it&&be){let n=Fs.get(e);n||Fs.set(e,n=new Map);let i=n.get(r);i||(n.set(r,i=new vo),i.map=n,i.key=r),i.track()}}function Ut(e,t,r,n,i,s){const o=Fs.get(e);if(!o){ti++;return}const u=l=>{l&&l.trigger()};if(yo(),t==="clear")o.forEach(u);else{const l=W(e),p=l&&ho(r);if(l&&r==="length"){const d=Number(n);o.forEach((m,S)=>{(S==="length"||S===ri||!vt(S)&&S>=d)&&u(m)})}else switch((r!==void 0||o.has(void 0))&&u(o.get(r)),p&&u(o.get(ri)),t){case"add":l?p&&u(o.get("length")):(u(o.get(gr)),tn(e)&&u(o.get(Os)));break;case"delete":l||(u(o.get(gr)),tn(e)&&u(o.get(Os)));break;case"set":tn(e)&&u(o.get(gr));break}}wo()}function Ir(e){const t=ue(e);return t===e?t:($e(t,"iterate",ri),tt(e)?t:t.map(st))}function cs(e){return $e(e=ue(e),"iterate",ri),e}function $t(e,t){return Ot(e)?yn(yr(e)?st(t):t):st(t)}const Nc={__proto__:null,[Symbol.iterator](){return Ss(this,Symbol.iterator,e=>$t(this,e))},concat(...e){return Ir(this).concat(...e.map(t=>W(t)?Ir(t):t))},entries(){return Ss(this,"entries",e=>(e[1]=$t(this,e[1]),e))},every(e,t){return St(this,"every",e,t,void 0,arguments)},filter(e,t){return St(this,"filter",e,t,r=>r.map(n=>$t(this,n)),arguments)},find(e,t){return St(this,"find",e,t,r=>$t(this,r),arguments)},findIndex(e,t){return St(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return St(this,"findLast",e,t,r=>$t(this,r),arguments)},findLastIndex(e,t){return St(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return St(this,"forEach",e,t,void 0,arguments)},includes(...e){return xs(this,"includes",e)},indexOf(...e){return xs(this,"indexOf",e)},join(e){return Ir(this).join(e)},lastIndexOf(...e){return xs(this,"lastIndexOf",e)},map(e,t){return St(this,"map",e,t,void 0,arguments)},pop(){return Tn(this,"pop")},push(...e){return Tn(this,"push",e)},reduce(e,...t){return Lo(this,"reduce",e,t)},reduceRight(e,...t){return Lo(this,"reduceRight",e,t)},shift(){return Tn(this,"shift")},some(e,t){return St(this,"some",e,t,void 0,arguments)},splice(...e){return Tn(this,"splice",e)},toReversed(){return Ir(this).toReversed()},toSorted(e){return Ir(this).toSorted(e)},toSpliced(...e){return Ir(this).toSpliced(...e)},unshift(...e){return Tn(this,"unshift",e)},values(){return Ss(this,"values",e=>$t(this,e))}};function Ss(e,t,r){const n=cs(e),i=n[t]();return n!==e&&!tt(e)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.done||(s.value=r(s.value)),s}),i}const Vc=Array.prototype;function St(e,t,r,n,i,s){const o=cs(e),u=o!==e&&!tt(e),l=o[t];if(l!==Vc[t]){const m=l.apply(e,s);return u?st(m):m}let p=r;o!==e&&(u?p=function(m,S){return r.call(this,$t(e,m),S,e)}:r.length>2&&(p=function(m,S){return r.call(this,m,S,e)}));const d=l.call(o,p,n);return u&&i?i(d):d}function Lo(e,t,r,n){const i=cs(e);let s=r;return i!==e&&(tt(e)?r.length>3&&(s=function(o,u,l){return r.call(this,o,u,l,e)}):s=function(o,u,l){return r.call(this,o,$t(e,u),l,e)}),i[t](s,...n)}function xs(e,t,r){const n=ue(e);$e(n,"iterate",ri);const i=n[t](...r);return(i===-1||i===!1)&&So(r[0])?(r[0]=ue(r[0]),n[t](...r)):i}function Tn(e,t,r=[]){Mt(),yo();const n=ue(e)[t].apply(e,r);return wo(),Ft(),n}const jc=lo("__proto__,__v_isRef,__isVue"),Su=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(vt));function zc(e){vt(e)||(e=String(e));const t=ue(this);return $e(t,"has",e),t.hasOwnProperty(e)}class xu{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,n){if(r==="__v_skip")return t.__v_skip;const i=this._isReadonly,s=this._isShallow;if(r==="__v_isReactive")return!i;if(r==="__v_isReadonly")return i;if(r==="__v_isShallow")return s;if(r==="__v_raw")return n===(i?s?Zc:Au:s?Uu:Bu).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=W(t);if(!i){let l;if(o&&(l=Nc[r]))return l;if(r==="hasOwnProperty")return zc}const u=Reflect.get(t,r,Ne(t)?t:n);if((vt(r)?Su.has(r):jc(r))||(i||$e(t,"get",r),s))return u;if(Ne(u)){const l=o&&ho(r)?u:u.value;return i&&de(l)?ni(l):l}return de(u)?i?ni(u):fs(u):u}}class Tu extends xu{constructor(t=!1){super(!1,t)}set(t,r,n,i){let s=t[r];const o=W(t)&&ho(r);if(!this._isShallow){const p=Ot(s);if(!tt(n)&&!Ot(n)&&(s=ue(s),n=ue(n)),!o&&Ne(s)&&!Ne(n))return p||(s.value=n),!0}const u=o?Number(r)<t.length:le(t,r),l=Reflect.set(t,r,n,Ne(t)?t:i);return t===ue(i)&&(u?kt(n,s)&&Ut(t,"set",r,n):Ut(t,"add",r,n)),l}deleteProperty(t,r){const n=le(t,r);t[r];const i=Reflect.deleteProperty(t,r);return i&&n&&Ut(t,"delete",r,void 0),i}has(t,r){const n=Reflect.has(t,r);return(!vt(r)||!Su.has(r))&&$e(t,"has",r),n}ownKeys(t){return $e(t,"iterate",W(t)?"length":gr),Reflect.ownKeys(t)}}class qc extends xu{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const kc=new Tu,Lc=new qc,Kc=new Tu(!0);const Ps=e=>e,Ii=e=>Reflect.getPrototypeOf(e);function Hc(e,t,r){return function(...n){const i=this.__v_raw,s=ue(i),o=tn(s),u=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,p=i[e](...n),d=r?Ps:t?yn:st;return!t&&$e(s,"iterate",l?Os:gr),Pe(Object.create(p),{next(){const{value:m,done:S}=p.next();return S?{value:m,done:S}:{value:u?[d(m[0]),d(m[1])]:d(m),done:S}}})}}function Si(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Wc(e,t){const r={get(i){const s=this.__v_raw,o=ue(s),u=ue(i);e||(kt(i,u)&&$e(o,"get",i),$e(o,"get",u));const{has:l}=Ii(o),p=t?Ps:e?yn:st;if(l.call(o,i))return p(s.get(i));if(l.call(o,u))return p(s.get(u));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!e&&$e(ue(i),"iterate",gr),i.size},has(i){const s=this.__v_raw,o=ue(s),u=ue(i);return e||(kt(i,u)&&$e(o,"has",i),$e(o,"has",u)),i===u?s.has(i):s.has(i)||s.has(u)},forEach(i,s){const o=this,u=o.__v_raw,l=ue(u),p=t?Ps:e?yn:st;return!e&&$e(l,"iterate",gr),u.forEach((d,m)=>i.call(s,p(d),p(m),o))}};return Pe(r,e?{add:Si("add"),set:Si("set"),delete:Si("delete"),clear:Si("clear")}:{add(i){!t&&!tt(i)&&!Ot(i)&&(i=ue(i));const s=ue(this);return Ii(s).has.call(s,i)||(s.add(i),Ut(s,"add",i,i)),this},set(i,s){!t&&!tt(s)&&!Ot(s)&&(s=ue(s));const o=ue(this),{has:u,get:l}=Ii(o);let p=u.call(o,i);p||(i=ue(i),p=u.call(o,i));const d=l.call(o,i);return o.set(i,s),p?kt(s,d)&&Ut(o,"set",i,s):Ut(o,"add",i,s),this},delete(i){const s=ue(this),{has:o,get:u}=Ii(s);let l=o.call(s,i);l||(i=ue(i),l=o.call(s,i)),u&&u.call(s,i);const p=s.delete(i);return l&&Ut(s,"delete",i,void 0),p},clear(){const i=ue(this),s=i.size!==0,o=i.clear();return s&&Ut(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{r[i]=Hc(i,e,t)}),r}function _o(e,t){const r=Wc(e,t);return(n,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(le(r,i)&&i in n?r:n,i,s)}const Jc={get:_o(!1,!1)},Qc={get:_o(!1,!0)},Gc={get:_o(!0,!1)};const Bu=new WeakMap,Uu=new WeakMap,Au=new WeakMap,Zc=new WeakMap;function Xc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Yc(e){return e.__v_skip||!Object.isExtensible(e)?0:Xc(xc(e))}function fs(e){return Ot(e)?e:Io(e,!1,kc,Jc,Bu)}function ef(e){return Io(e,!1,Kc,Qc,Uu)}function ni(e){return Io(e,!0,Lc,Gc,Au)}function Io(e,t,r,n,i){if(!de(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=Yc(e);if(s===0)return e;const o=i.get(e);if(o)return o;const u=new Proxy(e,s===2?n:r);return i.set(e,u),u}function yr(e){return Ot(e)?yr(e.__v_raw):!!(e&&e.__v_isReactive)}function Ot(e){return!!(e&&e.__v_isReadonly)}function tt(e){return!!(e&&e.__v_isShallow)}function So(e){return e?!!e.__v_raw:!1}function ue(e){const t=e&&e.__v_raw;return t?ue(t):e}function tf(e){return!le(e,"__v_skip")&&Object.isExtensible(e)&&fu(e,"__v_skip",!0),e}const st=e=>de(e)?fs(e):e,yn=e=>de(e)?ni(e):e;function Ne(e){return e?e.__v_isRef===!0:!1}function Cu(e){return Eu(e,!1)}function Ru(e){return Eu(e,!0)}function Eu(e,t){return Ne(e)?e:new rf(e,t)}class rf{constructor(t,r){this.dep=new vo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?t:ue(t),this._value=r?t:st(t),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(t){const r=this._rawValue,n=this.__v_isShallow||tt(t)||Ot(t);t=n?t:ue(t),kt(t,r)&&(this._rawValue=t,this._value=n?t:st(t),this.dep.trigger())}}function Dt(e){return Ne(e)?e.value:e}const nf={get:(e,t,r)=>t==="__v_raw"?e:Dt(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return Ne(i)&&!Ne(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function Mu(e){return yr(e)?e:new Proxy(e,nf)}class sf{constructor(t,r,n){this.fn=t,this.setter=r,this._value=void 0,this.dep=new vo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ti-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&be!==this)return yu(this,!0),!0}get value(){const t=this.dep.track();return vu(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function of(e,t,r=!1){let n,i;return X(e)?n=e:(n=e.get,i=e.set),new sf(n,i,r)}const xi={},ji=new WeakMap;let Jt;function af(e,t=!1,r=Jt){if(r){let n=ji.get(r);n||ji.set(r,n=[]),n.push(e)}}function uf(e,t,r=me){const{immediate:n,deep:i,once:s,scheduler:o,augmentJob:u,call:l}=r,p=_=>i?_:tt(_)||i===!1||i===0?At(_,1):At(_);let d,m,S,b,U=!1,E=!1;if(Ne(e)?(m=()=>e.value,U=tt(e)):yr(e)?(m=()=>p(e),U=!0):W(e)?(E=!0,U=e.some(_=>yr(_)||tt(_)),m=()=>e.map(_=>{if(Ne(_))return _.value;if(yr(_))return p(_);if(X(_))return l?l(_,2):_()})):X(e)?t?m=l?()=>l(e,2):e:m=()=>{if(S){Mt();try{S()}finally{Ft()}}const _=Jt;Jt=d;try{return l?l(e,3,[b]):e(b)}finally{Jt=_}}:m=bt,t&&i){const _=m,$=i===!0?1/0:i;m=()=>At(_(),$)}const q=Pc(),H=()=>{d.stop(),q&&q.active&&fo(q.effects,d)};if(s&&t){const _=t;t=(...$)=>{_(...$),H()}}let g=E?new Array(e.length).fill(xi):xi;const I=_=>{if(!(!(d.flags&1)||!d.dirty&&!_))if(t){const $=d.run();if(i||U||(E?$.some((te,ye)=>kt(te,g[ye])):kt($,g))){S&&S();const te=Jt;Jt=d;try{const ye=[$,g===xi?void 0:E&&g[0]===xi?[]:g,b];g=$,l?l(t,3,ye):t(...ye)}finally{Jt=te}}}else d.run()};return u&&u(I),d=new mu(m),d.scheduler=o?()=>o(I,!1):I,b=_=>af(_,!1,d),S=d.onStop=()=>{const _=ji.get(d);if(_){if(l)l(_,4);else for(const $ of _)$();ji.delete(d)}},t?n?I(!0):g=d.run():o?o(I.bind(null,!0),!0):d.run(),H.pause=d.pause.bind(d),H.resume=d.resume.bind(d),H.stop=H,H}function At(e,t=1/0,r){if(t<=0||!de(e)||e.__v_skip||(r=r||new Map,(r.get(e)||0)>=t))return e;if(r.set(e,t),t--,Ne(e))At(e.value,t,r);else if(W(e))for(let n=0;n<e.length;n++)At(e[n],t,r);else if(ou(e)||tn(e))e.forEach(n=>{At(n,t,r)});else if(lu(e)){for(const n in e)At(e[n],t,r);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&At(e[n],t,r)}return e}/**
* @vue/runtime-core v3.5.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function bi(e,t,r,n){try{return n?e(...n):e()}catch(i){ds(i,t,r)}}function _t(e,t,r,n){if(X(e)){const i=bi(e,t,r,n);return i&&au(i)&&i.catch(s=>{ds(s,t,r)}),i}if(W(e)){const i=[];for(let s=0;s<e.length;s++)i.push(_t(e[s],t,r,n));return i}}function ds(e,t,r,n=!0){const i=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||me;if(t){let u=t.parent;const l=t.proxy,p=`https://vuejs.org/error-reference/#runtime-${r}`;for(;u;){const d=u.ec;if(d){for(let m=0;m<d.length;m++)if(d[m](e,l,p)===!1)return}u=u.parent}if(s){Mt(),bi(s,null,10,[e,l,p]),Ft();return}}lf(e,r,i,n,o)}function lf(e,t,r,n=!0,i=!1){if(i)throw e;console.error(e)}const je=[];let pt=-1;const rn=[];let Nt=null,zr=0;const Fu=Promise.resolve();let zi=null;function cf(e){const t=zi||Fu;return e?t.then(this?e.bind(this):e):t}function ff(e){let t=pt+1,r=je.length;for(;t<r;){const n=t+r>>>1,i=je[n],s=ii(i);s<e||s===e&&i.flags&2?t=n+1:r=n}return t}function xo(e){if(!(e.flags&1)){const t=ii(e),r=je[je.length-1];!r||!(e.flags&2)&&t>=ii(r)?je.push(e):je.splice(ff(t),0,e),e.flags|=1,Ou()}}function Ou(){zi||(zi=Fu.then(Du))}function df(e){W(e)?rn.push(...e):Nt&&e.id===-1?Nt.splice(zr+1,0,e):e.flags&1||(rn.push(e),e.flags|=1),Ou()}function Ko(e,t,r=pt+1){for(;r<je.length;r++){const n=je[r];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;je.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Pu(e){if(rn.length){const t=[...new Set(rn)].sort((r,n)=>ii(r)-ii(n));if(rn.length=0,Nt){Nt.push(...t);return}for(Nt=t,zr=0;zr<Nt.length;zr++){const r=Nt[zr];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Nt=null,zr=0}}const ii=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Du(e){try{for(pt=0;pt<je.length;pt++){const t=je[pt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),bi(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;pt<je.length;pt++){const t=je[pt];t&&(t.flags&=-2)}pt=-1,je.length=0,Pu(),zi=null,(je.length||rn.length)&&Du()}}let et=null,$u=null;function qi(e){const t=et;return et=e,$u=e&&e.type.__scopeId||null,t}function hf(e,t=et,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&Ki(-1);const s=qi(t);let o;try{o=e(...i)}finally{qi(s),n._d&&Ki(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function pf(e,t){if(et===null)return e;const r=gs(et),n=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[s,o,u,l=me]=t[i];s&&(X(s)&&(s={mounted:s,updated:s}),s.deep&&At(o),n.push({dir:s,instance:r,value:o,oldValue:void 0,arg:u,modifiers:l}))}return e}function Ht(e,t,r,n){const i=e.dirs,s=t&&t.dirs;for(let o=0;o<i.length;o++){const u=i[o];s&&(u.oldValue=s[o].value);let l=u.dir[n];l&&(Mt(),_t(l,r,8,[e.el,u,e,t]),Ft())}}function Nu(e,t){if(ze){let r=ze.provides;const n=ze.parent&&ze.parent.provides;n===r&&(r=ze.provides=Object.create(n)),r[e]=t}}function zn(e,t,r=!1){const n=pd();if(n||nn){let i=nn?nn._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return r&&X(t)?t.call(n&&n.proxy):t}}const mf=Symbol.for("v-scx"),gf=()=>zn(mf);function qn(e,t,r){return Vu(e,t,r)}function Vu(e,t,r=me){const{immediate:n,deep:i,flush:s,once:o}=r,u=Pe({},r),l=t&&n||!t&&s!=="post";let p;if(oi){if(s==="sync"){const b=gf();p=b.__watcherHandles||(b.__watcherHandles=[])}else if(!l){const b=()=>{};return b.stop=bt,b.resume=bt,b.pause=bt,b}}const d=ze;u.call=(b,U,E)=>_t(b,d,U,E);let m=!1;s==="post"?u.scheduler=b=>{He(b,d&&d.suspense)}:s!=="sync"&&(m=!0,u.scheduler=(b,U)=>{U?b():xo(b)}),u.augmentJob=b=>{t&&(b.flags|=4),m&&(b.flags|=2,d&&(b.id=d.uid,b.i=d))};const S=uf(e,t,u);return oi&&(p?p.push(S):l&&S()),S}function yf(e,t,r){const n=this.proxy,i=Ce(e)?e.includes(".")?ju(n,e):()=>n[e]:e.bind(n,n);let s;X(t)?s=t:(s=t.handler,r=t);const o=_i(this),u=Vu(i,s.bind(n),r);return o(),u}function ju(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}const wf=Symbol("_vte"),bf=e=>e.__isTeleport,vf=Symbol("_leaveCb");function To(e,t){e.shapeFlag&6&&e.component?(e.transition=t,To(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function zu(e,t){return X(e)?Pe({name:e.name},t,{setup:e}):e}function qu(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Ho(e,t){let r;return!!((r=Object.getOwnPropertyDescriptor(e,t))&&!r.configurable)}const ki=new WeakMap;function kn(e,t,r,n,i=!1){if(W(e)){e.forEach((E,q)=>kn(E,t&&(W(t)?t[q]:t),r,n,i));return}if(Ln(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&kn(e,t,r,n.component.subTree);return}const s=n.shapeFlag&4?gs(n.component):n.el,o=i?null:s,{i:u,r:l}=e,p=t&&t.r,d=u.refs===me?u.refs={}:u.refs,m=u.setupState,S=ue(m),b=m===me?su:E=>Ho(d,E)?!1:le(S,E),U=(E,q)=>!(q&&Ho(d,q));if(p!=null&&p!==l){if(Wo(t),Ce(p))d[p]=null,b(p)&&(m[p]=null);else if(Ne(p)){const E=t;U(p,E.k)&&(p.value=null),E.k&&(d[E.k]=null)}}if(X(l))bi(l,u,12,[o,d]);else{const E=Ce(l),q=Ne(l);if(E||q){const H=()=>{if(e.f){const g=E?b(l)?m[l]:d[l]:U()||!e.k?l.value:d[e.k];if(i)W(g)&&fo(g,s);else if(W(g))g.includes(s)||g.push(s);else if(E)d[l]=[s],b(l)&&(m[l]=d[l]);else{const I=[s];U(l,e.k)&&(l.value=I),e.k&&(d[e.k]=I)}}else E?(d[l]=o,b(l)&&(m[l]=o)):q&&(U(l,e.k)&&(l.value=o),e.k&&(d[e.k]=o))};if(o){const g=()=>{H(),ki.delete(e)};g.id=-1,ki.set(e,g),He(g,r)}else Wo(e),H()}}}function Wo(e){const t=ki.get(e);t&&(t.flags|=8,ki.delete(e))}us().requestIdleCallback;us().cancelIdleCallback;const Ln=e=>!!e.type.__asyncLoader,ku=e=>e.type.__isKeepAlive;function _f(e,t){Lu(e,"a",t)}function If(e,t){Lu(e,"da",t)}function Lu(e,t,r=ze){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(hs(t,n,r),r){let i=r.parent;for(;i&&i.parent;)ku(i.parent.vnode)&&Sf(n,t,r,i),i=i.parent}}function Sf(e,t,r,n){const i=hs(t,e,n,!0);vi(()=>{fo(n[t],i)},r)}function hs(e,t,r=ze,n=!1){if(r){const i=r[e]||(r[e]=[]),s=t.__weh||(t.__weh=(...o)=>{Mt();const u=_i(r),l=_t(t,r,e,o);return u(),Ft(),l});return n?i.unshift(s):i.push(s),s}}const Pt=e=>(t,r=ze)=>{(!oi||e==="sp")&&hs(e,(...n)=>t(...n),r)},xf=Pt("bm"),Ku=Pt("m"),Tf=Pt("bu"),Bf=Pt("u"),Uf=Pt("bum"),vi=Pt("um"),Af=Pt("sp"),Cf=Pt("rtg"),Rf=Pt("rtc");function Ef(e,t=ze){hs("ec",e,t)}const Mf=Symbol.for("v-ndc");function Ff(e,t,r,n){let i;const s=r,o=W(e);if(o||Ce(e)){const u=o&&yr(e);let l=!1,p=!1;u&&(l=!tt(e),p=Ot(e),e=cs(e)),i=new Array(e.length);for(let d=0,m=e.length;d<m;d++)i[d]=t(l?p?yn(st(e[d])):st(e[d]):e[d],d,void 0,s)}else if(typeof e=="number"){i=new Array(e);for(let u=0;u<e;u++)i[u]=t(u+1,u,void 0,s)}else if(de(e))if(e[Symbol.iterator])i=Array.from(e,(u,l)=>t(u,l,void 0,s));else{const u=Object.keys(e);i=new Array(u.length);for(let l=0,p=u.length;l<p;l++){const d=u[l];i[l]=t(e[d],d,l,s)}}else i=[];return i}const Ds=e=>e?fl(e)?gs(e):Ds(e.parent):null,Kn=Pe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ds(e.parent),$root:e=>Ds(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Wu(e),$forceUpdate:e=>e.f||(e.f=()=>{xo(e.update)}),$nextTick:e=>e.n||(e.n=cf.bind(e.proxy)),$watch:e=>yf.bind(e)}),Ts=(e,t)=>e!==me&&!e.__isScriptSetup&&le(e,t),Of={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:n,data:i,props:s,accessCache:o,type:u,appContext:l}=e;if(t[0]!=="$"){const S=o[t];if(S!==void 0)switch(S){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return s[t]}else{if(Ts(n,t))return o[t]=1,n[t];if(i!==me&&le(i,t))return o[t]=2,i[t];if(le(s,t))return o[t]=3,s[t];if(r!==me&&le(r,t))return o[t]=4,r[t];$s&&(o[t]=0)}}const p=Kn[t];let d,m;if(p)return t==="$attrs"&&$e(e.attrs,"get",""),p(e);if((d=u.__cssModules)&&(d=d[t]))return d;if(r!==me&&le(r,t))return o[t]=4,r[t];if(m=l.config.globalProperties,le(m,t))return m[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:s}=e;return Ts(i,t)?(i[t]=r,!0):n!==me&&le(n,t)?(n[t]=r,!0):le(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,props:s,type:o}},u){let l;return!!(r[u]||e!==me&&u[0]!=="$"&&le(e,u)||Ts(t,u)||le(s,u)||le(n,u)||le(Kn,u)||le(i.config.globalProperties,u)||(l=o.__cssModules)&&l[u])},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:le(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function Jo(e){return W(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let $s=!0;function Pf(e){const t=Wu(e),r=e.proxy,n=e.ctx;$s=!1,t.beforeCreate&&Qo(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:u,provide:l,inject:p,created:d,beforeMount:m,mounted:S,beforeUpdate:b,updated:U,activated:E,deactivated:q,beforeDestroy:H,beforeUnmount:g,destroyed:I,unmounted:_,render:$,renderTracked:te,renderTriggered:ye,errorCaptured:Ie,serverPrefetch:ae,expose:qe,inheritAttrs:at,components:ut,directives:lt,filters:Sn}=t;if(p&&Df(p,n,null),o)for(const O in o){const N=o[O];X(N)&&(n[O]=N.bind(r))}if(i){const O=i.call(r,r);de(O)&&(e.data=fs(O))}if($s=!0,s)for(const O in s){const N=s[O],Z=X(N)?N.bind(r,r):X(N.get)?N.get.bind(r,r):bt,Y=!X(N)&&X(N.set)?N.set.bind(r):bt,k=vd({get:Z,set:Y});Object.defineProperty(n,O,{enumerable:!0,configurable:!0,get:()=>k.value,set:J=>k.value=J})}if(u)for(const O in u)Hu(u[O],n,r,O);if(l){const O=X(l)?l.call(r):l;Reflect.ownKeys(O).forEach(N=>{Nu(N,O[N])})}d&&Qo(d,e,"c");function v(O,N){W(N)?N.forEach(Z=>O(Z.bind(r))):N&&O(N.bind(r))}if(v(xf,m),v(Ku,S),v(Tf,b),v(Bf,U),v(_f,E),v(If,q),v(Ef,Ie),v(Rf,te),v(Cf,ye),v(Uf,g),v(vi,_),v(Af,ae),W(qe))if(qe.length){const O=e.exposed||(e.exposed={});qe.forEach(N=>{Object.defineProperty(O,N,{get:()=>r[N],set:Z=>r[N]=Z,enumerable:!0})})}else e.exposed||(e.exposed={});$&&e.render===bt&&(e.render=$),at!=null&&(e.inheritAttrs=at),ut&&(e.components=ut),lt&&(e.directives=lt),ae&&qu(e)}function Df(e,t,r=bt){W(e)&&(e=Ns(e));for(const n in e){const i=e[n];let s;de(i)?"default"in i?s=zn(i.from||n,i.default,!0):s=zn(i.from||n):s=zn(i),Ne(s)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[n]=s}}function Qo(e,t,r){_t(W(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function Hu(e,t,r,n){let i=n.includes(".")?ju(r,n):()=>r[n];if(Ce(e)){const s=t[e];X(s)&&qn(i,s)}else if(X(e))qn(i,e.bind(r));else if(de(e))if(W(e))e.forEach(s=>Hu(s,t,r,n));else{const s=X(e.handler)?e.handler.bind(r):t[e.handler];X(s)&&qn(i,s,e)}}function Wu(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,u=s.get(t);let l;return u?l=u:!i.length&&!r&&!n?l=t:(l={},i.length&&i.forEach(p=>Li(l,p,o,!0)),Li(l,t,o)),de(t)&&s.set(t,l),l}function Li(e,t,r,n=!1){const{mixins:i,extends:s}=t;s&&Li(e,s,r,!0),i&&i.forEach(o=>Li(e,o,r,!0));for(const o in t)if(!(n&&o==="expose")){const u=$f[o]||r&&r[o];e[o]=u?u(e[o],t[o]):t[o]}return e}const $f={data:Go,props:Zo,emits:Zo,methods:On,computed:On,beforeCreate:Ve,created:Ve,beforeMount:Ve,mounted:Ve,beforeUpdate:Ve,updated:Ve,beforeDestroy:Ve,beforeUnmount:Ve,destroyed:Ve,unmounted:Ve,activated:Ve,deactivated:Ve,errorCaptured:Ve,serverPrefetch:Ve,components:On,directives:On,watch:Vf,provide:Go,inject:Nf};function Go(e,t){return t?e?function(){return Pe(X(e)?e.call(this,this):e,X(t)?t.call(this,this):t)}:t:e}function Nf(e,t){return On(Ns(e),Ns(t))}function Ns(e){if(W(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Ve(e,t){return e?[...new Set([].concat(e,t))]:t}function On(e,t){return e?Pe(Object.create(null),e,t):t}function Zo(e,t){return e?W(e)&&W(t)?[...new Set([...e,...t])]:Pe(Object.create(null),Jo(e),Jo(t??{})):t}function Vf(e,t){if(!e)return t;if(!t)return e;const r=Pe(Object.create(null),e);for(const n in t)r[n]=Ve(e[n],t[n]);return r}function Ju(){return{app:null,config:{isNativeTag:su,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jf=0;function zf(e,t){return function(n,i=null){X(n)||(n=Pe({},n)),i!=null&&!de(i)&&(i=null);const s=Ju(),o=new WeakSet,u=[];let l=!1;const p=s.app={_uid:jf++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:_d,get config(){return s.config},set config(d){},use(d,...m){return o.has(d)||(d&&X(d.install)?(o.add(d),d.install(p,...m)):X(d)&&(o.add(d),d(p,...m))),p},mixin(d){return s.mixins.includes(d)||s.mixins.push(d),p},component(d,m){return m?(s.components[d]=m,p):s.components[d]},directive(d,m){return m?(s.directives[d]=m,p):s.directives[d]},mount(d,m,S){if(!l){const b=p._ceVNode||nt(n,i);return b.appContext=s,S===!0?S="svg":S===!1&&(S=void 0),e(b,d,S),l=!0,p._container=d,d.__vue_app__=p,gs(b.component)}},onUnmount(d){u.push(d)},unmount(){l&&(_t(u,p._instance,16),e(null,p._container),delete p._container.__vue_app__)},provide(d,m){return s.provides[d]=m,p},runWithContext(d){const m=nn;nn=p;try{return d()}finally{nn=m}}};return p}}let nn=null;const qf=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Kt(t)}Modifiers`]||e[`${vr(t)}Modifiers`];function kf(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||me;let i=r;const s=t.startsWith("update:"),o=s&&qf(n,t.slice(7));o&&(o.trim&&(i=r.map(d=>Ce(d)?d.trim():d)),o.number&&(i=r.map(po)));let u,l=n[u=vs(t)]||n[u=vs(Kt(t))];!l&&s&&(l=n[u=vs(vr(t))]),l&&_t(l,e,6,i);const p=n[u+"Once"];if(p){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,_t(p,e,6,i)}}const Lf=new WeakMap;function Qu(e,t,r=!1){const n=r?Lf:t.emitsCache,i=n.get(e);if(i!==void 0)return i;const s=e.emits;let o={},u=!1;if(!X(e)){const l=p=>{const d=Qu(p,t,!0);d&&(u=!0,Pe(o,d))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!u?(de(e)&&n.set(e,null),null):(W(s)?s.forEach(l=>o[l]=null):Pe(o,s),de(e)&&n.set(e,o),o)}function ps(e,t){return!e||!os(t)?!1:(t=t.slice(2).replace(/Once$/,""),le(e,t[0].toLowerCase()+t.slice(1))||le(e,vr(t))||le(e,t))}function Xo(e){const{type:t,vnode:r,proxy:n,withProxy:i,propsOptions:[s],slots:o,attrs:u,emit:l,render:p,renderCache:d,props:m,data:S,setupState:b,ctx:U,inheritAttrs:E}=e,q=qi(e);let H,g;try{if(r.shapeFlag&4){const _=i||n,$=_;H=wt(p.call($,_,d,m,b,S,U)),g=u}else{const _=t;H=wt(_.length>1?_(m,{attrs:u,slots:o,emit:l}):_(m,null)),g=t.props?u:Kf(u)}}catch(_){Hn.length=0,ds(_,e,1),H=nt(wn)}let I=H;if(g&&E!==!1){const _=Object.keys(g),{shapeFlag:$}=I;_.length&&$&7&&(s&&_.some(co)&&(g=Hf(g,s)),I=bn(I,g,!1,!0))}return r.dirs&&(I=bn(I,null,!1,!0),I.dirs=I.dirs?I.dirs.concat(r.dirs):r.dirs),r.transition&&To(I,r.transition),H=I,qi(q),H}const Kf=e=>{let t;for(const r in e)(r==="class"||r==="style"||os(r))&&((t||(t={}))[r]=e[r]);return t},Hf=(e,t)=>{const r={};for(const n in e)(!co(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function Wf(e,t,r){const{props:n,children:i,component:s}=e,{props:o,children:u,patchFlag:l}=t,p=s.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?Yo(n,o,p):!!o;if(l&8){const d=t.dynamicProps;for(let m=0;m<d.length;m++){const S=d[m];if(Gu(o,n,S)&&!ps(p,S))return!0}}}else return(i||u)&&(!u||!u.$stable)?!0:n===o?!1:n?o?Yo(n,o,p):!0:!!o;return!1}function Yo(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(Gu(t,e,s)&&!ps(r,s))return!0}return!1}function Gu(e,t,r){const n=e[r],i=t[r];return r==="style"&&de(n)&&de(i)?!go(n,i):n!==i}function Jf({vnode:e,parent:t},r){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=r,t=t.parent;else break}}const Zu={},Xu=()=>Object.create(Zu),Yu=e=>Object.getPrototypeOf(e)===Zu;function Qf(e,t,r,n=!1){const i={},s=Xu();e.propsDefaults=Object.create(null),el(e,t,i,s);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);r?e.props=n?i:ef(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function Gf(e,t,r,n){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,u=ue(i),[l]=e.propsOptions;let p=!1;if((n||o>0)&&!(o&16)){if(o&8){const d=e.vnode.dynamicProps;for(let m=0;m<d.length;m++){let S=d[m];if(ps(e.emitsOptions,S))continue;const b=t[S];if(l)if(le(s,S))b!==s[S]&&(s[S]=b,p=!0);else{const U=Kt(S);i[U]=Vs(l,u,U,b,e,!1)}else b!==s[S]&&(s[S]=b,p=!0)}}}else{el(e,t,i,s)&&(p=!0);let d;for(const m in u)(!t||!le(t,m)&&((d=vr(m))===m||!le(t,d)))&&(l?r&&(r[m]!==void 0||r[d]!==void 0)&&(i[m]=Vs(l,u,m,void 0,e,!0)):delete i[m]);if(s!==u)for(const m in s)(!t||!le(t,m))&&(delete s[m],p=!0)}p&&Ut(e.attrs,"set","")}function el(e,t,r,n){const[i,s]=e.propsOptions;let o=!1,u;if(t)for(let l in t){if(Nn(l))continue;const p=t[l];let d;i&&le(i,d=Kt(l))?!s||!s.includes(d)?r[d]=p:(u||(u={}))[d]=p:ps(e.emitsOptions,l)||(!(l in n)||p!==n[l])&&(n[l]=p,o=!0)}if(s){const l=ue(r),p=u||me;for(let d=0;d<s.length;d++){const m=s[d];r[m]=Vs(i,l,m,p[m],e,!le(p,m))}}return o}function Vs(e,t,r,n,i,s){const o=e[r];if(o!=null){const u=le(o,"default");if(u&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&X(l)){const{propsDefaults:p}=i;if(r in p)n=p[r];else{const d=_i(i);n=p[r]=l.call(null,t),d()}}else n=l;i.ce&&i.ce._setProp(r,n)}o[0]&&(s&&!u?n=!1:o[1]&&(n===""||n===vr(r))&&(n=!0))}return n}const Zf=new WeakMap;function tl(e,t,r=!1){const n=r?Zf:t.propsCache,i=n.get(e);if(i)return i;const s=e.props,o={},u=[];let l=!1;if(!X(e)){const d=m=>{l=!0;const[S,b]=tl(m,t,!0);Pe(o,S),b&&u.push(...b)};!r&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!s&&!l)return de(e)&&n.set(e,en),en;if(W(s))for(let d=0;d<s.length;d++){const m=Kt(s[d]);ea(m)&&(o[m]=me)}else if(s)for(const d in s){const m=Kt(d);if(ea(m)){const S=s[d],b=o[m]=W(S)||X(S)?{type:S}:Pe({},S),U=b.type;let E=!1,q=!0;if(W(U))for(let H=0;H<U.length;++H){const g=U[H],I=X(g)&&g.name;if(I==="Boolean"){E=!0;break}else I==="String"&&(q=!1)}else E=X(U)&&U.name==="Boolean";b[0]=E,b[1]=q,(E||le(b,"default"))&&u.push(m)}}const p=[o,u];return de(e)&&n.set(e,p),p}function ea(e){return e[0]!=="$"&&!Nn(e)}const Bo=e=>e==="_"||e==="_ctx"||e==="$stable",Uo=e=>W(e)?e.map(wt):[wt(e)],Xf=(e,t,r)=>{if(t._n)return t;const n=hf((...i)=>Uo(t(...i)),r);return n._c=!1,n},rl=(e,t,r)=>{const n=e._ctx;for(const i in e){if(Bo(i))continue;const s=e[i];if(X(s))t[i]=Xf(i,s,n);else if(s!=null){const o=Uo(s);t[i]=()=>o}}},nl=(e,t)=>{const r=Uo(t);e.slots.default=()=>r},il=(e,t,r)=>{for(const n in t)(r||!Bo(n))&&(e[n]=t[n])},Yf=(e,t,r)=>{const n=e.slots=Xu();if(e.vnode.shapeFlag&32){const i=t._;i?(il(n,t,r),r&&fu(n,"_",i,!0)):rl(t,n)}else t&&nl(e,t)},ed=(e,t,r)=>{const{vnode:n,slots:i}=e;let s=!0,o=me;if(n.shapeFlag&32){const u=t._;u?r&&u===1?s=!1:il(i,t,r):(s=!t.$stable,rl(t,i)),o=t}else t&&(nl(e,t),o={default:1});if(s)for(const u in i)!Bo(u)&&o[u]==null&&delete i[u]},He=sd;function td(e){return rd(e)}function rd(e,t){const r=us();r.__VUE__=!0;const{insert:n,remove:i,patchProp:s,createElement:o,createText:u,createComment:l,setText:p,setElementText:d,parentNode:m,nextSibling:S,setScopeId:b=bt,insertStaticContent:U}=e,E=(f,h,w,R=null,B=null,A=null,P=void 0,F=null,M=!!h.dynamicChildren)=>{if(f===h)return;f&&!An(f,h)&&(R=ee(f),J(f,B,A,!0),f=null),h.patchFlag===-2&&(M=!1,h.dynamicChildren=null);const{type:C,ref:L,shapeFlag:D}=h;switch(C){case ms:q(f,h,w,R);break;case wn:H(f,h,w,R);break;case Us:f==null&&g(h,w,R,P);break;case yt:ut(f,h,w,R,B,A,P,F,M);break;default:D&1?$(f,h,w,R,B,A,P,F,M):D&6?lt(f,h,w,R,B,A,P,F,M):(D&64||D&128)&&C.process(f,h,w,R,B,A,P,F,M,Ae)}L!=null&&B?kn(L,f&&f.ref,A,h||f,!h):L==null&&f&&f.ref!=null&&kn(f.ref,null,A,f,!0)},q=(f,h,w,R)=>{if(f==null)n(h.el=u(h.children),w,R);else{const B=h.el=f.el;h.children!==f.children&&p(B,h.children)}},H=(f,h,w,R)=>{f==null?n(h.el=l(h.children||""),w,R):h.el=f.el},g=(f,h,w,R)=>{[f.el,f.anchor]=U(f.children,h,w,R,f.el,f.anchor)},I=({el:f,anchor:h},w,R)=>{let B;for(;f&&f!==h;)B=S(f),n(f,w,R),f=B;n(h,w,R)},_=({el:f,anchor:h})=>{let w;for(;f&&f!==h;)w=S(f),i(f),f=w;i(h)},$=(f,h,w,R,B,A,P,F,M)=>{if(h.type==="svg"?P="svg":h.type==="math"&&(P="mathml"),f==null)te(h,w,R,B,A,P,F,M);else{const C=f.el&&f.el._isVueCE?f.el:null;try{C&&C._beginPatch(),ae(f,h,B,A,P,F,M)}finally{C&&C._endPatch()}}},te=(f,h,w,R,B,A,P,F)=>{let M,C;const{props:L,shapeFlag:D,transition:z,dirs:Q}=f;if(M=f.el=o(f.type,A,L&&L.is,L),D&8?d(M,f.children):D&16&&Ie(f.children,M,null,R,B,Bs(f,A),P,F),Q&&Ht(f,null,R,"created"),ye(M,f,f.scopeId,P,R),L){for(const we in L)we!=="value"&&!Nn(we)&&s(M,we,null,L[we],A,R);"value"in L&&s(M,"value",null,L.value,A),(C=L.onVnodeBeforeMount)&&ht(C,R,f)}Q&&Ht(f,null,R,"beforeMount");const re=nd(B,z);re&&z.beforeEnter(M),n(M,h,w),((C=L&&L.onVnodeMounted)||re||Q)&&He(()=>{C&&ht(C,R,f),re&&z.enter(M),Q&&Ht(f,null,R,"mounted")},B)},ye=(f,h,w,R,B)=>{if(w&&b(f,w),R)for(let A=0;A<R.length;A++)b(f,R[A]);if(B){let A=B.subTree;if(h===A||ul(A.type)&&(A.ssContent===h||A.ssFallback===h)){const P=B.vnode;ye(f,P,P.scopeId,P.slotScopeIds,B.parent)}}},Ie=(f,h,w,R,B,A,P,F,M=0)=>{for(let C=M;C<f.length;C++){const L=f[C]=F?Tt(f[C]):wt(f[C]);E(null,L,h,w,R,B,A,P,F)}},ae=(f,h,w,R,B,A,P)=>{const F=h.el=f.el;let{patchFlag:M,dynamicChildren:C,dirs:L}=h;M|=f.patchFlag&16;const D=f.props||me,z=h.props||me;let Q;if(w&&Wt(w,!1),(Q=z.onVnodeBeforeUpdate)&&ht(Q,w,h,f),L&&Ht(h,f,w,"beforeUpdate"),w&&Wt(w,!0),(D.innerHTML&&z.innerHTML==null||D.textContent&&z.textContent==null)&&d(F,""),C?qe(f.dynamicChildren,C,F,w,R,Bs(h,B),A):P||N(f,h,F,null,w,R,Bs(h,B),A,!1),M>0){if(M&16)at(F,D,z,w,B);else if(M&2&&D.class!==z.class&&s(F,"class",null,z.class,B),M&4&&s(F,"style",D.style,z.style,B),M&8){const re=h.dynamicProps;for(let we=0;we<re.length;we++){const fe=re[we],Le=D[fe],Ke=z[fe];(Ke!==Le||fe==="value")&&s(F,fe,Le,Ke,B,w)}}M&1&&f.children!==h.children&&d(F,h.children)}else!P&&C==null&&at(F,D,z,w,B);((Q=z.onVnodeUpdated)||L)&&He(()=>{Q&&ht(Q,w,h,f),L&&Ht(h,f,w,"updated")},R)},qe=(f,h,w,R,B,A,P)=>{for(let F=0;F<h.length;F++){const M=f[F],C=h[F],L=M.el&&(M.type===yt||!An(M,C)||M.shapeFlag&198)?m(M.el):w;E(M,C,L,null,R,B,A,P,!0)}},at=(f,h,w,R,B)=>{if(h!==w){if(h!==me)for(const A in h)!Nn(A)&&!(A in w)&&s(f,A,h[A],null,B,R);for(const A in w){if(Nn(A))continue;const P=w[A],F=h[A];P!==F&&A!=="value"&&s(f,A,F,P,B,R)}"value"in w&&s(f,"value",h.value,w.value,B)}},ut=(f,h,w,R,B,A,P,F,M)=>{const C=h.el=f?f.el:u(""),L=h.anchor=f?f.anchor:u("");let{patchFlag:D,dynamicChildren:z,slotScopeIds:Q}=h;Q&&(F=F?F.concat(Q):Q),f==null?(n(C,w,R),n(L,w,R),Ie(h.children||[],w,L,B,A,P,F,M)):D>0&&D&64&&z&&f.dynamicChildren&&f.dynamicChildren.length===z.length?(qe(f.dynamicChildren,z,w,B,A,P,F),(h.key!=null||B&&h===B.subTree)&&sl(f,h,!0)):N(f,h,w,L,B,A,P,F,M)},lt=(f,h,w,R,B,A,P,F,M)=>{h.slotScopeIds=F,f==null?h.shapeFlag&512?B.ctx.activate(h,w,R,P,M):Sn(h,w,R,B,A,P,M):Re(f,h,M)},Sn=(f,h,w,R,B,A,P)=>{const F=f.component=hd(f,R,B);if(ku(f)&&(F.ctx.renderer=Ae),md(F,!1,P),F.asyncDep){if(B&&B.registerDep(F,v,P),!f.el){const M=F.subTree=nt(wn);H(null,M,h,w),f.placeholder=M.el}}else v(F,f,h,w,B,A,P)},Re=(f,h,w)=>{const R=h.component=f.component;if(Wf(f,h,w))if(R.asyncDep&&!R.asyncResolved){O(R,h,w);return}else R.next=h,R.update();else h.el=f.el,R.vnode=h},v=(f,h,w,R,B,A,P)=>{const F=()=>{if(f.isMounted){let{next:D,bu:z,u:Q,parent:re,vnode:we}=f;{const ft=ol(f);if(ft){D&&(D.el=we.el,O(f,D,P)),ft.asyncDep.then(()=>{He(()=>{f.isUnmounted||C()},B)});return}}let fe=D,Le;Wt(f,!1),D?(D.el=we.el,O(f,D,P)):D=we,z&&Ai(z),(Le=D.props&&D.props.onVnodeBeforeUpdate)&&ht(Le,re,D,we),Wt(f,!0);const Ke=Xo(f),ct=f.subTree;f.subTree=Ke,E(ct,Ke,m(ct.el),ee(ct),f,B,A),D.el=Ke.el,fe===null&&Jf(f,Ke.el),Q&&He(Q,B),(Le=D.props&&D.props.onVnodeUpdated)&&He(()=>ht(Le,re,D,we),B)}else{let D;const{el:z,props:Q}=h,{bm:re,m:we,parent:fe,root:Le,type:Ke}=f,ct=Ln(h);Wt(f,!1),re&&Ai(re),!ct&&(D=Q&&Q.onVnodeBeforeMount)&&ht(D,fe,h),Wt(f,!0);{Le.ce&&Le.ce._hasShadowRoot()&&Le.ce._injectChildStyle(Ke);const ft=f.subTree=Xo(f);E(null,ft,w,R,f,B,A),h.el=ft.el}if(we&&He(we,B),!ct&&(D=Q&&Q.onVnodeMounted)){const ft=h;He(()=>ht(D,fe,ft),B)}(h.shapeFlag&256||fe&&Ln(fe.vnode)&&fe.vnode.shapeFlag&256)&&f.a&&He(f.a,B),f.isMounted=!0,h=w=R=null}};f.scope.on();const M=f.effect=new mu(F);f.scope.off();const C=f.update=M.run.bind(M),L=f.job=M.runIfDirty.bind(M);L.i=f,L.id=f.uid,M.scheduler=()=>xo(L),Wt(f,!0),C()},O=(f,h,w)=>{h.component=f;const R=f.vnode.props;f.vnode=h,f.next=null,Gf(f,h.props,R,w),ed(f,h.children,w),Mt(),Ko(f),Ft()},N=(f,h,w,R,B,A,P,F,M=!1)=>{const C=f&&f.children,L=f?f.shapeFlag:0,D=h.children,{patchFlag:z,shapeFlag:Q}=h;if(z>0){if(z&128){Y(C,D,w,R,B,A,P,F,M);return}else if(z&256){Z(C,D,w,R,B,A,P,F,M);return}}Q&8?(L&16&&ve(C,B,A),D!==C&&d(w,D)):L&16?Q&16?Y(C,D,w,R,B,A,P,F,M):ve(C,B,A,!0):(L&8&&d(w,""),Q&16&&Ie(D,w,R,B,A,P,F,M))},Z=(f,h,w,R,B,A,P,F,M)=>{f=f||en,h=h||en;const C=f.length,L=h.length,D=Math.min(C,L);let z;for(z=0;z<D;z++){const Q=h[z]=M?Tt(h[z]):wt(h[z]);E(f[z],Q,w,null,B,A,P,F,M)}C>L?ve(f,B,A,!0,!1,D):Ie(h,w,R,B,A,P,F,M,D)},Y=(f,h,w,R,B,A,P,F,M)=>{let C=0;const L=h.length;let D=f.length-1,z=L-1;for(;C<=D&&C<=z;){const Q=f[C],re=h[C]=M?Tt(h[C]):wt(h[C]);if(An(Q,re))E(Q,re,w,null,B,A,P,F,M);else break;C++}for(;C<=D&&C<=z;){const Q=f[D],re=h[z]=M?Tt(h[z]):wt(h[z]);if(An(Q,re))E(Q,re,w,null,B,A,P,F,M);else break;D--,z--}if(C>D){if(C<=z){const Q=z+1,re=Q<L?h[Q].el:R;for(;C<=z;)E(null,h[C]=M?Tt(h[C]):wt(h[C]),w,re,B,A,P,F,M),C++}}else if(C>z)for(;C<=D;)J(f[C],B,A,!0),C++;else{const Q=C,re=C,we=new Map;for(C=re;C<=z;C++){const Je=h[C]=M?Tt(h[C]):wt(h[C]);Je.key!=null&&we.set(Je.key,C)}let fe,Le=0;const Ke=z-re+1;let ct=!1,ft=0;const xn=new Array(Ke);for(C=0;C<Ke;C++)xn[C]=0;for(C=Q;C<=D;C++){const Je=f[C];if(Le>=Ke){J(Je,B,A,!0);continue}let dt;if(Je.key!=null)dt=we.get(Je.key);else for(fe=re;fe<=z;fe++)if(xn[fe-re]===0&&An(Je,h[fe])){dt=fe;break}dt===void 0?J(Je,B,A,!0):(xn[dt-re]=C+1,dt>=ft?ft=dt:ct=!0,E(Je,h[dt],w,null,B,A,P,F,M),Le++)}const Do=ct?id(xn):en;for(fe=Do.length-1,C=Ke-1;C>=0;C--){const Je=re+C,dt=h[Je],$o=h[Je+1],No=Je+1<L?$o.el||al($o):R;xn[C]===0?E(null,dt,w,No,B,A,P,F,M):ct&&(fe<0||C!==Do[fe]?k(dt,w,No,2):fe--)}}},k=(f,h,w,R,B=null)=>{const{el:A,type:P,transition:F,children:M,shapeFlag:C}=f;if(C&6){k(f.component.subTree,h,w,R);return}if(C&128){f.suspense.move(h,w,R);return}if(C&64){P.move(f,h,w,Ae);return}if(P===yt){n(A,h,w);for(let D=0;D<M.length;D++)k(M[D],h,w,R);n(f.anchor,h,w);return}if(P===Us){I(f,h,w);return}if(R!==2&&C&1&&F)if(R===0)F.beforeEnter(A),n(A,h,w),He(()=>F.enter(A),B);else{const{leave:D,delayLeave:z,afterLeave:Q}=F,re=()=>{f.ctx.isUnmounted?i(A):n(A,h,w)},we=()=>{A._isLeaving&&A[vf](!0),D(A,()=>{re(),Q&&Q()})};z?z(A,re,we):we()}else n(A,h,w)},J=(f,h,w,R=!1,B=!1)=>{const{type:A,props:P,ref:F,children:M,dynamicChildren:C,shapeFlag:L,patchFlag:D,dirs:z,cacheIndex:Q}=f;if(D===-2&&(B=!1),F!=null&&(Mt(),kn(F,null,w,f,!0),Ft()),Q!=null&&(h.renderCache[Q]=void 0),L&256){h.ctx.deactivate(f);return}const re=L&1&&z,we=!Ln(f);let fe;if(we&&(fe=P&&P.onVnodeBeforeUnmount)&&ht(fe,h,f),L&6)he(f.component,w,R);else{if(L&128){f.suspense.unmount(w,R);return}re&&Ht(f,null,h,"beforeUnmount"),L&64?f.type.remove(f,h,w,Ae,R):C&&!C.hasOnce&&(A!==yt||D>0&&D&64)?ve(C,h,w,!1,!0):(A===yt&&D&384||!B&&L&16)&&ve(M,h,w),R&&Se(f)}(we&&(fe=P&&P.onVnodeUnmounted)||re)&&He(()=>{fe&&ht(fe,h,f),re&&Ht(f,null,h,"unmounted")},w)},Se=f=>{const{type:h,el:w,anchor:R,transition:B}=f;if(h===yt){xe(w,R);return}if(h===Us){_(f);return}const A=()=>{i(w),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(f.shapeFlag&1&&B&&!B.persisted){const{leave:P,delayLeave:F}=B,M=()=>P(w,A);F?F(f.el,A,M):M()}else A()},xe=(f,h)=>{let w;for(;f!==h;)w=S(f),i(f),f=w;i(h)},he=(f,h,w)=>{const{bum:R,scope:B,job:A,subTree:P,um:F,m:M,a:C}=f;ta(M),ta(C),R&&Ai(R),B.stop(),A&&(A.flags|=8,J(P,f,h,w)),F&&He(F,h),He(()=>{f.isUnmounted=!0},h)},ve=(f,h,w,R=!1,B=!1,A=0)=>{for(let P=A;P<f.length;P++)J(f[P],h,w,R,B)},ee=f=>{if(f.shapeFlag&6)return ee(f.component.subTree);if(f.shapeFlag&128)return f.suspense.next();const h=S(f.anchor||f.el),w=h&&h[wf];return w?S(w):h};let Ee=!1;const ke=(f,h,w)=>{let R;f==null?h._vnode&&(J(h._vnode,null,null,!0),R=h._vnode.component):E(h._vnode||null,f,h,null,null,null,w),h._vnode=f,Ee||(Ee=!0,Ko(R),Pu(),Ee=!1)},Ae={p:E,um:J,m:k,r:Se,mt:Sn,mc:Ie,pc:N,pbc:qe,n:ee,o:e};return{render:ke,hydrate:void 0,createApp:zf(ke)}}function Bs({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function Wt({effect:e,job:t},r){r?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function nd(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function sl(e,t,r=!1){const n=e.children,i=t.children;if(W(n)&&W(i))for(let s=0;s<n.length;s++){const o=n[s];let u=i[s];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=i[s]=Tt(i[s]),u.el=o.el),!r&&u.patchFlag!==-2&&sl(o,u)),u.type===ms&&(u.patchFlag===-1&&(u=i[s]=Tt(u)),u.el=o.el),u.type===wn&&!u.el&&(u.el=o.el)}}function id(e){const t=e.slice(),r=[0];let n,i,s,o,u;const l=e.length;for(n=0;n<l;n++){const p=e[n];if(p!==0){if(i=r[r.length-1],e[i]<p){t[n]=i,r.push(n);continue}for(s=0,o=r.length-1;s<o;)u=s+o>>1,e[r[u]]<p?s=u+1:o=u;p<e[r[s]]&&(s>0&&(t[n]=r[s-1]),r[s]=n)}}for(s=r.length,o=r[s-1];s-- >0;)r[s]=o,o=t[o];return r}function ol(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ol(t)}function ta(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function al(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?al(t.subTree):null}const ul=e=>e.__isSuspense;function sd(e,t){t&&t.pendingBranch?W(e)?t.effects.push(...e):t.effects.push(e):df(e)}const yt=Symbol.for("v-fgt"),ms=Symbol.for("v-txt"),wn=Symbol.for("v-cmt"),Us=Symbol.for("v-stc"),Hn=[];let Ze=null;function Bn(e=!1){Hn.push(Ze=e?null:[])}function od(){Hn.pop(),Ze=Hn[Hn.length-1]||null}let si=1;function Ki(e,t=!1){si+=e,e<0&&Ze&&t&&(Ze.hasOnce=!0)}function ad(e){return e.dynamicChildren=si>0?Ze||en:null,od(),si>0&&Ze&&Ze.push(e),e}function Un(e,t,r,n,i,s){return ad(mt(e,t,r,n,i,s,!0))}function Hi(e){return e?e.__v_isVNode===!0:!1}function An(e,t){return e.type===t.type&&e.key===t.key}const ll=({key:e})=>e??null,Ri=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Ce(e)||Ne(e)||X(e)?{i:et,r:e,k:t,f:!!r}:e:null);function mt(e,t=null,r=null,n=0,i=null,s=e===yt?0:1,o=!1,u=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ll(t),ref:t&&Ri(t),scopeId:$u,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:et};return u?(Ao(l,r),s&128&&e.normalize(l)):r&&(l.shapeFlag|=Ce(r)?8:16),si>0&&!o&&Ze&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Ze.push(l),l}const nt=ud;function ud(e,t=null,r=null,n=0,i=null,s=!1){if((!e||e===Mf)&&(e=wn),Hi(e)){const u=bn(e,t,!0);return r&&Ao(u,r),si>0&&!s&&Ze&&(u.shapeFlag&6?Ze[Ze.indexOf(e)]=u:Ze.push(u)),u.patchFlag=-2,u}if(bd(e)&&(e=e.__vccOpts),t){t=ld(t);let{class:u,style:l}=t;u&&!Ce(u)&&(t.class=mo(u)),de(l)&&(So(l)&&!W(l)&&(l=Pe({},l)),t.style=ls(l))}const o=Ce(e)?1:ul(e)?128:bf(e)?64:de(e)?4:X(e)?2:0;return mt(e,t,r,n,i,o,s,!0)}function ld(e){return e?So(e)||Yu(e)?Pe({},e):e:null}function bn(e,t,r=!1,n=!1){const{props:i,ref:s,patchFlag:o,children:u,transition:l}=e,p=t?cd(i||{},t):i,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:p,key:p&&ll(p),ref:t&&t.ref?r&&s?W(s)?s.concat(Ri(t)):[s,Ri(t)]:Ri(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==yt?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&bn(e.ssContent),ssFallback:e.ssFallback&&bn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&To(d,l.clone(d)),d}function cl(e=" ",t=0){return nt(ms,null,e,t)}function wt(e){return e==null||typeof e=="boolean"?nt(wn):W(e)?nt(yt,null,e.slice()):Hi(e)?Tt(e):nt(ms,null,String(e))}function Tt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:bn(e)}function Ao(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(W(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),Ao(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!Yu(t)?t._ctx=et:i===3&&et&&(et.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else X(t)?(t={default:t,_ctx:et},r=32):(t=String(t),n&64?(r=16,t=[cl(t)]):r=8);e.children=t,e.shapeFlag|=r}function cd(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=mo([t.class,n.class]));else if(i==="style")t.style=ls([t.style,n.style]);else if(os(i)){const s=t[i],o=n[i];o&&s!==o&&!(W(s)&&s.includes(o))&&(t[i]=s?[].concat(s,o):o)}else i!==""&&(t[i]=n[i])}return t}function ht(e,t,r,n=null){_t(e,t,7,[r,n])}const fd=Ju();let dd=0;function hd(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||fd,s={uid:dd++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Oc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:tl(n,i),emitsOptions:Qu(n,i),emit:null,emitted:null,propsDefaults:me,inheritAttrs:n.inheritAttrs,ctx:me,data:me,props:me,attrs:me,slots:me,refs:me,setupState:me,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=kf.bind(null,s),e.ce&&e.ce(s),s}let ze=null;const pd=()=>ze||et;let Wi,js;{const e=us(),t=(r,n)=>{let i;return(i=e[r])||(i=e[r]=[]),i.push(n),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Wi=t("__VUE_INSTANCE_SETTERS__",r=>ze=r),js=t("__VUE_SSR_SETTERS__",r=>oi=r)}const _i=e=>{const t=ze;return Wi(e),e.scope.on(),()=>{e.scope.off(),Wi(t)}},ra=()=>{ze&&ze.scope.off(),Wi(null)};function fl(e){return e.vnode.shapeFlag&4}let oi=!1;function md(e,t=!1,r=!1){t&&js(t);const{props:n,children:i}=e.vnode,s=fl(e);Qf(e,n,s,t),Yf(e,i,r||t);const o=s?gd(e,t):void 0;return t&&js(!1),o}function gd(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Of);const{setup:n}=r;if(n){Mt();const i=e.setupContext=n.length>1?wd(e):null,s=_i(e),o=bi(n,e,0,[e.props,i]),u=au(o);if(Ft(),s(),(u||e.sp)&&!Ln(e)&&qu(e),u){if(o.then(ra,ra),t)return o.then(l=>{na(e,l)}).catch(l=>{ds(l,e,0)});e.asyncDep=o}else na(e,o)}else dl(e)}function na(e,t,r){X(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:de(t)&&(e.setupState=Mu(t)),dl(e)}function dl(e,t,r){const n=e.type;e.render||(e.render=n.render||bt);{const i=_i(e);Mt();try{Pf(e)}finally{Ft(),i()}}}const yd={get(e,t){return $e(e,"get",""),e[t]}};function wd(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,yd),slots:e.slots,emit:e.emit,expose:t}}function gs(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Mu(tf(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Kn)return Kn[r](e)},has(t,r){return r in t||r in Kn}})):e.proxy}function bd(e){return X(e)&&"__vccOpts"in e}const vd=(e,t)=>of(e,t,oi);function ia(e,t,r){try{Ki(-1);const n=arguments.length;return n===2?de(t)&&!W(t)?Hi(t)?nt(e,null,[t]):nt(e,t):nt(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Hi(r)&&(r=[r]),nt(e,t,r))}finally{Ki(1)}}const _d="3.5.29";/**
* @vue/runtime-dom v3.5.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zs;const sa=typeof window<"u"&&window.trustedTypes;if(sa)try{zs=sa.createPolicy("vue",{createHTML:e=>e})}catch{}const hl=zs?e=>zs.createHTML(e):e=>e,Id="http://www.w3.org/2000/svg",Sd="http://www.w3.org/1998/Math/MathML",xt=typeof document<"u"?document:null,oa=xt&&xt.createElement("template"),xd={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t==="svg"?xt.createElementNS(Id,e):t==="mathml"?xt.createElementNS(Sd,e):r?xt.createElement(e,{is:r}):xt.createElement(e);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>xt.createTextNode(e),createComment:e=>xt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>xt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,i,s){const o=r?r.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===s||!(i=i.nextSibling)););else{oa.innerHTML=hl(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const u=oa.content;if(n==="svg"||n==="mathml"){const l=u.firstChild;for(;l.firstChild;)u.appendChild(l.firstChild);u.removeChild(l)}t.insertBefore(u,r)}return[o?o.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},Td=Symbol("_vtc");function Bd(e,t,r){const n=e[Td];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const aa=Symbol("_vod"),Ud=Symbol("_vsh"),Ad=Symbol(""),Cd=/(?:^|;)\s*display\s*:/;function Rd(e,t,r){const n=e.style,i=Ce(r);let s=!1;if(r&&!i){if(t)if(Ce(t))for(const o of t.split(";")){const u=o.slice(0,o.indexOf(":")).trim();r[u]==null&&Ei(n,u,"")}else for(const o in t)r[o]==null&&Ei(n,o,"");for(const o in r)o==="display"&&(s=!0),Ei(n,o,r[o])}else if(i){if(t!==r){const o=n[Ad];o&&(r+=";"+o),n.cssText=r,s=Cd.test(r)}}else t&&e.removeAttribute("style");aa in e&&(e[aa]=s?n.display:"",e[Ud]&&(n.display="none"))}const ua=/\s*!important$/;function Ei(e,t,r){if(W(r))r.forEach(n=>Ei(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=Ed(e,t);ua.test(r)?e.setProperty(vr(n),r.replace(ua,""),"important"):e[n]=r}}const la=["Webkit","Moz","ms"],As={};function Ed(e,t){const r=As[t];if(r)return r;let n=Kt(t);if(n!=="filter"&&n in e)return As[t]=n;n=cu(n);for(let i=0;i<la.length;i++){const s=la[i]+n;if(s in e)return As[t]=s}return t}const ca="http://www.w3.org/1999/xlink";function fa(e,t,r,n,i,s=Mc(t)){n&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(ca,t.slice(6,t.length)):e.setAttributeNS(ca,t,r):r==null||s&&!du(r)?e.removeAttribute(t):e.setAttribute(t,s?"":vt(r)?String(r):r)}function da(e,t,r,n,i){if(t==="innerHTML"||t==="textContent"){r!=null&&(e[t]=t==="innerHTML"?hl(r):r);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const u=s==="OPTION"?e.getAttribute("value")||"":e.value,l=r==null?e.type==="checkbox"?"on":"":String(r);(u!==l||!("_value"in e))&&(e.value=l),r==null&&e.removeAttribute(t),e._value=r;return}let o=!1;if(r===""||r==null){const u=typeof e[t];u==="boolean"?r=du(r):r==null&&u==="string"?(r="",o=!0):u==="number"&&(r=0,o=!0)}try{e[t]=r}catch{}o&&e.removeAttribute(i||t)}function qr(e,t,r,n){e.addEventListener(t,r,n)}function Md(e,t,r,n){e.removeEventListener(t,r,n)}const ha=Symbol("_vei");function Fd(e,t,r,n,i=null){const s=e[ha]||(e[ha]={}),o=s[t];if(n&&o)o.value=n;else{const[u,l]=Od(t);if(n){const p=s[t]=$d(n,i);qr(e,u,p,l)}else o&&(Md(e,u,o,l),s[t]=void 0)}}const pa=/(?:Once|Passive|Capture)$/;function Od(e){let t;if(pa.test(e)){t={};let n;for(;n=e.match(pa);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):vr(e.slice(2)),t]}let Cs=0;const Pd=Promise.resolve(),Dd=()=>Cs||(Pd.then(()=>Cs=0),Cs=Date.now());function $d(e,t){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;_t(Nd(n,r.value),t,5,[n])};return r.value=e,r.attached=Dd(),r}function Nd(e,t){if(W(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const ma=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Vd=(e,t,r,n,i,s)=>{const o=i==="svg";t==="class"?Bd(e,n,o):t==="style"?Rd(e,r,n):os(t)?co(t)||Fd(e,t,r,n,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):jd(e,t,n,o))?(da(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&fa(e,t,n,o,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ce(n))?da(e,Kt(t),n,s,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),fa(e,t,n,o))};function jd(e,t,r,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&ma(t)&&X(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return ma(t)&&Ce(r)?!1:t in e}const ga=e=>{const t=e.props["onUpdate:modelValue"]||!1;return W(t)?r=>Ai(t,r):t};function zd(e){e.target.composing=!0}function ya(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Rs=Symbol("_assign");function wa(e,t,r){return t&&(e=e.trim()),r&&(e=po(e)),e}const qd={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e[Rs]=ga(i);const s=n||i.props&&i.props.type==="number";qr(e,t?"change":"input",o=>{o.target.composing||e[Rs](wa(e.value,r,s))}),(r||s)&&qr(e,"change",()=>{e.value=wa(e.value,r,s)}),t||(qr(e,"compositionstart",zd),qr(e,"compositionend",ya),qr(e,"change",ya))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:r,modifiers:{lazy:n,trim:i,number:s}},o){if(e[Rs]=ga(o),e.composing)return;const u=(s||e.type==="number")&&!/^0\d/.test(e.value)?po(e.value):e.value,l=t??"";u!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===r||i&&e.value.trim()===l)||(e.value=l))}},kd=["ctrl","shift","alt","meta"],Ld={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>kd.some(r=>e[`${r}Key`]&&!t.includes(r))},Kd=(e,t)=>{if(!e)return e;const r=e._withMods||(e._withMods={}),n=t.join(".");return r[n]||(r[n]=((i,...s)=>{for(let o=0;o<t.length;o++){const u=Ld[t[o]];if(u&&u(i,t))return}return e(i,...s)}))},Hd=Pe({patchProp:Vd},xd);let ba;function Wd(){return ba||(ba=td(Hd))}const Jd=((...e)=>{const t=Wd().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=Gd(n);if(!i)return;const s=t._component;!X(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=r(i,!1,Qd(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t});function Qd(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Gd(e){return Ce(e)?document.querySelector(e):e}function Zd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Cn={},va;function Xd(){if(va)return Cn;va=1,Cn.byteLength=u,Cn.toByteArray=p,Cn.fromByteArray=S;for(var e=[],t=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=n.length;i<s;++i)e[i]=n[i],t[n.charCodeAt(i)]=i;t[45]=62,t[95]=63;function o(b){var U=b.length;if(U%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var E=b.indexOf("=");E===-1&&(E=U);var q=E===U?0:4-E%4;return[E,q]}function u(b){var U=o(b),E=U[0],q=U[1];return(E+q)*3/4-q}function l(b,U,E){return(U+E)*3/4-E}function p(b){var U,E=o(b),q=E[0],H=E[1],g=new r(l(b,q,H)),I=0,_=H>0?q-4:q,$;for($=0;$<_;$+=4)U=t[b.charCodeAt($)]<<18|t[b.charCodeAt($+1)]<<12|t[b.charCodeAt($+2)]<<6|t[b.charCodeAt($+3)],g[I++]=U>>16&255,g[I++]=U>>8&255,g[I++]=U&255;return H===2&&(U=t[b.charCodeAt($)]<<2|t[b.charCodeAt($+1)]>>4,g[I++]=U&255),H===1&&(U=t[b.charCodeAt($)]<<10|t[b.charCodeAt($+1)]<<4|t[b.charCodeAt($+2)]>>2,g[I++]=U>>8&255,g[I++]=U&255),g}function d(b){return e[b>>18&63]+e[b>>12&63]+e[b>>6&63]+e[b&63]}function m(b,U,E){for(var q,H=[],g=U;g<E;g+=3)q=(b[g]<<16&16711680)+(b[g+1]<<8&65280)+(b[g+2]&255),H.push(d(q));return H.join("")}function S(b){for(var U,E=b.length,q=E%3,H=[],g=16383,I=0,_=E-q;I<_;I+=g)H.push(m(b,I,I+g>_?_:I+g));return q===1?(U=b[E-1],H.push(e[U>>2]+e[U<<4&63]+"==")):q===2&&(U=(b[E-2]<<8)+b[E-1],H.push(e[U>>10]+e[U>>4&63]+e[U<<2&63]+"=")),H.join("")}return Cn}var Co=Xd(),Ti={exports:{}},_a;function Yd(){return _a||(_a=1,(function(e,t){const{hasOwnProperty:r}=Object.prototype,n=H();n.configure=H,n.stringify=n,n.default=n,t.stringify=n,t.configure=H,e.exports=n;const i=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function s(g){return g.length<5e3&&!i.test(g)?`"${g}"`:JSON.stringify(g)}function o(g,I){if(g.length>200||I)return g.sort(I);for(let _=1;_<g.length;_++){const $=g[_];let te=_;for(;te!==0&&g[te-1]>$;)g[te]=g[te-1],te--;g[te]=$}return g}const u=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function l(g){return u.call(g)!==void 0&&g.length!==0}function p(g,I,_){g.length<_&&(_=g.length);const $=I===","?"":" ";let te=`"0":${$}${g[0]}`;for(let ye=1;ye<_;ye++)te+=`${I}"${ye}":${$}${g[ye]}`;return te}function d(g){if(r.call(g,"circularValue")){const I=g.circularValue;if(typeof I=="string")return`"${I}"`;if(I==null)return I;if(I===Error||I===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function m(g){let I;if(r.call(g,"deterministic")&&(I=g.deterministic,typeof I!="boolean"&&typeof I!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return I===void 0?!0:I}function S(g,I){let _;if(r.call(g,I)&&(_=g[I],typeof _!="boolean"))throw new TypeError(`The "${I}" argument must be of type boolean`);return _===void 0?!0:_}function b(g,I){let _;if(r.call(g,I)){if(_=g[I],typeof _!="number")throw new TypeError(`The "${I}" argument must be of type number`);if(!Number.isInteger(_))throw new TypeError(`The "${I}" argument must be an integer`);if(_<1)throw new RangeError(`The "${I}" argument must be >= 1`)}return _===void 0?1/0:_}function U(g){return g===1?"1 item":`${g} items`}function E(g){const I=new Set;for(const _ of g)(typeof _=="string"||typeof _=="number")&&I.add(String(_));return I}function q(g){if(r.call(g,"strict")){const I=g.strict;if(typeof I!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(I)return _=>{let $=`Object can not safely be stringified. Received type ${typeof _}`;throw typeof _!="function"&&($+=` (${_.toString()})`),new Error($)}}}function H(g){g={...g};const I=q(g);I&&(g.bigint===void 0&&(g.bigint=!1),"circularValue"in g||(g.circularValue=Error));const _=d(g),$=S(g,"bigint"),te=m(g),ye=typeof te=="function"?te:void 0,Ie=b(g,"maximumDepth"),ae=b(g,"maximumBreadth");function qe(Re,v,O,N,Z,Y){let k=v[Re];switch(typeof k=="object"&&k!==null&&typeof k.toJSON=="function"&&(k=k.toJSON(Re)),k=N.call(v,Re,k),typeof k){case"string":return s(k);case"object":{if(k===null)return"null";if(O.indexOf(k)!==-1)return _;let J="",Se=",";const xe=Y;if(Array.isArray(k)){if(k.length===0)return"[]";if(Ie<O.length+1)return'"[Array]"';O.push(k),Z!==""&&(Y+=Z,J+=`
${Y}`,Se=`,
${Y}`);const Ae=Math.min(k.length,ae);let rt=0;for(;rt<Ae-1;rt++){const h=qe(String(rt),k,O,N,Z,Y);J+=h!==void 0?h:"null",J+=Se}const f=qe(String(rt),k,O,N,Z,Y);if(J+=f!==void 0?f:"null",k.length-1>ae){const h=k.length-ae-1;J+=`${Se}"... ${U(h)} not stringified"`}return Z!==""&&(J+=`
${xe}`),O.pop(),`[${J}]`}let he=Object.keys(k);const ve=he.length;if(ve===0)return"{}";if(Ie<O.length+1)return'"[Object]"';let ee="",Ee="";Z!==""&&(Y+=Z,Se=`,
${Y}`,ee=" ");const ke=Math.min(ve,ae);te&&!l(k)&&(he=o(he,ye)),O.push(k);for(let Ae=0;Ae<ke;Ae++){const rt=he[Ae],f=qe(rt,k,O,N,Z,Y);f!==void 0&&(J+=`${Ee}${s(rt)}:${ee}${f}`,Ee=Se)}if(ve>ae){const Ae=ve-ae;J+=`${Ee}"...":${ee}"${U(Ae)} not stringified"`,Ee=Se}return Z!==""&&Ee.length>1&&(J=`
${Y}${J}
${xe}`),O.pop(),`{${J}}`}case"number":return isFinite(k)?String(k):I?I(k):"null";case"boolean":return k===!0?"true":"false";case"undefined":return;case"bigint":if($)return String(k);default:return I?I(k):void 0}}function at(Re,v,O,N,Z,Y){switch(typeof v=="object"&&v!==null&&typeof v.toJSON=="function"&&(v=v.toJSON(Re)),typeof v){case"string":return s(v);case"object":{if(v===null)return"null";if(O.indexOf(v)!==-1)return _;const k=Y;let J="",Se=",";if(Array.isArray(v)){if(v.length===0)return"[]";if(Ie<O.length+1)return'"[Array]"';O.push(v),Z!==""&&(Y+=Z,J+=`
${Y}`,Se=`,
${Y}`);const ve=Math.min(v.length,ae);let ee=0;for(;ee<ve-1;ee++){const ke=at(String(ee),v[ee],O,N,Z,Y);J+=ke!==void 0?ke:"null",J+=Se}const Ee=at(String(ee),v[ee],O,N,Z,Y);if(J+=Ee!==void 0?Ee:"null",v.length-1>ae){const ke=v.length-ae-1;J+=`${Se}"... ${U(ke)} not stringified"`}return Z!==""&&(J+=`
${k}`),O.pop(),`[${J}]`}O.push(v);let xe="";Z!==""&&(Y+=Z,Se=`,
${Y}`,xe=" ");let he="";for(const ve of N){const ee=at(ve,v[ve],O,N,Z,Y);ee!==void 0&&(J+=`${he}${s(ve)}:${xe}${ee}`,he=Se)}return Z!==""&&he.length>1&&(J=`
${Y}${J}
${k}`),O.pop(),`{${J}}`}case"number":return isFinite(v)?String(v):I?I(v):"null";case"boolean":return v===!0?"true":"false";case"undefined":return;case"bigint":if($)return String(v);default:return I?I(v):void 0}}function ut(Re,v,O,N,Z){switch(typeof v){case"string":return s(v);case"object":{if(v===null)return"null";if(typeof v.toJSON=="function"){if(v=v.toJSON(Re),typeof v!="object")return ut(Re,v,O,N,Z);if(v===null)return"null"}if(O.indexOf(v)!==-1)return _;const Y=Z;if(Array.isArray(v)){if(v.length===0)return"[]";if(Ie<O.length+1)return'"[Array]"';O.push(v),Z+=N;let ee=`
${Z}`;const Ee=`,
${Z}`,ke=Math.min(v.length,ae);let Ae=0;for(;Ae<ke-1;Ae++){const f=ut(String(Ae),v[Ae],O,N,Z);ee+=f!==void 0?f:"null",ee+=Ee}const rt=ut(String(Ae),v[Ae],O,N,Z);if(ee+=rt!==void 0?rt:"null",v.length-1>ae){const f=v.length-ae-1;ee+=`${Ee}"... ${U(f)} not stringified"`}return ee+=`
${Y}`,O.pop(),`[${ee}]`}let k=Object.keys(v);const J=k.length;if(J===0)return"{}";if(Ie<O.length+1)return'"[Object]"';Z+=N;const Se=`,
${Z}`;let xe="",he="",ve=Math.min(J,ae);l(v)&&(xe+=p(v,Se,ae),k=k.slice(v.length),ve-=v.length,he=Se),te&&(k=o(k,ye)),O.push(v);for(let ee=0;ee<ve;ee++){const Ee=k[ee],ke=ut(Ee,v[Ee],O,N,Z);ke!==void 0&&(xe+=`${he}${s(Ee)}: ${ke}`,he=Se)}if(J>ae){const ee=J-ae;xe+=`${he}"...": "${U(ee)} not stringified"`,he=Se}return he!==""&&(xe=`
${Z}${xe}
${Y}`),O.pop(),`{${xe}}`}case"number":return isFinite(v)?String(v):I?I(v):"null";case"boolean":return v===!0?"true":"false";case"undefined":return;case"bigint":if($)return String(v);default:return I?I(v):void 0}}function lt(Re,v,O){switch(typeof v){case"string":return s(v);case"object":{if(v===null)return"null";if(typeof v.toJSON=="function"){if(v=v.toJSON(Re),typeof v!="object")return lt(Re,v,O);if(v===null)return"null"}if(O.indexOf(v)!==-1)return _;let N="";const Z=v.length!==void 0;if(Z&&Array.isArray(v)){if(v.length===0)return"[]";if(Ie<O.length+1)return'"[Array]"';O.push(v);const xe=Math.min(v.length,ae);let he=0;for(;he<xe-1;he++){const ee=lt(String(he),v[he],O);N+=ee!==void 0?ee:"null",N+=","}const ve=lt(String(he),v[he],O);if(N+=ve!==void 0?ve:"null",v.length-1>ae){const ee=v.length-ae-1;N+=`,"... ${U(ee)} not stringified"`}return O.pop(),`[${N}]`}let Y=Object.keys(v);const k=Y.length;if(k===0)return"{}";if(Ie<O.length+1)return'"[Object]"';let J="",Se=Math.min(k,ae);Z&&l(v)&&(N+=p(v,",",ae),Y=Y.slice(v.length),Se-=v.length,J=","),te&&(Y=o(Y,ye)),O.push(v);for(let xe=0;xe<Se;xe++){const he=Y[xe],ve=lt(he,v[he],O);ve!==void 0&&(N+=`${J}${s(he)}:${ve}`,J=",")}if(k>ae){const xe=k-ae;N+=`${J}"...":"${U(xe)} not stringified"`}return O.pop(),`{${N}}`}case"number":return isFinite(v)?String(v):I?I(v):"null";case"boolean":return v===!0?"true":"false";case"undefined":return;case"bigint":if($)return String(v);default:return I?I(v):void 0}}function Sn(Re,v,O){if(arguments.length>1){let N="";if(typeof O=="number"?N=" ".repeat(Math.min(O,10)):typeof O=="string"&&(N=O.slice(0,10)),v!=null){if(typeof v=="function")return qe("",{"":Re},[],v,N,"");if(Array.isArray(v))return at("",Re,[],E(v),N,"")}if(N.length!==0)return ut("",Re,[],N,"")}return lt("",Re,[])}return Sn}})(Ti,Ti.exports)),Ti.exports}var eh=Yd();const pl=Zd(eh);pl.configure;const Ia=pl;var Rt,vn=(Rt=class{constructor(t){x(this,"__time_duration_micros__");this.__time_duration_micros__=t}static getAlgebraicType(){return V.Product({elements:[{name:"__time_duration_micros__",algebraicType:V.I64}]})}static isTimeDuration(t){if(t.tag!=="Product")return!1;const r=t.value.elements;if(r.length!==1)return!1;const n=r[0];return n.name==="__time_duration_micros__"&&n.algebraicType.tag==="I64"}get micros(){return this.__time_duration_micros__}get millis(){return Number(this.micros/Rt.MICROS_PER_MILLIS)}static fromMillis(t){return new Rt(BigInt(t)*Rt.MICROS_PER_MILLIS)}toString(){const t=this.micros,r=t<0?"-":"+",n=t<0?-t:t,i=n/1000000n,s=n%1000000n;return`${r}${i}.${String(s).padStart(6,"0")}`}},x(Rt,"MICROS_PER_MILLIS",1000n),Rt),Qe,_n=(Qe=class{constructor(t){x(this,"__timestamp_micros_since_unix_epoch__");this.__timestamp_micros_since_unix_epoch__=t}get microsSinceUnixEpoch(){return this.__timestamp_micros_since_unix_epoch__}static getAlgebraicType(){return V.Product({elements:[{name:"__timestamp_micros_since_unix_epoch__",algebraicType:V.I64}]})}static isTimestamp(t){if(t.tag!=="Product")return!1;const r=t.value.elements;if(r.length!==1)return!1;const n=r[0];return n.name==="__timestamp_micros_since_unix_epoch__"&&n.algebraicType.tag==="I64"}static now(){return Qe.fromDate(new Date)}toMillis(){return this.microsSinceUnixEpoch/1000n}static fromDate(t){const r=t.getTime(),n=BigInt(r)*Qe.MICROS_PER_MILLIS;return new Qe(n)}toDate(){const r=this.__timestamp_micros_since_unix_epoch__/Qe.MICROS_PER_MILLIS;if(r>BigInt(Number.MAX_SAFE_INTEGER)||r<BigInt(Number.MIN_SAFE_INTEGER))throw new RangeError("Timestamp is outside of the representable range of JS's Date");return new Date(Number(r))}toISOString(){const t=this.__timestamp_micros_since_unix_epoch__,r=t/Qe.MICROS_PER_MILLIS;if(r>BigInt(Number.MAX_SAFE_INTEGER)||r<BigInt(Number.MIN_SAFE_INTEGER))throw new RangeError("Timestamp is outside of the representable range for ISO string formatting");const i=new Date(Number(r)).toISOString(),s=Math.abs(Number(t%1000000n)),o=String(s).padStart(6,"0");return i.replace(/\.\d{3}Z$/,`.${o}Z`)}since(t){return new vn(this.__timestamp_micros_since_unix_epoch__-t.__timestamp_micros_since_unix_epoch__)}},x(Qe,"MICROS_PER_MILLIS",1000n),x(Qe,"UNIX_EPOCH",new Qe(0n)),Qe),Be,ml=(Be=class{constructor(t){x(this,"__uuid__");if(t<0n||t>Be.MAX_UUID_BIGINT)throw new Error("Invalid UUID: must be between 0 and `MAX_UUID_BIGINT`");this.__uuid__=t}static fromRandomBytesV4(t){if(t.length!==16)throw new Error("UUID v4 requires 16 bytes");const r=new Uint8Array(t);return r[6]=r[6]&15|64,r[8]=r[8]&63|128,new Be(Be.bytesToBigInt(r))}static fromCounterV7(t,r,n){if(n.length!==4)throw new Error("`fromCounterV7` requires `randomBytes.length == 4`");if(t.value<0)throw new Error("`fromCounterV7` uuid `counter` must be non-negative");if(r.__timestamp_micros_since_unix_epoch__<0)throw new Error("`fromCounterV7` `timestamp` before unix epoch");const i=t.value;t.value=i+1&2147483647;const s=r.toMillis()&0xffffffffffffn,o=new Uint8Array(16);return o[0]=Number(s>>40n&0xffn),o[1]=Number(s>>32n&0xffn),o[2]=Number(s>>24n&0xffn),o[3]=Number(s>>16n&0xffn),o[4]=Number(s>>8n&0xffn),o[5]=Number(s&0xffn),o[7]=i>>>23&255,o[9]=i>>>15&255,o[10]=i>>>7&255,o[11]=(i&127)<<1&255,o[12]|=n[0]&127,o[13]=n[1],o[14]=n[2],o[15]=n[3],o[6]=o[6]&15|112,o[8]=o[8]&63|128,new Be(Be.bytesToBigInt(o))}static parse(t){const r=t.replace(/-/g,"");if(r.length!==32)throw new Error("Invalid hex UUID");let n=0n;for(let i=0;i<32;i+=2)n=n<<8n|BigInt(parseInt(r.slice(i,i+2),16));return new Be(n)}toString(){const r=[...Be.bigIntToBytes(this.__uuid__)].map(n=>n.toString(16).padStart(2,"0")).join("");return r.slice(0,8)+"-"+r.slice(8,12)+"-"+r.slice(12,16)+"-"+r.slice(16,20)+"-"+r.slice(20)}asBigInt(){return this.__uuid__}toBytes(){return Be.bigIntToBytes(this.__uuid__)}static bytesToBigInt(t){let r=0n;for(const n of t)r=r<<8n|BigInt(n);return r}static bigIntToBytes(t){const r=new Uint8Array(16);for(let n=15;n>=0;n--)r[n]=Number(t&0xffn),t>>=8n;return r}getVersion(){const t=this.toBytes()[6]>>4&15;switch(t){case 4:return"V4";case 7:return"V7";default:if(this==Be.NIL)return"Nil";if(this==Be.MAX)return"Max";throw new Error(`Unsupported UUID version: ${t}`)}}getCounter(){const t=this.toBytes(),r=t[7],n=t[9],i=t[10],s=t[11]>>>1;return r<<23|n<<15|i<<7|s|0}compareTo(t){return this.__uuid__<t.__uuid__?-1:this.__uuid__>t.__uuid__?1:0}static getAlgebraicType(){return V.Product({elements:[{name:"__uuid__",algebraicType:V.U128}]})}},x(Be,"NIL",new Be(0n)),x(Be,"MAX_UUID_BIGINT",0xffffffffffffffffffffffffffffffffn),x(Be,"MAX",new Be(Be.MAX_UUID_BIGINT)),Be),Xi,gl,Wa,_e=(Wa=class{constructor(t){G(this,Xi);x(this,"view");x(this,"offset",0);this.view=t instanceof DataView?t:new DataView(t.buffer,t.byteOffset,t.byteLength),this.offset=0}reset(t){this.view=t,this.offset=0}get remaining(){return this.view.byteLength-this.offset}readUInt8Array(){const t=this.readU32();return K(this,Xi,gl).call(this,t),this.readBytes(t)}readBool(){const t=this.view.getUint8(this.offset);return this.offset+=1,t!==0}readByte(){const t=this.view.getUint8(this.offset);return this.offset+=1,t}readBytes(t){const r=new Uint8Array(this.view.buffer,this.view.byteOffset+this.offset,t);return this.offset+=t,r}readI8(){const t=this.view.getInt8(this.offset);return this.offset+=1,t}readU8(){return this.readByte()}readI16(){const t=this.view.getInt16(this.offset,!0);return this.offset+=2,t}readU16(){const t=this.view.getUint16(this.offset,!0);return this.offset+=2,t}readI32(){const t=this.view.getInt32(this.offset,!0);return this.offset+=4,t}readU32(){const t=this.view.getUint32(this.offset,!0);return this.offset+=4,t}readI64(){const t=this.view.getBigInt64(this.offset,!0);return this.offset+=8,t}readU64(){const t=this.view.getBigUint64(this.offset,!0);return this.offset+=8,t}readU128(){const t=this.view.getBigUint64(this.offset,!0),r=this.view.getBigUint64(this.offset+8,!0);return this.offset+=16,(r<<BigInt(64))+t}readI128(){const t=this.view.getBigUint64(this.offset,!0),r=this.view.getBigInt64(this.offset+8,!0);return this.offset+=16,(r<<BigInt(64))+t}readU256(){const t=this.view.getBigUint64(this.offset,!0),r=this.view.getBigUint64(this.offset+8,!0),n=this.view.getBigUint64(this.offset+16,!0),i=this.view.getBigUint64(this.offset+24,!0);return this.offset+=32,(i<<BigInt(192))+(n<<BigInt(128))+(r<<BigInt(64))+t}readI256(){const t=this.view.getBigUint64(this.offset,!0),r=this.view.getBigUint64(this.offset+8,!0),n=this.view.getBigUint64(this.offset+16,!0),i=this.view.getBigInt64(this.offset+24,!0);return this.offset+=32,(i<<BigInt(192))+(n<<BigInt(128))+(r<<BigInt(64))+t}readF32(){const t=this.view.getFloat32(this.offset,!0);return this.offset+=4,t}readF64(){const t=this.view.getFloat64(this.offset,!0);return this.offset+=8,t}readString(){const t=this.readUInt8Array();return new TextDecoder("utf-8").decode(t)}},Xi=new WeakSet,gl=function(t){if(this.offset+t>this.view.byteLength)throw new RangeError(`Tried to read ${t} byte(s) at relative offset ${this.offset}, but only ${this.remaining} byte(s) remain`)},Wa),th=ArrayBuffer.prototype.transfer??function(e){if(e===void 0)return this.slice();if(e<=this.byteLength)return this.slice(0,e);{const t=new Uint8Array(e);return t.set(new Uint8Array(this)),t.buffer}},rh=class{constructor(t){x(this,"buffer");x(this,"view");this.buffer=typeof t=="number"?new ArrayBuffer(t):t,this.view=new DataView(this.buffer)}get capacity(){return this.buffer.byteLength}grow(t){t<=this.buffer.byteLength||(this.buffer=th.call(this.buffer,t),this.view=new DataView(this.buffer))}},pe=class{constructor(t){x(this,"buffer");x(this,"offset",0);this.buffer=typeof t=="number"?new rh(t):t}reset(t){this.buffer=t,this.offset=0}expandBuffer(t){const r=this.offset+t+1;if(r<=this.buffer.capacity)return;let n=this.buffer.capacity*2;n<r&&(n=r),this.buffer.grow(n)}toBase64(){return Co.fromByteArray(this.getBuffer())}getBuffer(){return new Uint8Array(this.buffer.buffer,0,this.offset)}get view(){return this.buffer.view}writeUInt8Array(t){const r=t.length;this.expandBuffer(4+r),this.writeU32(r),new Uint8Array(this.buffer.buffer,this.offset).set(t),this.offset+=r}writeBool(t){this.expandBuffer(1),this.view.setUint8(this.offset,t?1:0),this.offset+=1}writeByte(t){this.expandBuffer(1),this.view.setUint8(this.offset,t),this.offset+=1}writeI8(t){this.expandBuffer(1),this.view.setInt8(this.offset,t),this.offset+=1}writeU8(t){this.expandBuffer(1),this.view.setUint8(this.offset,t),this.offset+=1}writeI16(t){this.expandBuffer(2),this.view.setInt16(this.offset,t,!0),this.offset+=2}writeU16(t){this.expandBuffer(2),this.view.setUint16(this.offset,t,!0),this.offset+=2}writeI32(t){this.expandBuffer(4),this.view.setInt32(this.offset,t,!0),this.offset+=4}writeU32(t){this.expandBuffer(4),this.view.setUint32(this.offset,t,!0),this.offset+=4}writeI64(t){this.expandBuffer(8),this.view.setBigInt64(this.offset,t,!0),this.offset+=8}writeU64(t){this.expandBuffer(8),this.view.setBigUint64(this.offset,t,!0),this.offset+=8}writeU128(t){this.expandBuffer(16);const r=t&BigInt("0xFFFFFFFFFFFFFFFF"),n=t>>BigInt(64);this.view.setBigUint64(this.offset,r,!0),this.view.setBigUint64(this.offset+8,n,!0),this.offset+=16}writeI128(t){this.expandBuffer(16);const r=t&BigInt("0xFFFFFFFFFFFFFFFF"),n=t>>BigInt(64);this.view.setBigInt64(this.offset,r,!0),this.view.setBigInt64(this.offset+8,n,!0),this.offset+=16}writeU256(t){this.expandBuffer(32);const r=BigInt("0xFFFFFFFFFFFFFFFF"),n=t&r,i=t>>BigInt(64)&r,s=t>>BigInt(128)&r,o=t>>BigInt(192);this.view.setBigUint64(this.offset+0,n,!0),this.view.setBigUint64(this.offset+8,i,!0),this.view.setBigUint64(this.offset+16,s,!0),this.view.setBigUint64(this.offset+24,o,!0),this.offset+=32}writeI256(t){this.expandBuffer(32);const r=BigInt("0xFFFFFFFFFFFFFFFF"),n=t&r,i=t>>BigInt(64)&r,s=t>>BigInt(128)&r,o=t>>BigInt(192);this.view.setBigUint64(this.offset+0,n,!0),this.view.setBigUint64(this.offset+8,i,!0),this.view.setBigUint64(this.offset+16,s,!0),this.view.setBigInt64(this.offset+24,o,!0),this.offset+=32}writeF32(t){this.expandBuffer(4),this.view.setFloat32(this.offset,t,!0),this.offset+=4}writeF64(t){this.expandBuffer(8),this.view.setFloat64(this.offset,t,!0),this.offset+=8}writeString(t){const n=new TextEncoder().encode(t);this.writeUInt8Array(n)}};function nh(e){const t=e.replace(/([-_][a-z])/gi,r=>r.toUpperCase().replace("-","").replace("_",""));return t.charAt(0).toUpperCase()+t.slice(1)}function Pn(e,t){if(e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const i of r)if(!n.includes(i)||!Pn(e[i],t[i]))return!1;return!0}function yl(e){return Array.prototype.map.call(e.reverse(),t=>("00"+t.toString(16)).slice(-2)).join("")}function ih(e){if(e.length!=16)throw new Error(`Uint8Array is not 16 bytes long: ${e}`);return new _e(e).readU128()}function sh(e){if(e.length!=32)throw new Error(`Uint8Array is not 32 bytes long: [${e}]`);return new _e(e).readU256()}function wl(e){e.startsWith("0x")&&(e=e.slice(2));const t=e.match(/.{1,2}/g)||[];return Uint8Array.from(t.map(n=>parseInt(n,16))).reverse()}function oh(e){return ih(wl(e))}function ah(e){return sh(wl(e))}function bl(e){const t=new pe(16);return t.writeU128(e),t.getBuffer()}function vl(e){return yl(bl(e))}function _l(e){const t=new pe(32);return t.writeU256(e),t.getBuffer()}function Il(e){return yl(_l(e))}function uh(e){return e.replace(/[-_]+/g,"_").replace(/_([a-zA-Z0-9])/g,(t,r)=>r.toUpperCase())}var Sa=Object.hasOwn,Ro=class qs{constructor(t){x(this,"__identity__");this.__identity__=typeof t=="string"?ah(t):t}static getAlgebraicType(){return V.Product({elements:[{name:"__identity__",algebraicType:V.U256}]})}isEqual(t){return this.toHexString()===t.toHexString()}equals(t){return this.isEqual(t)}toHexString(){return Il(this.__identity__)}toUint8Array(){return _l(this.__identity__)}static fromString(t){return new qs(t)}static zero(){return new qs(0n)}toString(){return this.toHexString()}},Wn=new Map,Jn=new Map,V={Ref:e=>({tag:"Ref",value:e}),Sum:e=>({tag:"Sum",value:e}),Product:e=>({tag:"Product",value:e}),Array:e=>({tag:"Array",value:e}),String:{tag:"String"},Bool:{tag:"Bool"},I8:{tag:"I8"},U8:{tag:"U8"},I16:{tag:"I16"},U16:{tag:"U16"},I32:{tag:"I32"},U32:{tag:"U32"},I64:{tag:"I64"},U64:{tag:"U64"},I128:{tag:"I128"},U128:{tag:"U128"},I256:{tag:"I256"},U256:{tag:"U256"},F32:{tag:"F32"},F64:{tag:"F64"},makeSerializer(e,t){if(e.tag==="Ref"){if(!t)throw new Error("cannot serialize refs without a typespace");for(;e.tag==="Ref";)e=t.types[e.value]}switch(e.tag){case"Product":return Ct.makeSerializer(e.value,t);case"Sum":return Ji.makeSerializer(e.value,t);case"Array":if(e.value.tag==="U8")return lh;{const r=V.makeSerializer(e.value,t);return(n,i)=>{n.writeU32(i.length);for(const s of i)r(n,s)}}default:return Sl[e.tag]}},serializeValue(e,t,r,n){V.makeSerializer(t,n)(e,r)},makeDeserializer(e,t){if(e.tag==="Ref"){if(!t)throw new Error("cannot deserialize refs without a typespace");for(;e.tag==="Ref";)e=t.types[e.value]}switch(e.tag){case"Product":return Ct.makeDeserializer(e.value,t);case"Sum":return Ji.makeDeserializer(e.value,t);case"Array":if(e.value.tag==="U8")return ch;{const r=V.makeDeserializer(e.value,t);return n=>{const i=n.readU32(),s=Array(i);for(let o=0;o<i;o++)s[o]=r(n);return s}}default:return xl[e.tag]}},deserializeValue(e,t,r){return V.makeDeserializer(t,r)(e)},intoMapKey:function(e,t){switch(e.tag){case"U8":case"U16":case"U32":case"U64":case"U128":case"U256":case"I8":case"I16":case"I32":case"I64":case"I128":case"I256":case"F32":case"F64":case"String":case"Bool":return t;case"Product":return Ct.intoMapKey(e.value,t);default:{const r=new pe(10);return V.serializeValue(r,e,t),r.toBase64()}}}};function ne(e){return Function.prototype.call.bind(e)}var Sl={Bool:ne(pe.prototype.writeBool),I8:ne(pe.prototype.writeI8),U8:ne(pe.prototype.writeU8),I16:ne(pe.prototype.writeI16),U16:ne(pe.prototype.writeU16),I32:ne(pe.prototype.writeI32),U32:ne(pe.prototype.writeU32),I64:ne(pe.prototype.writeI64),U64:ne(pe.prototype.writeU64),I128:ne(pe.prototype.writeI128),U128:ne(pe.prototype.writeU128),I256:ne(pe.prototype.writeI256),U256:ne(pe.prototype.writeU256),F32:ne(pe.prototype.writeF32),F64:ne(pe.prototype.writeF64),String:ne(pe.prototype.writeString)};Object.freeze(Sl);var lh=ne(pe.prototype.writeUInt8Array),xl={Bool:ne(_e.prototype.readBool),I8:ne(_e.prototype.readI8),U8:ne(_e.prototype.readU8),I16:ne(_e.prototype.readI16),U16:ne(_e.prototype.readU16),I32:ne(_e.prototype.readI32),U32:ne(_e.prototype.readU32),I64:ne(_e.prototype.readI64),U64:ne(_e.prototype.readU64),I128:ne(_e.prototype.readI128),U128:ne(_e.prototype.readU128),I256:ne(_e.prototype.readI256),U256:ne(_e.prototype.readU256),F32:ne(_e.prototype.readF32),F64:ne(_e.prototype.readF64),String:ne(_e.prototype.readString)};Object.freeze(xl);var ch=ne(_e.prototype.readUInt8Array),Xr={Bool:1,I8:1,U8:1,I16:2,U16:2,I32:4,U32:4,I64:8,U64:8,I128:16,U128:16,I256:32,U256:32,F32:4,F64:8},fh=new Set(Object.keys(Xr)),xa=e=>e.elements.every(({algebraicType:t})=>fh.has(t.tag)),dh=e=>e.elements.reduce((t,{algebraicType:r})=>t+Xr[r.tag],0),Bi={Bool:"Uint8",I8:"Int8",U8:"Uint8",I16:"Int16",U16:"Uint16",I32:"Int32",U32:"Uint32",I64:"BigInt64",U64:"BigUint64",F32:"Float32",F64:"Float64"},Mi={__time_duration_micros__:e=>new vn(e.readI64()),__timestamp_micros_since_unix_epoch__:e=>new _n(e.readI64()),__identity__:e=>new Ro(e.readU256()),__connection_id__:e=>new ys(e.readU128()),__uuid__:e=>new ml(e.readU128())};Object.freeze(Mi);var hh=()=>({}),Ta=e=>{let t;switch(e.algebraicType.tag){case"String":t="''";break;case"Bool":t="false";break;case"I8":case"U8":case"I16":case"U16":case"I32":case"U32":t="0";break;case"I64":case"U64":case"I128":case"U128":case"I256":case"U256":t="0n";break;case"F32":case"F64":t="0.0";break;default:t="undefined"}return`${e.name}: ${t}`},Ct={makeSerializer(e,t){let r=Wn.get(e);if(r!=null)return r;if(xa(e)){const o=`"use strict";
writer.expandBuffer(${dh(e)});
const view = writer.view;
${e.elements.map(({name:u,algebraicType:{tag:l}})=>l in Bi?`view.set${Bi[l]}(writer.offset, value.${u}, ${Xr[l]>1?"true":""});
writer.offset += ${Xr[l]};`:`writer.write${l}(value.${u});`).join(`
`)}`;return r=Function("writer","value",o),Wn.set(e,r),r}const n={},i=`"use strict";
`+e.elements.map(s=>`this.${s.name}(writer, value.${s.name});`).join(`
`);r=Function("writer","value",i).bind(n),Wn.set(e,r);for(const{name:s,algebraicType:o}of e.elements)n[s]=V.makeSerializer(o,t);return Object.freeze(n),r},serializeValue(e,t,r,n){Ct.makeSerializer(t,n)(e,r)},makeDeserializer(e,t){switch(e.elements.length){case 0:return hh;case 1:{const i=e.elements[0].name;if(Sa(Mi,i))return Mi[i]}}let r=Jn.get(e);if(r!=null)return r;if(xa(e)){const i=`"use strict";
const result = { ${e.elements.map(Ta).join(", ")} };
const view = reader.view;
${e.elements.map(({name:s,algebraicType:{tag:o}})=>o in Bi?`result.${s} = view.get${Bi[o]}(reader.offset, ${Xr[o]>1?"true":""});
reader.offset += ${Xr[o]};`:`result.${s} = reader.read${o}();`).join(`
`)}
return result;`;return r=Function("reader",i),Jn.set(e,r),r}const n={};r=Function("reader",`"use strict";
const result = { ${e.elements.map(Ta).join(", ")} };
${e.elements.map(({name:i})=>`result.${i} = this.${i}(reader);`).join(`
`)}
return result;`).bind(n),Jn.set(e,r);for(const{name:i,algebraicType:s}of e.elements)n[i]=V.makeDeserializer(s,t);return Object.freeze(n),r},deserializeValue(e,t,r){return Ct.makeDeserializer(t,r)(e)},intoMapKey(e,t){if(e.elements.length===1){const n=e.elements[0].name;if(Sa(Mi,n))return t[n]}const r=new pe(10);return V.serializeValue(r,V.Product(e),t),r.toBase64()}},Ji={makeSerializer(e,t){if(e.variants.length==2&&e.variants[0].name==="some"&&e.variants[1].name==="none"){const r=V.makeSerializer(e.variants[0].algebraicType,t);return(n,i)=>{i!=null?(n.writeByte(0),r(n,i)):n.writeByte(1)}}else if(e.variants.length==2&&e.variants[0].name==="ok"&&e.variants[1].name==="err"){const r=V.makeSerializer(e.variants[0].algebraicType,t),n=V.makeSerializer(e.variants[0].algebraicType,t);return(i,s)=>{if("ok"in s)i.writeU8(0),r(i,s.ok);else if("err"in s)i.writeU8(1),n(i,s.err);else throw new TypeError("could not serialize result: object had neither a `ok` nor an `err` field")}}else{let r=Wn.get(e);if(r!=null)return r;const n={},i=`switch (value.tag) {
${e.variants.map(({name:s},o)=>`  case ${JSON.stringify(s)}:
    writer.writeByte(${o});
    return this.${s}(writer, value.value);`).join(`
`)}
  default:
    throw new TypeError(
      \`Could not serialize sum type; unknown tag \${value.tag}\`
    )
}
`;r=Function("writer","value",i).bind(n),Wn.set(e,r);for(const{name:s,algebraicType:o}of e.variants)n[s]=V.makeSerializer(o,t);return Object.freeze(n),r}},serializeValue(e,t,r,n){Ji.makeSerializer(t,n)(e,r)},makeDeserializer(e,t){if(e.variants.length==2&&e.variants[0].name==="some"&&e.variants[1].name==="none"){const r=V.makeDeserializer(e.variants[0].algebraicType,t);return n=>{const i=n.readU8();if(i===0)return r(n);if(i===1)return;throw`Can't deserialize an option type, couldn't find ${i} tag`}}else if(e.variants.length==2&&e.variants[0].name==="ok"&&e.variants[1].name==="err"){const r=V.makeDeserializer(e.variants[0].algebraicType,t),n=V.makeDeserializer(e.variants[1].algebraicType,t);return i=>{const s=i.readByte();if(s===0)return{ok:r(i)};if(s===1)return{err:n(i)};throw`Can't deserialize a result type, couldn't find ${s} tag`}}else{let r=Jn.get(e);if(r!=null)return r;const n={};r=Function("reader",`switch (reader.readU8()) {
${e.variants.map(({name:i},s)=>`case ${s}: return { tag: ${JSON.stringify(i)}, value: this.${i}(reader) };`).join(`
`)} }`).bind(n),Jn.set(e,r);for(const{name:i,algebraicType:s}of e.variants)n[i]=V.makeDeserializer(s,t);return Object.freeze(n),r}},deserializeValue(e,t,r){return Ji.makeDeserializer(t,r)(e)}},ys=class Fi{constructor(t){x(this,"__connection_id__");this.__connection_id__=t}static getAlgebraicType(){return V.Product({elements:[{name:"__connection_id__",algebraicType:V.U128}]})}isZero(){return this.__connection_id__===BigInt(0)}static nullIfZero(t){return t.isZero()?null:t}static random(){function t(){return Math.floor(Math.random()*255)}let r=BigInt(0);for(let n=0;n<16;n++)r=r<<BigInt(8)|BigInt(t());return new Fi(r)}isEqual(t){return this.__connection_id__==t.__connection_id__}equals(t){return this.isEqual(t)}toHexString(){return vl(this.__connection_id__)}toUint8Array(){return bl(this.__connection_id__)}static fromString(t){return new Fi(oh(t))}static fromStringOrNull(t){const r=Fi.fromString(t);return r.isZero()?null:r}},ph=class extends Error{constructor(e){super(e)}get name(){return"SenderError"}},mh=class extends Error{constructor(e){super(e)}get name(){return"InternalError"}},gh={interval(e){return yh(e)},time(e){return wh(e)},getAlgebraicType(){return V.Sum({variants:[{name:"Interval",algebraicType:vn.getAlgebraicType()},{name:"Time",algebraicType:_n.getAlgebraicType()}]})},isScheduleAt(e){if(e.tag!=="Sum")return!1;const t=e.value.variants;if(t.length!==2)return!1;const r=t.find(i=>i.name==="Interval"),n=t.find(i=>i.name==="Time");return!r||!n?!1:vn.isTimeDuration(r.algebraicType)&&_n.isTimestamp(n.algebraicType)}},yh=e=>({tag:"Interval",value:new vn(e)}),wh=e=>({tag:"Time",value:new _n(e)}),Tl=gh,bh={getAlgebraicType(e){return V.Sum({variants:[{name:"some",algebraicType:e},{name:"none",algebraicType:V.Product({elements:[]})}]})}},vh={getAlgebraicType(e,t){return V.Sum({variants:[{name:"ok",algebraicType:e},{name:"err",algebraicType:t}]})}},ws=Symbol("QueryBrand"),_h=e=>!!e&&typeof e=="object"&&ws in e;function Ih(e){return e.toSql()}var Ja,on,Ba=(Ja=ws,on=class{constructor(t,r,n){x(this,Ja,!0);x(this,"type","semijoin");if(this.sourceQuery=t,this.filterQuery=r,this.joinCondition=n,t.table.sourceName===r.table.sourceName)throw new Error("Cannot semijoin a table to itself")}build(){return this}where(t){const r=this.sourceQuery.where(t);return new on(r,this.filterQuery,this.joinCondition)}toSql(){const t=this.filterQuery,r=this.sourceQuery,n=ai(t.table.sourceName),i=ai(r.table.sourceName);let s=`SELECT ${i}.* FROM ${n} JOIN ${i} ON ${wr(this.joinCondition)}`;const o=[];if(t.whereClause&&o.push(wr(t.whereClause)),r.whereClause&&o.push(wr(r.whereClause)),o.length>0){const u=o.length===1?o[0]:o.map(Qn).join(" AND ");s+=` WHERE ${u}`}return s}},on),Qa,Lt,Sh=(Qa=ws,Lt=class{constructor(t,r){x(this,Qa,!0);this.table=t,this.whereClause=r}where(t){const r=t(this.table.cols),n=this.whereClause?this.whereClause.and(r):r;return new Lt(this.table,n)}rightSemijoin(t,r){const n=new Lt(t),i=r(this.table.indexedCols,t.indexedCols);return new Ba(n,this,i)}leftSemijoin(t,r){const n=new Lt(t),i=r(this.table.indexedCols,t.indexedCols);return new Ba(this,n,i)}toSql(){return Uh(this.table,this.whereClause)}build(){return this}},Lt),Ga,xh=(Ga=ws,class{constructor(e){x(this,Ga,!0);x(this,"type","table");x(this,"sourceName");x(this,"accessorName");x(this,"cols");x(this,"indexedCols");x(this,"tableDef");this.sourceName=e.sourceName,this.accessorName=e.accessorName,this.cols=Bh(e),this.indexedCols=this.cols,this.tableDef=e,Object.freeze(this)}get columns(){return this.tableDef.columns}get indexes(){return this.tableDef.indexes}get rowType(){return this.tableDef.rowType}get constraints(){return this.tableDef.constraints}asFrom(){return new Sh(this)}rightSemijoin(e,t){return this.asFrom().rightSemijoin(e,t)}leftSemijoin(e,t){return this.asFrom().leftSemijoin(e,t)}build(){return this.asFrom().build()}toSql(){return this.asFrom().toSql()}where(e){return this.asFrom().where(e)}});function Th(e){return new xh(e)}function Bl(e){const t=Object.create(null);for(const r of Object.values(e.tables)){const n=Th(r);t[r.accessorName]=n}return Object.freeze(t)}function Bh(e){const t={};for(const r of Object.keys(e.columns)){const n=e.columns[r],i=new Ah(e.sourceName,r,n.typeBuilder.algebraicType);t[r]=Object.freeze(i)}return Object.freeze(t)}function Uh(e,t,r=[]){const i=`SELECT * FROM ${ai(e.sourceName)}`,s=[];if(t&&s.push(wr(t)),s.push(...r),s.length===0)return i;const o=s.length===1?s[0]:s.map(Qn).join(" AND ");return`${i} WHERE ${o}`}var Ah=class{constructor(e,t,r){x(this,"type","column");x(this,"column");x(this,"table");x(this,"tsValueType");x(this,"spacetimeType");this.table=e,this.column=t,this.spacetimeType=r}eq(e){return new Qt({type:"eq",left:this,right:Sr(e)})}ne(e){return new Qt({type:"ne",left:this,right:Sr(e)})}lt(e){return new Qt({type:"lt",left:this,right:Sr(e)})}lte(e){return new Qt({type:"lte",left:this,right:Sr(e)})}gt(e){return new Qt({type:"gt",left:this,right:Sr(e)})}gte(e){return new Qt({type:"gte",left:this,right:Sr(e)})}};function Ch(e){return{type:"literal",value:e}}function Sr(e){return e.type==="literal"||typeof e=="object"&&e!=null&&"type"in e&&e.type==="column"?e:Ch(e)}var Qt=class Oi{constructor(t){this.data=t}and(t){return new Oi({type:"and",clauses:[this.data,t.data]})}or(t){return new Oi({type:"or",clauses:[this.data,t.data]})}not(){return new Oi({type:"not",clause:this.data})}};function wr(e,t){const r=e instanceof Qt?e.data:e;switch(r.type){case"eq":return`${Xe(r.left)} = ${Xe(r.right)}`;case"ne":return`${Xe(r.left)} <> ${Xe(r.right)}`;case"gt":return`${Xe(r.left)} > ${Xe(r.right)}`;case"gte":return`${Xe(r.left)} >= ${Xe(r.right)}`;case"lt":return`${Xe(r.left)} < ${Xe(r.right)}`;case"lte":return`${Xe(r.left)} <= ${Xe(r.right)}`;case"and":return r.clauses.map(n=>wr(n)).map(Qn).join(" AND ");case"or":return r.clauses.map(n=>wr(n)).map(Qn).join(" OR ");case"not":return`NOT ${Qn(wr(r.clause))}`}}function Qn(e){return`(${e})`}function Xe(e,t){if(Eh(e))return Rh(e.value);const r=e.table;return`${ai(r)}.${ai(e.column)}`}function Rh(e){if(e==null)return"NULL";if(e instanceof Ro||e instanceof ys)return`0x${e.toHexString()}`;if(e instanceof _n)return`'${e.toISOString()}'`;switch(typeof e){case"number":case"bigint":return String(e);case"boolean":return e?"TRUE":"FALSE";case"string":return`'${e.replace(/'/g,"''")}'`;default:return`'${JSON.stringify(e).replace(/'/g,"''")}'`}}function ai(e){return`"${e.replace(/"/g,'""')}"`}function Eh(e){return e.type==="literal"}function c(e,t){return{...e,...t}}var oe=class{constructor(e){x(this,"type");x(this,"algebraicType");this.algebraicType=e}optional(){return new Qi(this)}serialize(e,t){(this.serialize=V.makeSerializer(this.algebraicType))(e,t)}deserialize(e){return(this.deserialize=V.makeDeserializer(this.algebraicType))(e)}},Mh=class extends oe{constructor(){super(V.U8)}index(e="btree"){return new xr(this,c(y,{indexType:e}))}unique(){return new xr(this,c(y,{isUnique:!0}))}primaryKey(){return new xr(this,c(y,{isPrimaryKey:!0}))}autoInc(){return new xr(this,c(y,{isAutoIncrement:!0}))}default(e){return new xr(this,c(y,{defaultValue:e}))}name(e){return new xr(this,c(y,{name:e}))}},Fh=class extends oe{constructor(){super(V.U16)}index(e="btree"){return new Tr(this,c(y,{indexType:e}))}unique(){return new Tr(this,c(y,{isUnique:!0}))}primaryKey(){return new Tr(this,c(y,{isPrimaryKey:!0}))}autoInc(){return new Tr(this,c(y,{isAutoIncrement:!0}))}default(e){return new Tr(this,c(y,{defaultValue:e}))}name(e){return new Tr(this,c(y,{name:e}))}},Oh=class extends oe{constructor(){super(V.U32)}index(e="btree"){return new Br(this,c(y,{indexType:e}))}unique(){return new Br(this,c(y,{isUnique:!0}))}primaryKey(){return new Br(this,c(y,{isPrimaryKey:!0}))}autoInc(){return new Br(this,c(y,{isAutoIncrement:!0}))}default(e){return new Br(this,c(y,{defaultValue:e}))}name(e){return new Br(this,c(y,{name:e}))}},Ph=class extends oe{constructor(){super(V.U64)}index(e="btree"){return new Ur(this,c(y,{indexType:e}))}unique(){return new Ur(this,c(y,{isUnique:!0}))}primaryKey(){return new Ur(this,c(y,{isPrimaryKey:!0}))}autoInc(){return new Ur(this,c(y,{isAutoIncrement:!0}))}default(e){return new Ur(this,c(y,{defaultValue:e}))}name(e){return new Ur(this,c(y,{name:e}))}},Dh=class extends oe{constructor(){super(V.U128)}index(e="btree"){return new Ar(this,c(y,{indexType:e}))}unique(){return new Ar(this,c(y,{isUnique:!0}))}primaryKey(){return new Ar(this,c(y,{isPrimaryKey:!0}))}autoInc(){return new Ar(this,c(y,{isAutoIncrement:!0}))}default(e){return new Ar(this,c(y,{defaultValue:e}))}name(e){return new Ar(this,c(y,{name:e}))}},$h=class extends oe{constructor(){super(V.U256)}index(e="btree"){return new Cr(this,c(y,{indexType:e}))}unique(){return new Cr(this,c(y,{isUnique:!0}))}primaryKey(){return new Cr(this,c(y,{isPrimaryKey:!0}))}autoInc(){return new Cr(this,c(y,{isAutoIncrement:!0}))}default(e){return new Cr(this,c(y,{defaultValue:e}))}name(e){return new Cr(this,c(y,{name:e}))}},Nh=class extends oe{constructor(){super(V.I8)}index(e="btree"){return new Rr(this,c(y,{indexType:e}))}unique(){return new Rr(this,c(y,{isUnique:!0}))}primaryKey(){return new Rr(this,c(y,{isPrimaryKey:!0}))}autoInc(){return new Rr(this,c(y,{isAutoIncrement:!0}))}default(e){return new Rr(this,c(y,{defaultValue:e}))}name(e){return new Rr(this,c(y,{name:e}))}},Vh=class extends oe{constructor(){super(V.I16)}index(e="btree"){return new Er(this,c(y,{indexType:e}))}unique(){return new Er(this,c(y,{isUnique:!0}))}primaryKey(){return new Er(this,c(y,{isPrimaryKey:!0}))}autoInc(){return new Er(this,c(y,{isAutoIncrement:!0}))}default(e){return new Er(this,c(y,{defaultValue:e}))}name(e){return new Er(this,c(y,{name:e}))}},jh=class extends oe{constructor(){super(V.I32)}index(e="btree"){return new Mr(this,c(y,{indexType:e}))}unique(){return new Mr(this,c(y,{isUnique:!0}))}primaryKey(){return new Mr(this,c(y,{isPrimaryKey:!0}))}autoInc(){return new Mr(this,c(y,{isAutoIncrement:!0}))}default(e){return new Mr(this,c(y,{defaultValue:e}))}name(e){return new Mr(this,c(y,{name:e}))}},zh=class extends oe{constructor(){super(V.I64)}index(e="btree"){return new Fr(this,c(y,{indexType:e}))}unique(){return new Fr(this,c(y,{isUnique:!0}))}primaryKey(){return new Fr(this,c(y,{isPrimaryKey:!0}))}autoInc(){return new Fr(this,c(y,{isAutoIncrement:!0}))}default(e){return new Fr(this,c(y,{defaultValue:e}))}name(e){return new Fr(this,c(y,{name:e}))}},qh=class extends oe{constructor(){super(V.I128)}index(e="btree"){return new Or(this,c(y,{indexType:e}))}unique(){return new Or(this,c(y,{isUnique:!0}))}primaryKey(){return new Or(this,c(y,{isPrimaryKey:!0}))}autoInc(){return new Or(this,c(y,{isAutoIncrement:!0}))}default(e){return new Or(this,c(y,{defaultValue:e}))}name(e){return new Or(this,c(y,{name:e}))}},kh=class extends oe{constructor(){super(V.I256)}index(e="btree"){return new Pr(this,c(y,{indexType:e}))}unique(){return new Pr(this,c(y,{isUnique:!0}))}primaryKey(){return new Pr(this,c(y,{isPrimaryKey:!0}))}autoInc(){return new Pr(this,c(y,{isAutoIncrement:!0}))}default(e){return new Pr(this,c(y,{defaultValue:e}))}name(e){return new Pr(this,c(y,{name:e}))}},Lh=class extends oe{constructor(){super(V.F32)}default(e){return new Aa(this,c(y,{defaultValue:e}))}name(e){return new Aa(this,c(y,{name:e}))}},Ua=class extends oe{constructor(){super(V.F64)}default(e){return new Ca(this,c(y,{defaultValue:e}))}name(e){return new Ca(this,c(y,{name:e}))}},Kh=class extends oe{constructor(){super(V.Bool)}index(e="btree"){return new Rn(this,c(y,{indexType:e}))}unique(){return new Rn(this,c(y,{isUnique:!0}))}primaryKey(){return new Rn(this,c(y,{isPrimaryKey:!0}))}default(e){return new Rn(this,c(y,{defaultValue:e}))}name(e){return new Rn(this,c(y,{name:e}))}},Hh=class extends oe{constructor(){super(V.String)}index(e="btree"){return new En(this,c(y,{indexType:e}))}unique(){return new En(this,c(y,{isUnique:!0}))}primaryKey(){return new En(this,c(y,{isPrimaryKey:!0}))}default(e){return new En(this,c(y,{defaultValue:e}))}name(e){return new En(this,c(y,{name:e}))}},ks=class extends oe{constructor(t){super(V.Array(t.algebraicType));x(this,"element");this.element=t}default(t){return new Ra(this,c(y,{defaultValue:t}))}name(t){return new Ra(this,c(y,{name:t}))}},Wh=class extends oe{constructor(){super(V.Array(V.U8))}default(e){return new Ea(c(y,{defaultValue:e}))}name(e){return new Ea(c(y,{name:e}))}},Qi=class extends oe{constructor(t){super(bh.getAlgebraicType(t.algebraicType));x(this,"value");this.value=t}default(t){return new Ma(this,c(y,{defaultValue:t}))}name(t){return new Ma(this,c(y,{name:t}))}},sn=class extends oe{constructor(t,r){function n(i){return Object.keys(i).map(s=>({name:s,get algebraicType(){return i[s].algebraicType}}))}super(V.Product({elements:n(t)}));x(this,"typeName");x(this,"elements");this.typeName=r,this.elements=t}default(t){return new Fa(this,c(y,{defaultValue:t}))}name(t){return new Fa(this,c(y,{name:t}))}},Ls=class extends oe{constructor(t,r){super(vh.getAlgebraicType(t.algebraicType,r.algebraicType));x(this,"ok");x(this,"err");this.ok=t,this.err=r}default(t){return new tp(this,c(y,{defaultValue:t}))}},Eo=class extends oe{constructor(){super({tag:"Product",value:{elements:[]}})}},br=class extends oe{constructor(t,r){const n=Object.fromEntries(Object.entries(t).map(([s,o])=>[s,o instanceof ce?o:new ce(o,{})])),i=Object.keys(n).map(s=>({name:s,get algebraicType(){return n[s].typeBuilder.algebraicType}}));super(V.Product({elements:i}));x(this,"row");x(this,"typeName");this.row=n,this.typeName=r}},Ul=class extends oe{constructor(t,r){function n(i){return Object.keys(i).map(s=>({name:s,get algebraicType(){return i[s].algebraicType}}))}super(V.Sum({variants:n(t)}));x(this,"variants");x(this,"typeName");this.variants=t,this.typeName=r;for(const i of Object.keys(t)){const s=Object.getOwnPropertyDescriptor(t,i),o=!!s&&(typeof s.get=="function"||typeof s.set=="function");let u=!1;if(o||(u=t[i]instanceof Eo),u){const l=this.create(i);Object.defineProperty(this,i,{value:l,writable:!1,enumerable:!0,configurable:!1})}else Object.defineProperty(this,i,{value:(p=>this.create(i,p)),writable:!1,enumerable:!0,configurable:!1})}}create(t,r){return r===void 0?{tag:t}:{tag:t,value:r}}default(t){return new Xs(this,c(y,{defaultValue:t}))}name(t){return new Xs(this,c(y,{name:t}))}},Ks=Ul,Jh=class extends Ul{index(e="btree"){return new Oa(this,c(y,{indexType:e}))}primaryKey(){return new Oa(this,c(y,{isPrimaryKey:!0}))}},Qh=class extends oe{constructor(){super(Tl.getAlgebraicType())}default(e){return new Pa(this,c(y,{defaultValue:e}))}name(e){return new Pa(this,c(y,{name:e}))}},Gh=class extends oe{constructor(){super(Ro.getAlgebraicType())}index(e="btree"){return new Dr(this,c(y,{indexType:e}))}unique(){return new Dr(this,c(y,{isUnique:!0}))}primaryKey(){return new Dr(this,c(y,{isPrimaryKey:!0}))}autoInc(){return new Dr(this,c(y,{isAutoIncrement:!0}))}default(e){return new Dr(this,c(y,{defaultValue:e}))}name(e){return new Dr(this,c(y,{name:e}))}},Zh=class extends oe{constructor(){super(ys.getAlgebraicType())}index(e="btree"){return new $r(this,c(y,{indexType:e}))}unique(){return new $r(this,c(y,{isUnique:!0}))}primaryKey(){return new $r(this,c(y,{isPrimaryKey:!0}))}autoInc(){return new $r(this,c(y,{isAutoIncrement:!0}))}default(e){return new $r(this,c(y,{defaultValue:e}))}name(e){return new $r(this,c(y,{name:e}))}},Xh=class extends oe{constructor(){super(_n.getAlgebraicType())}index(e="btree"){return new Nr(this,c(y,{indexType:e}))}unique(){return new Nr(this,c(y,{isUnique:!0}))}primaryKey(){return new Nr(this,c(y,{isPrimaryKey:!0}))}autoInc(){return new Nr(this,c(y,{isAutoIncrement:!0}))}default(e){return new Nr(this,c(y,{defaultValue:e}))}name(e){return new Nr(this,c(y,{name:e}))}},Yh=class extends oe{constructor(){super(vn.getAlgebraicType())}index(e="btree"){return new Vr(this,c(y,{indexType:e}))}unique(){return new Vr(this,c(y,{isUnique:!0}))}primaryKey(){return new Vr(this,c(y,{isPrimaryKey:!0}))}autoInc(){return new Vr(this,c(y,{isAutoIncrement:!0}))}default(e){return new Vr(this,c(y,{defaultValue:e}))}name(e){return new Vr(this,c(y,{name:e}))}},ep=class extends oe{constructor(){super(ml.getAlgebraicType())}index(e="btree"){return new jr(this,c(y,{indexType:e}))}unique(){return new jr(this,c(y,{isUnique:!0}))}primaryKey(){return new jr(this,c(y,{isPrimaryKey:!0}))}autoInc(){return new jr(this,c(y,{isAutoIncrement:!0}))}default(e){return new jr(this,c(y,{defaultValue:e}))}name(e){return new jr(this,c(y,{name:e}))}},y={},ce=class{constructor(e,t){x(this,"typeBuilder");x(this,"columnMetadata");this.typeBuilder=e,this.columnMetadata=t}serialize(e,t){this.typeBuilder.serialize(e,t)}deserialize(e){return this.typeBuilder.deserialize(e)}},xr=class Gt extends ce{index(t="btree"){return new Gt(this.typeBuilder,c(this.columnMetadata,{indexType:t}))}unique(){return new Gt(this.typeBuilder,c(this.columnMetadata,{isUnique:!0}))}primaryKey(){return new Gt(this.typeBuilder,c(this.columnMetadata,{isPrimaryKey:!0}))}autoInc(){return new Gt(this.typeBuilder,c(this.columnMetadata,{isAutoIncrement:!0}))}default(t){return new Gt(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new Gt(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Tr=class Zt extends ce{index(t="btree"){return new Zt(this.typeBuilder,c(this.columnMetadata,{indexType:t}))}unique(){return new Zt(this.typeBuilder,c(this.columnMetadata,{isUnique:!0}))}primaryKey(){return new Zt(this.typeBuilder,c(this.columnMetadata,{isPrimaryKey:!0}))}autoInc(){return new Zt(this.typeBuilder,c(this.columnMetadata,{isAutoIncrement:!0}))}default(t){return new Zt(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new Zt(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Br=class Xt extends ce{index(t="btree"){return new Xt(this.typeBuilder,c(this.columnMetadata,{indexType:t}))}unique(){return new Xt(this.typeBuilder,c(this.columnMetadata,{isUnique:!0}))}primaryKey(){return new Xt(this.typeBuilder,c(this.columnMetadata,{isPrimaryKey:!0}))}autoInc(){return new Xt(this.typeBuilder,c(this.columnMetadata,{isAutoIncrement:!0}))}default(t){return new Xt(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new Xt(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Ur=class Yt extends ce{index(t="btree"){return new Yt(this.typeBuilder,c(this.columnMetadata,{indexType:t}))}unique(){return new Yt(this.typeBuilder,c(this.columnMetadata,{isUnique:!0}))}primaryKey(){return new Yt(this.typeBuilder,c(this.columnMetadata,{isPrimaryKey:!0}))}autoInc(){return new Yt(this.typeBuilder,c(this.columnMetadata,{isAutoIncrement:!0}))}default(t){return new Yt(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new Yt(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Ar=class er extends ce{index(t="btree"){return new er(this.typeBuilder,c(this.columnMetadata,{indexType:t}))}unique(){return new er(this.typeBuilder,c(this.columnMetadata,{isUnique:!0}))}primaryKey(){return new er(this.typeBuilder,c(this.columnMetadata,{isPrimaryKey:!0}))}autoInc(){return new er(this.typeBuilder,c(this.columnMetadata,{isAutoIncrement:!0}))}default(t){return new er(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new er(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Cr=class tr extends ce{index(t="btree"){return new tr(this.typeBuilder,c(this.columnMetadata,{indexType:t}))}unique(){return new tr(this.typeBuilder,c(this.columnMetadata,{isUnique:!0}))}primaryKey(){return new tr(this.typeBuilder,c(this.columnMetadata,{isPrimaryKey:!0}))}autoInc(){return new tr(this.typeBuilder,c(this.columnMetadata,{isAutoIncrement:!0}))}default(t){return new tr(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new tr(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Rr=class rr extends ce{index(t="btree"){return new rr(this.typeBuilder,c(this.columnMetadata,{indexType:t}))}unique(){return new rr(this.typeBuilder,c(this.columnMetadata,{isUnique:!0}))}primaryKey(){return new rr(this.typeBuilder,c(this.columnMetadata,{isPrimaryKey:!0}))}autoInc(){return new rr(this.typeBuilder,c(this.columnMetadata,{isAutoIncrement:!0}))}default(t){return new rr(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new rr(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Er=class nr extends ce{index(t="btree"){return new nr(this.typeBuilder,c(this.columnMetadata,{indexType:t}))}unique(){return new nr(this.typeBuilder,c(this.columnMetadata,{isUnique:!0}))}primaryKey(){return new nr(this.typeBuilder,c(this.columnMetadata,{isPrimaryKey:!0}))}autoInc(){return new nr(this.typeBuilder,c(this.columnMetadata,{isAutoIncrement:!0}))}default(t){return new nr(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new nr(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Mr=class ir extends ce{index(t="btree"){return new ir(this.typeBuilder,c(this.columnMetadata,{indexType:t}))}unique(){return new ir(this.typeBuilder,c(this.columnMetadata,{isUnique:!0}))}primaryKey(){return new ir(this.typeBuilder,c(this.columnMetadata,{isPrimaryKey:!0}))}autoInc(){return new ir(this.typeBuilder,c(this.columnMetadata,{isAutoIncrement:!0}))}default(t){return new ir(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new ir(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Fr=class sr extends ce{index(t="btree"){return new sr(this.typeBuilder,c(this.columnMetadata,{indexType:t}))}unique(){return new sr(this.typeBuilder,c(this.columnMetadata,{isUnique:!0}))}primaryKey(){return new sr(this.typeBuilder,c(this.columnMetadata,{isPrimaryKey:!0}))}autoInc(){return new sr(this.typeBuilder,c(this.columnMetadata,{isAutoIncrement:!0}))}default(t){return new sr(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new sr(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Or=class or extends ce{index(t="btree"){return new or(this.typeBuilder,c(this.columnMetadata,{indexType:t}))}unique(){return new or(this.typeBuilder,c(this.columnMetadata,{isUnique:!0}))}primaryKey(){return new or(this.typeBuilder,c(this.columnMetadata,{isPrimaryKey:!0}))}autoInc(){return new or(this.typeBuilder,c(this.columnMetadata,{isAutoIncrement:!0}))}default(t){return new or(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new or(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Pr=class ar extends ce{index(t="btree"){return new ar(this.typeBuilder,c(this.columnMetadata,{indexType:t}))}unique(){return new ar(this.typeBuilder,c(this.columnMetadata,{isUnique:!0}))}primaryKey(){return new ar(this.typeBuilder,c(this.columnMetadata,{isPrimaryKey:!0}))}autoInc(){return new ar(this.typeBuilder,c(this.columnMetadata,{isAutoIncrement:!0}))}default(t){return new ar(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new ar(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Aa=class Hs extends ce{default(t){return new Hs(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new Hs(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Ca=class Ws extends ce{default(t){return new Ws(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new Ws(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Rn=class kr extends ce{index(t="btree"){return new kr(this.typeBuilder,c(this.columnMetadata,{indexType:t}))}unique(){return new kr(this.typeBuilder,c(this.columnMetadata,{isUnique:!0}))}primaryKey(){return new kr(this.typeBuilder,c(this.columnMetadata,{isPrimaryKey:!0}))}default(t){return new kr(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new kr(this.typeBuilder,c(this.columnMetadata,{name:t}))}},En=class Lr extends ce{index(t="btree"){return new Lr(this.typeBuilder,c(this.columnMetadata,{indexType:t}))}unique(){return new Lr(this.typeBuilder,c(this.columnMetadata,{isUnique:!0}))}primaryKey(){return new Lr(this.typeBuilder,c(this.columnMetadata,{isPrimaryKey:!0}))}default(t){return new Lr(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new Lr(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Ra=class Js extends ce{default(t){return new Js(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new Js(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Ea=class Qs extends ce{constructor(t){super(new oe(V.Array(V.U8)),t)}default(t){return new Qs(c(this.columnMetadata,{defaultValue:t}))}name(t){return new Qs(c(this.columnMetadata,{name:t}))}},Ma=class Gs extends ce{default(t){return new Gs(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new Gs(this.typeBuilder,c(this.columnMetadata,{name:t}))}},tp=class Al extends ce{constructor(t,r){super(t,r)}default(t){return new Al(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}},Fa=class Zs extends ce{default(t){return new Zs(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new Zs(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Xs=class Ys extends ce{default(t){return new Ys(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new Ys(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Oa=class eo extends Xs{index(t="btree"){return new eo(this.typeBuilder,c(this.columnMetadata,{indexType:t}))}primaryKey(){return new eo(this.typeBuilder,c(this.columnMetadata,{isPrimaryKey:!0}))}},Pa=class to extends ce{default(t){return new to(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new to(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Dr=class Kr extends ce{index(t="btree"){return new Kr(this.typeBuilder,c(this.columnMetadata,{indexType:t}))}unique(){return new Kr(this.typeBuilder,c(this.columnMetadata,{isUnique:!0}))}primaryKey(){return new Kr(this.typeBuilder,c(this.columnMetadata,{isPrimaryKey:!0}))}default(t){return new Kr(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new Kr(this.typeBuilder,c(this.columnMetadata,{name:t}))}},$r=class Hr extends ce{index(t="btree"){return new Hr(this.typeBuilder,c(this.columnMetadata,{indexType:t}))}unique(){return new Hr(this.typeBuilder,c(this.columnMetadata,{isUnique:!0}))}primaryKey(){return new Hr(this.typeBuilder,c(this.columnMetadata,{isPrimaryKey:!0}))}default(t){return new Hr(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new Hr(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Nr=class Wr extends ce{index(t="btree"){return new Wr(this.typeBuilder,c(this.columnMetadata,{indexType:t}))}unique(){return new Wr(this.typeBuilder,c(this.columnMetadata,{isUnique:!0}))}primaryKey(){return new Wr(this.typeBuilder,c(this.columnMetadata,{isPrimaryKey:!0}))}default(t){return new Wr(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new Wr(this.typeBuilder,c(this.columnMetadata,{name:t}))}},Vr=class Jr extends ce{index(t="btree"){return new Jr(this.typeBuilder,c(this.columnMetadata,{indexType:t}))}unique(){return new Jr(this.typeBuilder,c(this.columnMetadata,{isUnique:!0}))}primaryKey(){return new Jr(this.typeBuilder,c(this.columnMetadata,{isPrimaryKey:!0}))}default(t){return new Jr(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new Jr(this.typeBuilder,c(this.columnMetadata,{name:t}))}},jr=class Qr extends ce{index(t="btree"){return new Qr(this.typeBuilder,c(this.columnMetadata,{indexType:t}))}unique(){return new Qr(this.typeBuilder,c(this.columnMetadata,{isUnique:!0}))}primaryKey(){return new Qr(this.typeBuilder,c(this.columnMetadata,{isPrimaryKey:!0}))}default(t){return new Qr(this.typeBuilder,c(this.columnMetadata,{defaultValue:t}))}name(t){return new Qr(this.typeBuilder,c(this.columnMetadata,{name:t}))}},rp=class extends oe{constructor(t){super(V.Ref(t));x(this,"ref");x(this,"__spacetimeType");this.ref=t}},np=((e,t)=>{let r=e,n;if(typeof e=="string"){if(!t)throw new TypeError("When providing a name, you must also provide the variants object or array.");r=t,n=e}if(Array.isArray(r)){const i={};for(const s of r)i[s]=new Eo;return new Jh(i,n)}return new Ks(r,n)}),a={bool:()=>new Kh,string:()=>new Hh,number:()=>new Ua,i8:()=>new Nh,u8:()=>new Mh,i16:()=>new Vh,u16:()=>new Fh,i32:()=>new jh,u32:()=>new Oh,i64:()=>new zh,u64:()=>new Ph,i128:()=>new qh,u128:()=>new Dh,i256:()=>new kh,u256:()=>new $h,f32:()=>new Lh,f64:()=>new Ua,object:((e,t)=>{if(typeof e=="string"){if(!t)throw new TypeError("When providing a name, you must also provide the object.");return new sn(t,e)}return new sn(e,void 0)}),row:((e,t)=>{const[r,n]=typeof e=="string"?[t,e]:[e,void 0];return new br(r,n)}),array(e){return new ks(e)},enum:np,unit(){return new Eo},lazy(e){let t=null;const r=()=>t??(t=e());return new Proxy({},{get(i,s,o){const u=r(),l=Reflect.get(u,s,o);return typeof l=="function"?l.bind(u):l},set(i,s,o,u){return Reflect.set(r(),s,o,u)},has(i,s){return s in r()},ownKeys(){return Reflect.ownKeys(r())},getOwnPropertyDescriptor(i,s){return Object.getOwnPropertyDescriptor(r(),s)},getPrototypeOf(){return Object.getPrototypeOf(r())}})},scheduleAt:()=>new Qh,option(e){return new Qi(e)},result(e,t){return new Ls(e,t)},identity:()=>new Gh,connectionId:()=>new Zh,timestamp:()=>new Xh,timeDuration:()=>new Yh,uuid:()=>new ep,byteArray:()=>new Wh},Gi=a.object("BsatnRowList",{get sizeHint(){return yp},rowsData:a.byteArray()}),ip=a.object("CallProcedure",{requestId:a.u32(),flags:a.u8(),procedure:a.string(),args:a.byteArray()}),sp=a.object("CallReducer",{requestId:a.u32(),flags:a.u8(),reducer:a.string(),args:a.byteArray()}),Mn=a.enum("ClientMessage",{get Subscribe(){return vp},get Unsubscribe(){return Tp},get OneOffQuery(){return up},get CallReducer(){return sp},get CallProcedure(){return ip}}),op=a.object("EventTableRows",{get events(){return Gi}}),ap=a.object("InitialConnection",{identity:a.identity(),connectionId:a.connectionId(),token:a.string()}),up=a.object("OneOffQuery",{requestId:a.u32(),queryString:a.string()}),lp=a.object("OneOffQueryResult",{requestId:a.u32(),get result(){return a.result(Mo,a.string())}}),cp=a.object("PersistentTableRows",{get inserts(){return Gi},get deletes(){return Gi}}),fp=a.object("ProcedureResult",{get status(){return dp},timestamp:a.timestamp(),totalHostExecutionDuration:a.timeDuration(),requestId:a.u32()}),dp=a.enum("ProcedureStatus",{Returned:a.byteArray(),InternalError:a.string()}),Mo=a.object("QueryRows",{get tables(){return a.array(bp)}}),In=a.object("QuerySetId",{id:a.u32()}),hp=a.object("QuerySetUpdate",{get querySetId(){return In},get tables(){return a.array(Sp)}}),pp=a.object("ReducerOk",{retValue:a.byteArray(),get transactionUpdate(){return Cl}}),mp=a.enum("ReducerOutcome",{get Ok(){return pp},OkEmpty:a.unit(),Err:a.byteArray(),InternalError:a.string()}),gp=a.object("ReducerResult",{requestId:a.u32(),timestamp:a.timestamp(),get result(){return mp}}),yp=a.enum("RowSizeHint",{FixedSize:a.u16(),RowOffsets:a.array(a.u64())}),wp=a.enum("ServerMessage",{get InitialConnection(){return ap},get SubscribeApplied(){return _p},get UnsubscribeApplied(){return Bp},get SubscriptionError(){return Ip},get TransactionUpdate(){return Cl},get OneOffQueryResult(){return lp},get ReducerResult(){return gp},get ProcedureResult(){return fp}}),bp=a.object("SingleTableRows",{table:a.string(),get rows(){return Gi}}),vp=a.object("Subscribe",{requestId:a.u32(),get querySetId(){return In},queryStrings:a.array(a.string())}),_p=a.object("SubscribeApplied",{requestId:a.u32(),get querySetId(){return In},get rows(){return Mo}}),Ip=a.object("SubscriptionError",{requestId:a.option(a.u32()),get querySetId(){return In},error:a.string()}),Sp=a.object("TableUpdate",{tableName:a.string(),get rows(){return a.array(xp)}}),xp=a.enum("TableUpdateRows",{get PersistentTable(){return cp},get EventTable(){return op}}),Cl=a.object("TransactionUpdate",{get querySets(){return a.array(hp)}}),Tp=a.object("Unsubscribe",{requestId:a.u32(),get querySetId(){return In},get flags(){return Rl}}),Bp=a.object("UnsubscribeApplied",{requestId:a.u32(),get querySetId(){return In},get rows(){return a.option(Mo)}}),Rl=a.enum("UnsubscribeFlags",{Default:a.unit(),SendDroppedRows:a.unit()}),ur,Za,Fo=(Za=class{constructor(){G(this,ur,new Map)}on(e,t){let r=T(this,ur).get(e);r||(r=new Set,T(this,ur).set(e,r)),r.add(t)}off(e,t){const r=T(this,ur).get(e);r&&r.delete(t)}emit(e,...t){const r=T(this,ur).get(e);if(r)for(const n of r)n(...t)}},ur=new WeakMap,Za),Up={component:"",info:"",warn:"",error:"",debug:"",trace:""},Ap={component:"color: #fff; background-color: #8D6FDD; padding: 2px 5px; border-radius: 3px;",info:"color: #fff; background-color: #007bff; padding: 2px 5px; border-radius: 3px;",warn:"color: #fff; background-color: #ffc107; padding: 2px 5px; border-radius: 3px;",error:"color: #fff; background-color: #dc3545; padding: 2px 5px; border-radius: 3px;",debug:"color: #fff; background-color: #28a745; padding: 2px 5px; border-radius: 3px;",trace:"color: #fff; background-color: #17a2b8; padding: 2px 5px; border-radius: 3px;"},Cp={component:"color: #8D6FDD;",info:"color: #007bff;",warn:"color: #ffc107;",error:"color: #dc3545;",debug:"color: #28a745;",trace:"color: #17a2b8;"},Da={error:0,warn:1,info:2,debug:3,trace:4},Rp="info",Ep=e=>Da[e]<=Da[Rp],$a=e=>typeof e=="function"?e():e,Na=e=>Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join(""),Mp=25,Fp=10,Op=new Set(["token","authToken","authorization","accessToken","refreshToken"]),Va=e=>Ia(e,(t,r)=>{if(Op.has(t))return"[REDACTED]";if(r&&typeof r=="object"&&"__identity__"in r&&typeof r.__identity__=="bigint")return Il(r.__identity__);if(r&&typeof r=="object"&&"__connection_id__"in r&&typeof r.__connection_id__=="bigint")return vl(r.__connection_id__);if(r instanceof Uint8Array){if(r.length<25)return`0x${Na(r)}`;const n=r.subarray(0,10);return`Uint8Array(len=${r.length}, head=0x${Na(n)})`}if(Array.isArray(r)&&r.length>=Mp){const n=Ia(r.slice(0,Fp));return`Array(len=${r.length}, head=${n??"[]"})`}return r}),Oe=(e,t,...r)=>{if(!Ep(e))return;const n=$a(t),i=r.map($a);console.log(`%c${Up[e]} ${e.toUpperCase()}%c ${n}`,Ap[e],Cp[e],...i)},ja=(e,t)=>e===t?0:e<t?-1:1,Yi,El,Xa,Pp=(Xa=class{constructor(e){G(this,Yi);x(this,"rows");x(this,"tableDef");x(this,"emitter");x(this,"applyOperations",(e,t)=>{const r=[];if(this.tableDef.isEvent){for(const i of e)i.type==="insert"&&r.push({type:"insert",table:this.tableDef.sourceName,cb:()=>{this.emitter.emit("insert",t,i.row)}});return r}if(Object.values(this.tableDef.columns).some(i=>i.columnMetadata.isPrimaryKey===!0)){const i=new Map,s=new Map;for(const o of e)if(o.type==="insert"){const[u,l]=i.get(o.rowId)||[o,0];i.set(o.rowId,[o,l+1])}else{const[u,l]=s.get(o.rowId)||[o,0];s.set(o.rowId,[o,l+1])}for(const[o,[u,l]]of i){const p=s.get(o);if(p){const[d,m]=p,S=l-m,b=this.update(t,o,u.row,S);b&&r.push(b),s.delete(o)}else{const d=this.insert(t,u,l);d&&r.push(d)}}for(const[o,u]of s.values()){const l=this.delete(t,o,u);l&&r.push(l)}}else for(const i of e)if(i.type==="insert"){const s=this.insert(t,i);s&&r.push(s)}else{const s=this.delete(t,i);s&&r.push(s)}return r});x(this,"update",(e,t,r,n=0)=>{const i=this.rows.get(t);if(!i){Oe("error",`Updating a row that was not present in the cache. Table: ${this.tableDef.sourceName}, RowId: ${t}`);return}const[s,o]=i,u=Math.max(1,o+n);if(o+n<=0){Oe("error",`Negative reference count for in table ${this.tableDef.sourceName} row ${t} (${o} + ${n})`);return}return this.rows.set(t,[r,u]),o===0?(Oe("error",`Updating a row id in table ${this.tableDef.sourceName} which was not present in the cache (rowId: ${t})`),{type:"insert",table:this.tableDef.sourceName,cb:()=>{this.emitter.emit("insert",e,r)}}):{type:"update",table:this.tableDef.sourceName,cb:()=>{this.emitter.emit("update",e,s,r)}}});x(this,"insert",(e,t,r=1)=>{const[n,i]=this.rows.get(t.rowId)||[t.row,0];if(this.rows.set(t.rowId,[t.row,i+r]),i===0)return{type:"insert",table:this.tableDef.sourceName,cb:()=>{this.emitter.emit("insert",e,t.row)}}});x(this,"delete",(e,t,r=1)=>{const[n,i]=this.rows.get(t.rowId)||[t.row,0];if(i===0){Oe("warn","Deleting a row that was not present in the cache");return}if(i<=r)return this.rows.delete(t.rowId),{type:"delete",table:this.tableDef.sourceName,cb:()=>{this.emitter.emit("delete",e,t.row)}};this.rows.set(t.rowId,[t.row,i-r])});x(this,"onInsert",e=>{this.emitter.on("insert",e)});x(this,"onDelete",e=>{this.emitter.on("delete",e)});x(this,"onUpdate",e=>{this.emitter.on("update",e)});x(this,"removeOnInsert",e=>{this.emitter.off("insert",e)});x(this,"removeOnDelete",e=>{this.emitter.off("delete",e)});x(this,"removeOnUpdate",e=>{this.emitter.off("update",e)});this.tableDef=e,this.rows=new Map,this.emitter=new Fo;const t=this.tableDef.indexes||[];for(const r of t){const n=r,i=K(this,Yi,El).call(this,this.tableDef,n);this[n.name]=i}}count(){return BigInt(this.rows.size)}iter(){function*e(t){for(const[r]of t.values())yield r}return e(this.rows)}[Symbol.iterator](){return this.iter()}},Yi=new WeakSet,El=function(e,t){if(t.algorithm!=="btree")throw new Error("Only btree indexes are supported in TableCacheImpl");const r=t.columns,n=u=>r.map(l=>u[l]),i=(u,l)=>{const p=n(u),d=Array.isArray(l)?l:[l],m=Math.max(0,d.length-1);for(let U=0;U<m;U++)if(!Pn(p[U],d[U]))return!1;const S=d[d.length-1],b=p[m];if(S&&typeof S=="object"&&"from"in S&&"to"in S){const U=S.from,E=S.to;if(U.tag!=="unbounded"){const q=ja(b,U.value);if(q<0||q===0&&U.tag==="excluded")return!1}if(E.tag!=="unbounded"){const q=ja(b,E.value);if(q>0||q===0&&E.tag==="excluded")return!1}return!0}else return!!Pn(b,S)},s=e.constraints.some(u=>u.constraint!=="unique"?!1:Pn(u.columns,t.columns)),o=this;return s?{find:l=>{const p=Array.isArray(l)?l:[l];for(const d of o.iter())if(Pn(n(d),p))return d;return null}}:{*filter(l){for(const p of o.iter())i(p,l)&&(yield p)}}},Xa),Dp=class{constructor(){x(this,"map",new Map)}get(e){return this.map.get(e)}set(e,t){return this.map.set(e,t),this}has(e){return this.map.has(e)}delete(e){return this.map.delete(e)}keys(){return this.map.keys()}values(){return this.map.values()}entries(){return this.map.entries()}[Symbol.iterator](){return this.entries()}},$p=class{constructor(){x(this,"tables",new Dp)}getTable(e){const t=this.tables.get(e);if(!t)throw console.error("The table has not been registered for this client. Please register the table before using it. If you have registered global tables using the SpacetimeDBClient.registerTables() or `registerTable()` method, please make sure that is executed first!"),new Error(`Table ${String(e)} does not exist`);return t}getOrCreateTable(e){const t=e.accessorName,r=this.tables.get(t);if(r)return r;const n=new Pp(e);return this.tables.set(t,n),n}};function Np(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const i=e[n],s=t[n];if(i!==s)return typeof i=="number"&&typeof s=="number"?i-s:typeof i=="string"&&typeof s=="string"?i.localeCompare(s):typeof i=="string"?1:-1}return e.length-t.length}var Ml=class ro{constructor(t,r,n,i=null,s=null){x(this,"major");x(this,"minor");x(this,"patch");x(this,"preRelease");x(this,"buildInfo");this.major=t,this.minor=r,this.patch=n,this.preRelease=i,this.buildInfo=s}toString(){let t=`${this.major}.${this.minor}.${this.patch}`;return this.preRelease&&(t+=`-${this.preRelease.join(".")}`),this.buildInfo&&(t+=`+${this.buildInfo}`),t}compare(t){return this.major!==t.major?this.major-t.major:this.minor!==t.minor?this.minor-t.minor:this.patch!==t.patch?this.patch-t.patch:this.preRelease&&t.preRelease?Np(this.preRelease,t.preRelease):this.preRelease||t.preRelease?-1:0}clone(){return new ro(this.major,this.minor,this.patch,this.preRelease?[...this.preRelease]:null,this.buildInfo)}static parseVersionString(t){const r=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-([\da-zA-Z-]+(?:\.[\da-zA-Z-]+)*))?(?:\+([\da-zA-Z-]+(?:\.[\da-zA-Z-]+)*))?$/,n=t.match(r);if(!n)throw new Error(`Invalid version string: ${t}`);const i=parseInt(n[1],10),s=parseInt(n[2],10),o=parseInt(n[3],10),u=n[4]?n[4].split(".").map(p=>isNaN(Number(p))?p:Number(p)):null,l=n[5]||null;return new ro(i,s,o,u,l)}},Fl=new Ml(1,4,0);function Vp(e){if(e===void 0)throw new Error(za(e));if(Ml.parseVersionString(e).compare(Fl)<0)throw new Error(za(e))}function za(e){return`Module code was generated with an incompatible version of the spacetimedb cli (${e}). Update the cli version to at least ${Fl.toString()} and regenerate the bindings. You can upgrade to the latest cli version by running: spacetime version upgrade`}async function jp(e,t,r=128*1024){let n=0;const i=new ReadableStream({pull(b){if(n<e.length){const U=e.subarray(n,Math.min(n+r,e.length));b.enqueue(U),n+=r}else b.close()}}),s=new DecompressionStream(t),u=i.pipeThrough(s).getReader(),l=[];let p=0,d;for(;!(d=await u.read()).done;)l.push(d.value),p+=d.value.length;const m=new Uint8Array(p);let S=0;for(const b of l)m.set(b,S),S+=b.length;return m}async function zp(){if(typeof globalThis.WebSocket<"u")return globalThis.WebSocket;const e=new Function("m","return import(m)");try{const{WebSocket:t}=await e("undici");return t}catch(t){throw Oe("warn","[spacetimedb-sdk] No global WebSocket found. On Node 1821, please install `undici` (npm install undici) to enable WebSocket support."),t}}var an,It,Ol,Pl,Dl,$l,un,qp=(un=class{constructor(t){G(this,It);x(this,"onclose");x(this,"onopen");x(this,"onmessage");x(this,"onerror");G(this,an);this.onmessage=void 0,this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,t.onmessage=K(this,It,Ol).bind(this),t.onerror=K(this,It,Dl).bind(this),t.onclose=K(this,It,$l).bind(this),t.onopen=K(this,It,Pl).bind(this),t.binaryType="arraybuffer",se(this,an,t)}send(t){T(this,an).send(t)}close(){T(this,an).close()}static async createWebSocketFn({url:t,nameOrAddress:r,wsProtocol:n,authToken:i,compression:s,lightMode:o,confirmedReads:u}){const l=new Headers,p=await zp();let d;if(i){l.set("Authorization",`Bearer ${i}`);const b=new URL("v1/identity/websocket-token",t);b.protocol=t.protocol==="wss:"?"https:":"http:";const U=await fetch(b,{method:"POST",headers:l});if(U.ok){const{token:E}=await U.json();d=E}else return Promise.reject(new Error(`Failed to verify token: ${U.statusText}`))}const m=new URL(`v1/database/${r}/subscribe`,t);d&&m.searchParams.set("token",d),m.searchParams.set("compression",s==="gzip"?"Gzip":"None"),o&&m.searchParams.set("light","true"),u!==void 0&&m.searchParams.set("confirmed",u.toString());const S=new p(m.toString(),n);return new un(S)}},an=new WeakMap,It=new WeakSet,Ol=async function(t){var i;const r=new Uint8Array(t.data);let n;if(r[0]===0)n=r.slice(1);else{if(r[0]===1)throw new Error("Brotli Compression not supported. Please use gzip or none compression in withCompression method on DbConnection.");if(r[0]===2)n=await jp(r.slice(1),"gzip");else throw new Error("Unexpected Compression Algorithm. Please use `gzip` or `none`")}(i=this.onmessage)==null||i.call(this,{data:n})},Pl=function(t){var r;(r=this.onopen)==null||r.call(this,t)},Dl=function(t){var r;(r=this.onerror)==null||r.call(this,t)},$l=function(t){var r;(r=this.onclose)==null||r.call(this,t)},un),lr,cr,es,ui,fr,li,ci,fi,ln,Ya,kp=(Ya=class{constructor(t,r){G(this,lr);G(this,cr);G(this,es);G(this,ui);G(this,fr,new Fo);G(this,li,"gzip");G(this,ci,!1);G(this,fi);G(this,ln);this.remoteModule=t,this.dbConnectionCtor=r,se(this,ln,qp.createWebSocketFn)}withUri(t){return se(this,lr,new URL(t)),this}withDatabaseName(t){return se(this,cr,t),this}withToken(t){return se(this,ui,t),this}withWSFn(t){return se(this,ln,t),this}withCompression(t){return se(this,li,t),this}withLightMode(t){return se(this,ci,t),this}withConfirmedReads(t){return se(this,fi,t),this}onConnect(t){return T(this,fr).on("connect",t),this}onConnectError(t){return T(this,fr).on("connectError",t),this}onDisconnect(t){return T(this,fr).on("disconnect",t),this}getUri(){var t;return((t=T(this,lr))==null?void 0:t.toString())??""}getModuleName(){return T(this,cr)??""}build(){var t;if(!T(this,lr))throw new Error("URI is required to connect to SpacetimeDB");if(!T(this,cr))throw new Error("Database name or address is required to connect to SpacetimeDB");return Vp((t=this.remoteModule.versionInfo)==null?void 0:t.cliVersion),this.dbConnectionCtor({uri:T(this,lr),nameOrAddress:T(this,cr),identity:T(this,es),token:T(this,ui),emitter:T(this,fr),compression:T(this,li),lightMode:T(this,ci),confirmedReads:T(this,fi),createWSFn:T(this,ln),remoteModule:this.remoteModule})}},lr=new WeakMap,cr=new WeakMap,es=new WeakMap,ui=new WeakMap,fr=new WeakMap,li=new WeakMap,ci=new WeakMap,fi=new WeakMap,ln=new WeakMap,Ya),Nl=Symbol("INTERNAL_REMOTE_MODULE"),di,hi,eu,Vl=(eu=class{constructor(e){G(this,di);G(this,hi);this.db=e}onApplied(e){return se(this,di,e),this}onError(e){return se(this,hi,e),this}subscribe(e){var n,i;let t;if(typeof e=="function"){const s=(i=(n=this.db).getTablesMap)==null?void 0:i.call(n),o=e(s);t=Array.isArray(o)?o:[o]}else t=Array.isArray(e)?e:[e];if(t.length===0)throw new Error("Subscriptions must have at least one query");const r=t.map(s=>{if(typeof s=="string")return s;if(_h(s))return Ih(s);throw new Error("Subscriptions must be SQL strings or typed queries")});return new Kp(this.db,r,T(this,di),T(this,hi))}subscribeToAllTables(){const e=this.db[Nl](),t=Object.values(e.tables).map(r=>`SELECT * FROM ${r.sourceName}`);this.subscribe(t)}},di=new WeakMap,hi=new WeakMap,eu),Lp=class{constructor(){x(this,"subscriptions",new Map)}},cn,dr,Vt,jt,zt,tu,Kp=(tu=class{constructor(e,t,r,n){G(this,cn);G(this,dr,!1);G(this,Vt,!1);G(this,jt,!1);G(this,zt,new Fo);this.db=e,T(this,zt).on("applied",i=>{se(this,jt,!0),r&&r(i)}),T(this,zt).on("error",(i,s)=>{se(this,jt,!1),se(this,Vt,!0),n&&n(i,s)}),se(this,cn,this.db.registerSubscription(this,T(this,zt),t))}unsubscribe(){if(T(this,dr))throw new Error("Unsubscribe has already been called");se(this,dr,!0),this.db.unregisterSubscription(T(this,cn)),T(this,zt).on("end",e=>{se(this,Vt,!0),se(this,jt,!1)})}unsubscribeThen(e){if(T(this,Vt))throw new Error("Subscription has already ended");if(T(this,dr))throw new Error("Unsubscribe has already been called");se(this,dr,!0),this.db.unregisterSubscription(T(this,cn)),T(this,zt).on("end",t=>{se(this,Vt,!0),se(this,jt,!1),e(t)})}isEnded(){return T(this,Vt)}isActive(){return T(this,jt)}},cn=new WeakMap,dr=new WeakMap,Vt=new WeakMap,jt=new WeakMap,zt=new WeakMap,tu),pi,ts,mi,De,gi,fn,Bt,dn,hn,pn,mn,gn,hr,pr,qt,rs,mr,j,jl,zl,ql,Gr,Dn,Pi,no,kl,Ll,io,so,$n,Zr,Kl,Di,oo,Hl,Wl,ru,Hp=(ru=class{constructor({uri:e,nameOrAddress:t,identity:r,token:n,emitter:i,remoteModule:s,createWSFn:o,compression:u,lightMode:l,confirmedReads:p}){G(this,j);x(this,"isActive",!1);x(this,"identity");x(this,"token");x(this,"db");x(this,"reducers");x(this,"procedures");x(this,"connectionId",ys.random());G(this,pi,0);G(this,ts,0);G(this,mi,0);G(this,De);G(this,gi,Promise.resolve());G(this,fn,[]);G(this,Bt,new Lp);G(this,dn);G(this,hn,new Map);G(this,pn,new Map);G(this,mn,new Map);G(this,gn);G(this,hr);G(this,pr);G(this,qt);x(this,"clientCache");x(this,"ws");x(this,"wsPromise");G(this,rs,()=>{const e=T(this,pi);return se(this,pi,T(this,pi)+1),e});G(this,mr,()=>jo(this,ts)._++);x(this,"subscriptionBuilder",()=>new Vl(this));Oe("info","Connecting to SpacetimeDB WS...");const d=new URL(e.toString());/^wss?:/.test(e.protocol)||(d.protocol=d.protocol==="https:"?"wss:":"ws:"),this.identity=r,this.token=n,se(this,dn,s),se(this,De,i),se(this,gn,Object.create(null)),se(this,qt,Object.create(null));for(const S of Object.values(s.tables))T(this,gn)[S.sourceName]=Ct.makeDeserializer(S.rowType),T(this,qt)[S.sourceName]=S;se(this,hr,Object.create(null));for(const S of s.reducers)T(this,hr)[S.name]={serialize:Ct.makeSerializer(S.paramsType),deserialize:Ct.makeDeserializer(S.paramsType)};se(this,pr,Object.create(null));for(const S of s.procedures)T(this,pr)[S.name]={serializeArgs:Ct.makeSerializer(new sn(S.params).algebraicType.value),deserializeReturn:V.makeDeserializer(S.returnType.algebraicType)};const m=this.connectionId.toHexString();d.searchParams.set("connection_id",m),this.clientCache=new $p,this.db=K(this,j,jl).call(this),this.reducers=K(this,j,zl).call(this,s),this.procedures=K(this,j,ql).call(this,s),this.wsPromise=o({url:d,nameOrAddress:t,wsProtocol:"v2.bsatn.spacetimedb",authToken:n,compression:u,lightMode:l,confirmedReads:p}).then(S=>(this.ws=S,this.ws.onclose=()=>{T(this,De).emit("disconnect",this),this.isActive=!1},this.ws.onerror=b=>{T(this,De).emit("connectError",this,b),this.isActive=!1},this.ws.onopen=K(this,j,Kl).bind(this),this.ws.onmessage=K(this,j,Wl).bind(this),S)).catch(S=>{Oe("error","Error connecting to SpacetimeDB WS"),T(this,De).emit("connectError",this,S)})}[Nl](){return T(this,dn)}getTablesMap(){return Bl({tables:T(this,dn).tables})}registerSubscription(e,t,r){const n=T(this,rs).call(this);T(this,Bt).subscriptions.set(n,{handle:e,emitter:t});const i=T(this,mr).call(this);return K(this,j,$n).call(this,Mn.Subscribe({queryStrings:r,querySetId:{id:n},requestId:i})),n}unregisterSubscription(e){const t=T(this,mr).call(this);K(this,j,$n).call(this,Mn.Unsubscribe({querySetId:{id:e},requestId:t,flags:Rl.SendDroppedRows}))}callReducer(e,t,r){const{promise:n,resolve:i,reject:s}=Promise.withResolvers(),o=T(this,mr).call(this),u=Mn.CallReducer({reducer:e,args:t,requestId:o,flags:0});return K(this,j,$n).call(this,u),r&&T(this,pn).set(o,{name:e,args:r}),T(this,hn).set(o,l=>{if(l.tag==="Ok"||l.tag==="OkEmpty")i();else if(l.tag==="Err"){const d=new _e(l.value).readString();s(new ph(d))}else l.tag==="InternalError"?s(new mh(l.value)):s(new Error("Unexpected reducer result"))}),n}callReducerWithParams(e,t,r){const n=new pe(1024);T(this,hr)[e].serialize(n,r);const i=n.getBuffer();return this.callReducer(e,i,r)}callProcedure(e,t){const{promise:r,resolve:n,reject:i}=Promise.withResolvers(),s=T(this,mr).call(this),o=Mn.CallProcedure({procedure:e,args:t,requestId:s,flags:0});return K(this,j,$n).call(this,o),T(this,mn).set(s,u=>{u.tag==="Ok"?n(u.value):i(u.value)}),r}callProcedureWithParams(e,t,r,n){const i=new pe(1024),{serializeArgs:s,deserializeReturn:o}=T(this,pr)[e];s(i,r);const u=i.getBuffer();return this.callProcedure(e,u).then(l=>o(new _e(l)))}disconnect(){this.wsPromise.then(e=>{e&&e.close()})}on(e,t){T(this,De).on(e,t)}off(e,t){T(this,De).off(e,t)}onConnect(e){T(this,De).on("connect",e)}onDisconnect(e){T(this,De).on("disconnect",e)}onConnectError(e){T(this,De).on("connectError",e)}removeOnConnect(e){T(this,De).off("connect",e)}removeOnDisconnect(e){T(this,De).off("disconnect",e)}removeOnConnectError(e){T(this,De).off("connectError",e)}},pi=new WeakMap,ts=new WeakMap,mi=new WeakMap,De=new WeakMap,gi=new WeakMap,fn=new WeakMap,Bt=new WeakMap,dn=new WeakMap,hn=new WeakMap,pn=new WeakMap,mn=new WeakMap,gn=new WeakMap,hr=new WeakMap,pr=new WeakMap,qt=new WeakMap,rs=new WeakMap,mr=new WeakMap,j=new WeakSet,jl=function(){const e=Object.create(null);for(const t of Object.values(T(this,qt))){const r=t.accessorName;Object.defineProperty(e,r,{enumerable:!0,configurable:!1,get:()=>this.clientCache.getOrCreateTable(t)})}return e},zl=function(e){const t={};for(const r of e.reducers){const n=r.name,i=r.accessorName,{serialize:s}=T(this,hr)[n];t[i]=o=>{const u=new pe(1024);s(u,o);const l=u.getBuffer();return this.callReducer(n,l,o)}}return t},ql=function(e){const t={};for(const r of e.procedures){const n=r.name,i=r.accessorName,{serializeArgs:s,deserializeReturn:o}=T(this,pr)[n];t[i]=u=>{const l=new pe(1024);s(l,u);const p=l.getBuffer();return this.callProcedure(n,p).then(d=>o(new _e(d)))}}return t},Gr=function(e){return{db:this.db,reducers:this.reducers,isActive:this.isActive,subscriptionBuilder:this.subscriptionBuilder.bind(this),disconnect:this.disconnect.bind(this),event:e}},Dn=function(e,t,r){const n=r.rowsData,i=new _e(n),s=[],o=T(this,gn)[t],u=T(this,qt)[t],p=Object.entries(u.columns).find(m=>m[1].columnMetadata.isPrimaryKey);let d=0;for(;i.remaining>0;){const m=o(i);let S;if(p!==void 0){const b=p[0],U=p[1].typeBuilder.algebraicType;S=V.intoMapKey(U,m[b])}else{const b=n.subarray(d,i.offset);S=Co.fromByteArray(b)}d=i.offset,s.push({type:e,rowId:S,row:m})}return s},Pi=function(e){const t=new Map;for(const r of e){const n=t.get(r.tableName);if(n)for(const i of r.operations)n.push(i);else t.set(r.tableName,r.operations.slice())}return Array.from(t,([r,n])=>({tableName:r,operations:n}))},no=function(e,t){const r=[];for(const n of e.tables)r.push({tableName:n.table,operations:K(this,j,Dn).call(this,t,n.table,n.rows)});return K(this,j,Pi).call(this,r)},kl=function(e,t){if(t.tag==="PersistentTable"){const r=K(this,j,Dn).call(this,"insert",e,t.value.inserts),n=K(this,j,Dn).call(this,"delete",e,t.value.deletes);return r.concat(n)}return t.tag==="EventTable"?K(this,j,Dn).call(this,"insert",e,t.value.events):[]},Ll=function(e){const t=[];for(const r of e.tables){let n=[];for(const i of r.rows)n=n.concat(K(this,j,kl).call(this,r.tableName,i));t.push({tableName:r.tableName,operations:n})}return K(this,j,Pi).call(this,t)},io=function(e,t){Oe("trace",()=>`Sending message to server: ${Va(t)}`);const r=new pe(1024);Mn.serialize(r,t);const n=r.getBuffer();e.send(n)},so=function(e){if(!this.isActive||T(this,fn).length===0)return;const t=T(this,fn).splice(0);for(const r of t)K(this,j,io).call(this,e,r)},$n=function(e){this.wsPromise.then(t=>{if(!t||!this.isActive){T(this,fn).push(e);return}K(this,j,so).call(this,t),K(this,j,io).call(this,t,e)})},Zr=function(){return se(this,mi,T(this,mi)+1),`${this.connectionId.toHexString()}:${T(this,mi)}`},Kl=function(){this.isActive=!0,this.ws&&K(this,j,so).call(this,this.ws)},Di=function(e,t){const r=[];for(const n of e){const i=n.tableName,s=T(this,qt)[i],u=this.clientCache.getOrCreateTable(s).applyOperations(n.operations,t);for(const l of u)r.push(l)}return r},oo=function(e,t){const r=[];for(const n of t.querySets){const i=K(this,j,Ll).call(this,n);for(const s of i)r.push(s)}return K(this,j,Di).call(this,K(this,j,Pi).call(this,r),e)},Hl=async function(e){const t=wp.deserialize(new _e(e));switch(Oe("trace",()=>`Processing server message: ${Va(t)}`),t.tag){case"InitialConnection":{this.identity=t.value.identity,!this.token&&t.value.token&&(this.token=t.value.token),this.connectionId=t.value.connectionId,T(this,De).emit("connect",this,this.identity,this.token);break}case"SubscribeApplied":{const r=t.value.querySetId.id,n=T(this,Bt).subscriptions.get(r);if(!n){Oe("error",`Received SubscribeApplied for unknown querySetId ${r}.`);return}const i={id:K(this,j,Zr).call(this),tag:"SubscribeApplied"},s=K(this,j,Gr).call(this,i),o=K(this,j,no).call(this,t.value.rows,"insert"),u=K(this,j,Di).call(this,o,s),{event:l,...p}=s;n.emitter.emit("applied",p),Oe("trace",()=>`Calling ${u.length} triggered row callbacks`);for(const d of u)d.cb();break}case"UnsubscribeApplied":{const r=t.value.querySetId.id,n=T(this,Bt).subscriptions.get(r);if(!n){Oe("error",`Received UnsubscribeApplied for unknown querySetId ${r}.`);return}const i={id:K(this,j,Zr).call(this),tag:"UnsubscribeApplied"},s=K(this,j,Gr).call(this,i),o=t.value.rows?K(this,j,no).call(this,t.value.rows,"delete"):[],u=K(this,j,Di).call(this,o,s),{event:l,...p}=s;n.emitter.emit("end",p),T(this,Bt).subscriptions.delete(r),Oe("trace",()=>`Calling ${u.length} triggered row callbacks`);for(const d of u)d.cb();break}case"SubscriptionError":{const r=t.value.querySetId.id,n=t.value.requestId,i=Error(t.value.error),s={id:K(this,j,Zr).call(this),tag:"Error",value:i},u={...K(this,j,Gr).call(this,s),event:i};if(n==null){Oe("error",`Disconnecting due to error for a previously applied subscription: ${t.value.error}`),this.disconnect();break}const l=T(this,Bt).subscriptions.get(r);l?(l.emitter.emit("error",u,i),T(this,Bt).subscriptions.delete(r)):Oe("error",`Received SubscriptionError for unknown querySetId ${r}:`,i);break}case"TransactionUpdate":{const r={id:K(this,j,Zr).call(this),tag:"Transaction"},n=K(this,j,Gr).call(this,r),i=K(this,j,oo).call(this,n,t.value);Oe("trace",()=>`Calling ${i.length} triggered row callbacks`);for(const s of i)s.cb();break}case"ReducerResult":{const{requestId:r,result:n}=t.value;if(n.tag==="Ok"){const s=T(this,pn).get(r),o=K(this,j,Zr).call(this),u=s?{id:o,tag:"Reducer",value:{timestamp:t.value.timestamp,outcome:n,reducer:{name:s.name,args:s.args}}}:{id:o,tag:"Transaction"},l=K(this,j,Gr).call(this,u),p=K(this,j,oo).call(this,l,n.value.transactionUpdate);Oe("trace",()=>`Calling ${p.length} triggered row callbacks`);for(const d of p)d.cb()}T(this,pn).delete(r);const i=T(this,hn).get(r);T(this,hn).delete(r),i==null||i(n);break}case"ProcedureResult":{const{status:r,requestId:n}=t.value,i=r.tag==="Returned"?{tag:"Ok",value:r.value}:{tag:"Err",value:r.value},s=T(this,mn).get(n);T(this,mn).delete(n),s==null||s(i);break}case"OneOffQueryResult":{Oe("warn","Received OneOffQueryResult but SDK does not expose one-off query APIs yet.");break}}},Wl=function(e){se(this,gi,T(this,gi).then(()=>K(this,j,Hl).call(this,e.data)))},ru);function Wp(e,t){return{tables:Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Jp(r,n,n.tableDef(e,r))]))}}function Jp(e,t,r){const n=i=>t.rowType.algebraicType.value.elements[i].name;return{sourceName:t.tableName||e,accessorName:e,columns:t.rowType.row,rowType:t.rowSpacetimeType,constraints:r.constraints.map(i=>({name:i.sourceName,constraint:"unique",columns:i.data.value.columns.map(n)})),indexes:r.indexes.map(i=>{const s=i.algorithm.tag==="Direct"?[i.algorithm.value]:i.algorithm.value;return{name:i.accessorName,unique:r.constraints.some(o=>o.data.value.columns.every(u=>s.includes(u))),algorithm:i.algorithm.tag.toLowerCase(),columns:s.map(n)}}),tableDef:r,...r.isEvent?{isEvent:!0}:{}}}var yi,gt,ns,Jl,nu,Qp=(nu=class{constructor(){G(this,ns);G(this,yi,new Map);G(this,gt,{typespace:{types:[]},tables:[],reducers:[],types:[],rowLevelSecurity:[],schedules:[],procedures:[],views:[],lifeCycleReducers:[],caseConversionPolicy:{tag:"SnakeCase"},explicitNames:{entries:[]}})}get moduleDef(){return T(this,gt)}rawModuleDefV10(){const e=[],t=n=>{n&&e.push(n)},r=T(this,gt);return t(r.typespace&&{tag:"Typespace",value:r.typespace}),t(r.types&&{tag:"Types",value:r.types}),t(r.tables&&{tag:"Tables",value:r.tables}),t(r.reducers&&{tag:"Reducers",value:r.reducers}),t(r.procedures&&{tag:"Procedures",value:r.procedures}),t(r.views&&{tag:"Views",value:r.views}),t(r.schedules&&{tag:"Schedules",value:r.schedules}),t(r.lifeCycleReducers&&{tag:"LifeCycleReducers",value:r.lifeCycleReducers}),t(r.rowLevelSecurity&&{tag:"RowLevelSecurity",value:r.rowLevelSecurity}),t(r.explicitNames&&{tag:"ExplicitNames",value:r.explicitNames}),t(r.caseConversionPolicy&&{tag:"CaseConversionPolicy",value:r.caseConversionPolicy}),{sections:e}}setCaseConversionPolicy(e){T(this,gt).caseConversionPolicy=e}get typespace(){return T(this,gt).typespace}resolveType(e){let t=e.algebraicType;for(;t.tag==="Ref";)t=this.typespace.types[t.value];return t}registerTypesRecursively(e){return e instanceof sn&&!Gp(e)||e instanceof Ks||e instanceof br?K(this,ns,Jl).call(this,e):e instanceof Qi?new Qi(this.registerTypesRecursively(e.value)):e instanceof Ls?new Ls(this.registerTypesRecursively(e.ok),this.registerTypesRecursively(e.err)):e instanceof ks?new ks(this.registerTypesRecursively(e.element)):e}},yi=new WeakMap,gt=new WeakMap,ns=new WeakSet,Jl=function(e){const t=e.algebraicType,r=e.typeName;if(r===void 0)throw new Error(`Missing type name for ${e.constructor.name??"TypeBuilder"} ${JSON.stringify(e)}`);let n=T(this,yi).get(t);if(n!=null)return n;const i=e instanceof br||e instanceof sn?{tag:"Product",value:{elements:[]}}:{tag:"Sum",value:{variants:[]}};if(n=new rp(T(this,gt).typespace.types.length),T(this,gt).typespace.types.push(i),T(this,yi).set(t,n),e instanceof br)for(const[s,o]of Object.entries(e.row))i.value.elements.push({name:s,algebraicType:this.registerTypesRecursively(o.typeBuilder).algebraicType});else if(e instanceof sn)for(const[s,o]of Object.entries(e.elements))i.value.elements.push({name:s,algebraicType:this.registerTypesRecursively(o).algebraicType});else if(e instanceof Ks)for(const[s,o]of Object.entries(e.variants))i.value.variants.push({name:s,algebraicType:this.registerTypesRecursively(o).algebraicType});return T(this,gt).types.push({sourceName:Zp(r),ty:n.ref,customOrdering:!0}),n},nu);function Gp(e){return e.typeName==null&&e.algebraicType.value.elements.length===0}function Zp(e){const t=e.split(".");return{sourceName:t.pop(),scope:t}}var Xp=class{constructor(e){this.schemaType=e}};function Yp(e){const t=new Qp;return new Xp(Wp(t,e))}function em(e){return Object.fromEntries(e.map(t=>[t.accessorName,t]))}var ot=a.enum("AlgebraicType",{Ref:a.u32(),get Sum(){return qm},get Product(){return _r},get Array(){return ot},String:a.unit(),Bool:a.unit(),I8:a.unit(),U8:a.unit(),I16:a.unit(),U16:a.unit(),I32:a.unit(),U32:a.unit(),I64:a.unit(),U64:a.unit(),I128:a.unit(),U128:a.unit(),I256:a.unit(),U256:a.unit(),F32:a.unit(),F64:a.unit()}),tm=a.enum("CaseConversionPolicy",{None:a.unit(),SnakeCase:a.unit()}),Ql=a.enum("ExplicitNameEntry",{get Table(){return Es},get Function(){return Es},get Index(){return Es}}),rm=a.object("ExplicitNames",{get entries(){return a.array(Ql)}}),Gl=a.enum("FunctionVisibility",{Private:a.unit(),ClientCallable:a.unit()}),nm=a.object("HttpHeaderPair",{name:a.string(),value:a.byteArray()}),Zl=a.object("HttpHeaders",{get entries(){return a.array(nm)}}),im=a.enum("HttpMethod",{Get:a.unit(),Head:a.unit(),Post:a.unit(),Put:a.unit(),Delete:a.unit(),Connect:a.unit(),Options:a.unit(),Trace:a.unit(),Patch:a.unit(),Extension:a.string()});a.object("HttpRequest",{get method(){return im},get headers(){return Zl},timeout:a.option(a.timeDuration()),uri:a.string(),get version(){return Xl}});a.object("HttpResponse",{get headers(){return Zl},get version(){return Xl},code:a.u16()});var Xl=a.enum("HttpVersion",{Http09:a.unit(),Http10:a.unit(),Http11:a.unit(),Http2:a.unit(),Http3:a.unit()}),sm=a.enum("IndexType",{BTree:a.unit(),Hash:a.unit()}),Yl=a.enum("Lifecycle",{Init:a.unit(),OnConnect:a.unit(),OnDisconnect:a.unit()}),om=a.enum("MiscModuleExport",{get TypeAlias(){return Km}}),Es=a.object("NameMapping",{sourceName:a.string(),canonicalName:a.string()}),_r=a.object("ProductType",{get elements(){return a.array(ec)}}),ec=a.object("ProductTypeElement",{name:a.option(a.string()),get algebraicType(){return ot}}),am=a.object("RawColumnDefV8",{colName:a.string(),get colType(){return ot}}),um=a.object("RawColumnDefaultValueV10",{colId:a.u16(),value:a.byteArray()}),lm=a.object("RawColumnDefaultValueV9",{table:a.string(),colId:a.u16(),value:a.byteArray()}),tc=a.enum("RawConstraintDataV9",{get Unique(){return Nm}}),cm=a.object("RawConstraintDefV10",{sourceName:a.option(a.string()),get data(){return tc}}),fm=a.object("RawConstraintDefV8",{constraintName:a.string(),constraints:a.u8(),columns:a.array(a.u16())}),dm=a.object("RawConstraintDefV9",{name:a.option(a.string()),get data(){return tc}}),Gn=a.enum("RawIndexAlgorithm",{BTree:a.array(a.u16()),Hash:a.array(a.u16()),Direct:a.u16()}),hm=a.object("RawIndexDefV10",{sourceName:a.option(a.string()),accessorName:a.option(a.string()),get algorithm(){return Gn}}),pm=a.object("RawIndexDefV8",{indexName:a.string(),isUnique:a.bool(),get indexType(){return sm},columns:a.array(a.u16())}),mm=a.object("RawIndexDefV9",{name:a.option(a.string()),accessorName:a.option(a.string()),get algorithm(){return Gn}}),gm=a.object("RawLifeCycleReducerDefV10",{get lifecycleSpec(){return Yl},functionName:a.string()}),ym=a.enum("RawMiscModuleExportV9",{get ColumnDefaultValue(){return lm},get Procedure(){return Sm},get View(){return jm}});a.enum("RawModuleDef",{get V8BackCompat(){return vm},get V9(){return _m},get V10(){return wm}});var wm=a.object("RawModuleDefV10",{get sections(){return a.array(bm)}}),bm=a.enum("RawModuleDefV10Section",{get Typespace(){return Oo},get Types(){return a.array(Dm)},get Tables(){return a.array(Fm)},get Reducers(){return a.array(xm)},get Procedures(){return a.array(Im)},get Views(){return a.array(Vm)},get Schedules(){return a.array(Bm)},get LifeCycleReducers(){return a.array(gm)},get RowLevelSecurity(){return a.array(rc)},get CaseConversionPolicy(){return tm},get ExplicitNames(){return rm}}),vm=a.object("RawModuleDefV8",{get typespace(){return Oo},get tables(){return a.array(Lm)},get reducers(){return a.array(zm)},get miscExports(){return a.array(om)}}),_m=a.object("RawModuleDefV9",{get typespace(){return Oo},get tables(){return a.array(Pm)},get reducers(){return a.array(Tm)},get types(){return a.array($m)},get miscExports(){return a.array(ym)},get rowLevelSecurity(){return a.array(rc)}}),Im=a.object("RawProcedureDefV10",{sourceName:a.string(),get params(){return _r},get returnType(){return ot},get visibility(){return Gl}}),Sm=a.object("RawProcedureDefV9",{name:a.string(),get params(){return _r},get returnType(){return ot}}),xm=a.object("RawReducerDefV10",{sourceName:a.string(),get params(){return _r},get visibility(){return Gl},get okReturnType(){return ot},get errReturnType(){return ot}}),Tm=a.object("RawReducerDefV9",{name:a.string(),get params(){return _r},get lifecycle(){return a.option(Yl)}}),rc=a.object("RawRowLevelSecurityDefV9",{sql:a.string()}),Bm=a.object("RawScheduleDefV10",{sourceName:a.option(a.string()),tableName:a.string(),scheduleAtCol:a.u16(),functionName:a.string()}),Um=a.object("RawScheduleDefV9",{name:a.option(a.string()),reducerName:a.string(),scheduledAtColumn:a.u16()}),Am=a.object("RawScopedTypeNameV10",{scope:a.array(a.string()),sourceName:a.string()}),Cm=a.object("RawScopedTypeNameV9",{scope:a.array(a.string()),name:a.string()}),Rm=a.object("RawSequenceDefV10",{sourceName:a.option(a.string()),column:a.u16(),start:a.option(a.i128()),minValue:a.option(a.i128()),maxValue:a.option(a.i128()),increment:a.i128()}),Em=a.object("RawSequenceDefV8",{sequenceName:a.string(),colPos:a.u16(),increment:a.i128(),start:a.option(a.i128()),minValue:a.option(a.i128()),maxValue:a.option(a.i128()),allocated:a.i128()}),Mm=a.object("RawSequenceDefV9",{name:a.option(a.string()),column:a.u16(),start:a.option(a.i128()),minValue:a.option(a.i128()),maxValue:a.option(a.i128()),increment:a.i128()}),Fm=a.object("RawTableDefV10",{sourceName:a.string(),productTypeRef:a.u32(),primaryKey:a.array(a.u16()),get indexes(){return a.array(hm)},get constraints(){return a.array(cm)},get sequences(){return a.array(Rm)},get tableType(){return ic},get tableAccess(){return nc},get defaultValues(){return a.array(um)},isEvent:a.bool()}),Om=a.object("RawTableDefV8",{tableName:a.string(),get columns(){return a.array(am)},get indexes(){return a.array(pm)},get constraints(){return a.array(fm)},get sequences(){return a.array(Em)},tableType:a.string(),tableAccess:a.string(),scheduled:a.option(a.string())}),Pm=a.object("RawTableDefV9",{name:a.string(),productTypeRef:a.u32(),primaryKey:a.array(a.u16()),get indexes(){return a.array(mm)},get constraints(){return a.array(dm)},get sequences(){return a.array(Mm)},get schedule(){return a.option(Um)},get tableType(){return ic},get tableAccess(){return nc}}),Dm=a.object("RawTypeDefV10",{get sourceName(){return Am},ty:a.u32(),customOrdering:a.bool()}),$m=a.object("RawTypeDefV9",{get name(){return Cm},ty:a.u32(),customOrdering:a.bool()}),Nm=a.object("RawUniqueConstraintDataV9",{columns:a.array(a.u16())}),Vm=a.object("RawViewDefV10",{sourceName:a.string(),index:a.u32(),isPublic:a.bool(),isAnonymous:a.bool(),get params(){return _r},get returnType(){return ot}}),jm=a.object("RawViewDefV9",{name:a.string(),index:a.u32(),isPublic:a.bool(),isAnonymous:a.bool(),get params(){return _r},get returnType(){return ot}}),zm=a.object("ReducerDef",{name:a.string(),get args(){return a.array(ec)}}),qm=a.object("SumType",{get variants(){return a.array(km)}}),km=a.object("SumTypeVariant",{name:a.option(a.string()),get algebraicType(){return ot}}),nc=a.enum("TableAccess",{Public:a.unit(),Private:a.unit()}),Lm=a.object("TableDesc",{get schema(){return Om},data:a.u32()}),ic=a.enum("TableType",{System:a.unit(),User:a.unit()}),Km=a.object("TypeAlias",{name:a.string(),ty:a.u32()}),Oo=a.object("Typespace",{get types(){return a.array(ot)}});a.enum("ViewResultHeader",{RowData:a.unit(),RawSql:a.string()});function Hm(e,t,...r){const{name:n,public:i=!1,indexes:s=[],scheduled:o,event:u=!1}=e,l=new Map,p=[];t instanceof br||(t=new br(t)),t.algebraicType.value.elements.forEach((g,I)=>{l.set(g.name,I),p.push(g.name)});const d=[],m=[],S=[],b=[];let U;const E=[];for(const[g,I]of Object.entries(t.row)){const _=I.columnMetadata;_.isPrimaryKey&&d.push(l.get(g));const $=_.isUnique||_.isPrimaryKey;if(_.indexType||$){const te=_.indexType??"btree",ye=l.get(g);let Ie;switch(te){case"btree":Ie=Gn.BTree([ye]);break;case"hash":Ie=Gn.Hash([ye]);break;case"direct":Ie=Gn.Direct(ye);break}m.push({sourceName:void 0,accessorName:g,algorithm:Ie})}if($&&S.push({sourceName:void 0,data:{tag:"Unique",value:{columns:[l.get(g)]}}}),_.isAutoIncrement&&b.push({sourceName:void 0,start:void 0,minValue:void 0,maxValue:void 0,column:l.get(g),increment:1n}),_.defaultValue){const te=new pe(16);I.serialize(te,_.defaultValue),E.push({colId:l.get(g),value:te.getBuffer()})}if(o){const te=I.typeBuilder.algebraicType;Tl.isScheduleAt(te)&&(U=l.get(g))}}for(const g of s??[]){let I;switch(g.algorithm){case"btree":I={tag:"BTree",value:g.columns.map(_=>l.get(_))};break;case"hash":I={tag:"Hash",value:g.columns.map(_=>l.get(_))};break;case"direct":I={tag:"Direct",value:l.get(g.column)};break}m.push({sourceName:void 0,accessorName:g.accessor,algorithm:I,canonicalName:g.name})}for(const g of e.constraints??[])if(g.constraint==="unique"){const I={tag:"Unique",value:{columns:g.columns.map(_=>l.get(_))}};S.push({sourceName:g.name,data:I});continue}const q=t.algebraicType.value;return{rowType:t,tableName:n,rowSpacetimeType:q,tableDef:(g,I)=>{const _=n??I;t.typeName===void 0&&(t.typeName=nh(_));for(const $ of m){const ye=($.algorithm.tag==="Direct"?[$.algorithm.value]:$.algorithm.value).map(qe=>p[qe]).join("_"),Ie=$.sourceName=`${I}_${ye}_idx_${$.algorithm.tag.toLowerCase()}`,{canonicalName:ae}=$;ae!==void 0&&g.moduleDef.explicitNames.entries.push(Ql.Index({sourceName:Ie,canonicalName:ae}))}return{sourceName:I,productTypeRef:g.registerTypesRecursively(t).ref,primaryKey:d,indexes:m,constraints:S,sequences:b,tableType:{tag:"User"},tableAccess:{tag:i?"Public":"Private"},defaultValues:E,isEvent:u}},idxs:{},constraints:S,schedule:o&&U!==void 0?{scheduleAtCol:U,reducer:o}:void 0}}var Wm=class{constructor(e){x(this,"reducersType");this.reducersType=Jm(e)}};function Jm(e){return{reducers:e.map(n=>{const i=n.params.row;return{name:n.reducerName,accessorName:n.accessorName,params:i,paramsType:n.paramsSpacetimeType}})}}function Qm(...e){const t=e.length===1&&Array.isArray(e[0])?e[0]:e;return new Wm(t)}function qa(e,t){const r={elements:Object.entries(t).map(([n,i])=>({name:n,algebraicType:"typeBuilder"in i?i.typeBuilder.algebraicType:i.algebraicType}))};return{reducerName:e,accessorName:uh(e),params:new br(t),paramsSpacetimeType:r,reducerDef:{name:e,params:r,lifecycle:void 0}}}function Gm(...e){return{procedures:e.length===1&&Array.isArray(e[0])?e[0]:e}}const Zm={name:a.string()},Xm={},Ym=a.row({name:a.string()}),sc=Yp({person:Hm({name:"person",indexes:[],constraints:[]},Ym)}),oc=Qm(qa("add",Zm),qa("say_hello",Xm)),eg=Gm(),tg={versionInfo:{cliVersion:"2.0.0"},tables:sc.schemaType.tables,reducers:oc.reducersType.reducers,...eg},rg=Bl(sc.schemaType),ng=em(oc.reducersType.reducers);class ig extends Vl{}class sg extends kp{}const is=class is extends Hp{constructor(){super(...arguments);x(this,"subscriptionBuilder",()=>new ig(this))}};x(is,"builder",()=>new sg(tg,r=>new is(r)));let ao=is;var Et,ac=(Et=class{constructor(t){x(this,"__time_duration_micros__");this.__time_duration_micros__=t}static getAlgebraicType(){return ge.Product({elements:[{name:"__time_duration_micros__",algebraicType:ge.I64}]})}static isTimeDuration(t){if(t.tag!=="Product")return!1;const r=t.value.elements;if(r.length!==1)return!1;const n=r[0];return n.name==="__time_duration_micros__"&&n.algebraicType.tag==="I64"}get micros(){return this.__time_duration_micros__}get millis(){return Number(this.micros/Et.MICROS_PER_MILLIS)}static fromMillis(t){return new Et(BigInt(t)*Et.MICROS_PER_MILLIS)}toString(){const t=this.micros,r=t<0?"-":"+",n=t<0?-t:t,i=n/1000000n,s=n%1000000n;return`${r}${i}.${String(s).padStart(6,"0")}`}},x(Et,"MICROS_PER_MILLIS",1000n),Et),Ge,uc=(Ge=class{constructor(t){x(this,"__timestamp_micros_since_unix_epoch__");this.__timestamp_micros_since_unix_epoch__=t}get microsSinceUnixEpoch(){return this.__timestamp_micros_since_unix_epoch__}static getAlgebraicType(){return ge.Product({elements:[{name:"__timestamp_micros_since_unix_epoch__",algebraicType:ge.I64}]})}static isTimestamp(t){if(t.tag!=="Product")return!1;const r=t.value.elements;if(r.length!==1)return!1;const n=r[0];return n.name==="__timestamp_micros_since_unix_epoch__"&&n.algebraicType.tag==="I64"}static now(){return Ge.fromDate(new Date)}toMillis(){return this.microsSinceUnixEpoch/1000n}static fromDate(t){const r=t.getTime(),n=BigInt(r)*Ge.MICROS_PER_MILLIS;return new Ge(n)}toDate(){const r=this.__timestamp_micros_since_unix_epoch__/Ge.MICROS_PER_MILLIS;if(r>BigInt(Number.MAX_SAFE_INTEGER)||r<BigInt(Number.MIN_SAFE_INTEGER))throw new RangeError("Timestamp is outside of the representable range of JS's Date");return new Date(Number(r))}toISOString(){const t=this.__timestamp_micros_since_unix_epoch__,r=t/Ge.MICROS_PER_MILLIS;if(r>BigInt(Number.MAX_SAFE_INTEGER)||r<BigInt(Number.MIN_SAFE_INTEGER))throw new RangeError("Timestamp is outside of the representable range for ISO string formatting");const i=new Date(Number(r)).toISOString(),s=Math.abs(Number(t%1000000n)),o=String(s).padStart(6,"0");return i.replace(/\.\d{3}Z$/,`.${o}Z`)}since(t){return new ac(this.__timestamp_micros_since_unix_epoch__-t.__timestamp_micros_since_unix_epoch__)}},x(Ge,"MICROS_PER_MILLIS",1000n),x(Ge,"UNIX_EPOCH",new Ge(0n)),Ge),Ue,og=(Ue=class{constructor(t){x(this,"__uuid__");if(t<0n||t>Ue.MAX_UUID_BIGINT)throw new Error("Invalid UUID: must be between 0 and `MAX_UUID_BIGINT`");this.__uuid__=t}static fromRandomBytesV4(t){if(t.length!==16)throw new Error("UUID v4 requires 16 bytes");const r=new Uint8Array(t);return r[6]=r[6]&15|64,r[8]=r[8]&63|128,new Ue(Ue.bytesToBigInt(r))}static fromCounterV7(t,r,n){if(n.length!==4)throw new Error("`fromCounterV7` requires `randomBytes.length == 4`");if(t.value<0)throw new Error("`fromCounterV7` uuid `counter` must be non-negative");if(r.__timestamp_micros_since_unix_epoch__<0)throw new Error("`fromCounterV7` `timestamp` before unix epoch");const i=t.value;t.value=i+1&2147483647;const s=r.toMillis()&0xffffffffffffn,o=new Uint8Array(16);return o[0]=Number(s>>40n&0xffn),o[1]=Number(s>>32n&0xffn),o[2]=Number(s>>24n&0xffn),o[3]=Number(s>>16n&0xffn),o[4]=Number(s>>8n&0xffn),o[5]=Number(s&0xffn),o[7]=i>>>23&255,o[9]=i>>>15&255,o[10]=i>>>7&255,o[11]=(i&127)<<1&255,o[12]|=n[0]&127,o[13]=n[1],o[14]=n[2],o[15]=n[3],o[6]=o[6]&15|112,o[8]=o[8]&63|128,new Ue(Ue.bytesToBigInt(o))}static parse(t){const r=t.replace(/-/g,"");if(r.length!==32)throw new Error("Invalid hex UUID");let n=0n;for(let i=0;i<32;i+=2)n=n<<8n|BigInt(parseInt(r.slice(i,i+2),16));return new Ue(n)}toString(){const r=[...Ue.bigIntToBytes(this.__uuid__)].map(n=>n.toString(16).padStart(2,"0")).join("");return r.slice(0,8)+"-"+r.slice(8,12)+"-"+r.slice(12,16)+"-"+r.slice(16,20)+"-"+r.slice(20)}asBigInt(){return this.__uuid__}toBytes(){return Ue.bigIntToBytes(this.__uuid__)}static bytesToBigInt(t){let r=0n;for(const n of t)r=r<<8n|BigInt(n);return r}static bigIntToBytes(t){const r=new Uint8Array(16);for(let n=15;n>=0;n--)r[n]=Number(t&0xffn),t>>=8n;return r}getVersion(){const t=this.toBytes()[6]>>4&15;switch(t){case 4:return"V4";case 7:return"V7";default:if(this==Ue.NIL)return"Nil";if(this==Ue.MAX)return"Max";throw new Error(`Unsupported UUID version: ${t}`)}}getCounter(){const t=this.toBytes(),r=t[7],n=t[9],i=t[10],s=t[11]>>>1;return r<<23|n<<15|i<<7|s|0}compareTo(t){return this.__uuid__<t.__uuid__?-1:this.__uuid__>t.__uuid__?1:0}static getAlgebraicType(){return ge.Product({elements:[{name:"__uuid__",algebraicType:ge.U128}]})}},x(Ue,"NIL",new Ue(0n)),x(Ue,"MAX_UUID_BIGINT",0xffffffffffffffffffffffffffffffffn),x(Ue,"MAX",new Ue(Ue.MAX_UUID_BIGINT)),Ue),ss,lc,iu,Me=(iu=class{constructor(e){G(this,ss);x(this,"view");x(this,"offset",0);this.view=e instanceof DataView?e:new DataView(e.buffer,e.byteOffset,e.byteLength),this.offset=0}reset(e){this.view=e,this.offset=0}get remaining(){return this.view.byteLength-this.offset}readUInt8Array(){const e=this.readU32();return K(this,ss,lc).call(this,e),this.readBytes(e)}readBool(){const e=this.view.getUint8(this.offset);return this.offset+=1,e!==0}readByte(){const e=this.view.getUint8(this.offset);return this.offset+=1,e}readBytes(e){const t=new Uint8Array(this.view.buffer,this.view.byteOffset+this.offset,e);return this.offset+=e,t}readI8(){const e=this.view.getInt8(this.offset);return this.offset+=1,e}readU8(){return this.readByte()}readI16(){const e=this.view.getInt16(this.offset,!0);return this.offset+=2,e}readU16(){const e=this.view.getUint16(this.offset,!0);return this.offset+=2,e}readI32(){const e=this.view.getInt32(this.offset,!0);return this.offset+=4,e}readU32(){const e=this.view.getUint32(this.offset,!0);return this.offset+=4,e}readI64(){const e=this.view.getBigInt64(this.offset,!0);return this.offset+=8,e}readU64(){const e=this.view.getBigUint64(this.offset,!0);return this.offset+=8,e}readU128(){const e=this.view.getBigUint64(this.offset,!0),t=this.view.getBigUint64(this.offset+8,!0);return this.offset+=16,(t<<BigInt(64))+e}readI128(){const e=this.view.getBigUint64(this.offset,!0),t=this.view.getBigInt64(this.offset+8,!0);return this.offset+=16,(t<<BigInt(64))+e}readU256(){const e=this.view.getBigUint64(this.offset,!0),t=this.view.getBigUint64(this.offset+8,!0),r=this.view.getBigUint64(this.offset+16,!0),n=this.view.getBigUint64(this.offset+24,!0);return this.offset+=32,(n<<BigInt(192))+(r<<BigInt(128))+(t<<BigInt(64))+e}readI256(){const e=this.view.getBigUint64(this.offset,!0),t=this.view.getBigUint64(this.offset+8,!0),r=this.view.getBigUint64(this.offset+16,!0),n=this.view.getBigInt64(this.offset+24,!0);return this.offset+=32,(n<<BigInt(192))+(r<<BigInt(128))+(t<<BigInt(64))+e}readF32(){const e=this.view.getFloat32(this.offset,!0);return this.offset+=4,e}readF64(){const e=this.view.getFloat64(this.offset,!0);return this.offset+=8,e}readString(){const e=this.readUInt8Array();return new TextDecoder("utf-8").decode(e)}},ss=new WeakSet,lc=function(e){if(this.offset+e>this.view.byteLength)throw new RangeError(`Tried to read ${e} byte(s) at relative offset ${this.offset}, but only ${this.remaining} byte(s) remain`)},iu),ag=ArrayBuffer.prototype.transfer??function(e){if(e===void 0)return this.slice();if(e<=this.byteLength)return this.slice(0,e);{const t=new Uint8Array(e);return t.set(new Uint8Array(this)),t.buffer}},ug=class{constructor(e){x(this,"buffer");x(this,"view");this.buffer=typeof e=="number"?new ArrayBuffer(e):e,this.view=new DataView(this.buffer)}get capacity(){return this.buffer.byteLength}grow(e){e<=this.buffer.byteLength||(this.buffer=ag.call(this.buffer,e),this.view=new DataView(this.buffer))}},Te=class{constructor(e){x(this,"buffer");x(this,"offset",0);this.buffer=typeof e=="number"?new ug(e):e}reset(e){this.buffer=e,this.offset=0}expandBuffer(e){const t=this.offset+e+1;if(t<=this.buffer.capacity)return;let r=this.buffer.capacity*2;r<t&&(r=t),this.buffer.grow(r)}toBase64(){return Co.fromByteArray(this.getBuffer())}getBuffer(){return new Uint8Array(this.buffer.buffer,0,this.offset)}get view(){return this.buffer.view}writeUInt8Array(e){const t=e.length;this.expandBuffer(4+t),this.writeU32(t),new Uint8Array(this.buffer.buffer,this.offset).set(e),this.offset+=t}writeBool(e){this.expandBuffer(1),this.view.setUint8(this.offset,e?1:0),this.offset+=1}writeByte(e){this.expandBuffer(1),this.view.setUint8(this.offset,e),this.offset+=1}writeI8(e){this.expandBuffer(1),this.view.setInt8(this.offset,e),this.offset+=1}writeU8(e){this.expandBuffer(1),this.view.setUint8(this.offset,e),this.offset+=1}writeI16(e){this.expandBuffer(2),this.view.setInt16(this.offset,e,!0),this.offset+=2}writeU16(e){this.expandBuffer(2),this.view.setUint16(this.offset,e,!0),this.offset+=2}writeI32(e){this.expandBuffer(4),this.view.setInt32(this.offset,e,!0),this.offset+=4}writeU32(e){this.expandBuffer(4),this.view.setUint32(this.offset,e,!0),this.offset+=4}writeI64(e){this.expandBuffer(8),this.view.setBigInt64(this.offset,e,!0),this.offset+=8}writeU64(e){this.expandBuffer(8),this.view.setBigUint64(this.offset,e,!0),this.offset+=8}writeU128(e){this.expandBuffer(16);const t=e&BigInt("0xFFFFFFFFFFFFFFFF"),r=e>>BigInt(64);this.view.setBigUint64(this.offset,t,!0),this.view.setBigUint64(this.offset+8,r,!0),this.offset+=16}writeI128(e){this.expandBuffer(16);const t=e&BigInt("0xFFFFFFFFFFFFFFFF"),r=e>>BigInt(64);this.view.setBigInt64(this.offset,t,!0),this.view.setBigInt64(this.offset+8,r,!0),this.offset+=16}writeU256(e){this.expandBuffer(32);const t=BigInt("0xFFFFFFFFFFFFFFFF"),r=e&t,n=e>>BigInt(64)&t,i=e>>BigInt(128)&t,s=e>>BigInt(192);this.view.setBigUint64(this.offset+0,r,!0),this.view.setBigUint64(this.offset+8,n,!0),this.view.setBigUint64(this.offset+16,i,!0),this.view.setBigUint64(this.offset+24,s,!0),this.offset+=32}writeI256(e){this.expandBuffer(32);const t=BigInt("0xFFFFFFFFFFFFFFFF"),r=e&t,n=e>>BigInt(64)&t,i=e>>BigInt(128)&t,s=e>>BigInt(192);this.view.setBigUint64(this.offset+0,r,!0),this.view.setBigUint64(this.offset+8,n,!0),this.view.setBigUint64(this.offset+16,i,!0),this.view.setBigInt64(this.offset+24,s,!0),this.offset+=32}writeF32(e){this.expandBuffer(4),this.view.setFloat32(this.offset,e,!0),this.offset+=4}writeF64(e){this.expandBuffer(8),this.view.setFloat64(this.offset,e,!0),this.offset+=8}writeString(e){const r=new TextEncoder().encode(e);this.writeUInt8Array(r)}};function cc(e){return Array.prototype.map.call(e.reverse(),t=>("00"+t.toString(16)).slice(-2)).join("")}function lg(e){if(e.length!=16)throw new Error(`Uint8Array is not 16 bytes long: ${e}`);return new Me(e).readU128()}function cg(e){if(e.length!=32)throw new Error(`Uint8Array is not 32 bytes long: [${e}]`);return new Me(e).readU256()}function fc(e){e.startsWith("0x")&&(e=e.slice(2));const t=e.match(/.{1,2}/g)||[];return Uint8Array.from(t.map(n=>parseInt(n,16))).reverse()}function fg(e){return lg(fc(e))}function dg(e){return cg(fc(e))}function dc(e){const t=new Te(16);return t.writeU128(e),t.getBuffer()}function hg(e){return cc(dc(e))}function hc(e){const t=new Te(32);return t.writeU256(e),t.getBuffer()}function pg(e){return cc(hc(e))}var ka=Object.hasOwn,mg=class uo{constructor(t){x(this,"__identity__");this.__identity__=typeof t=="string"?dg(t):t}static getAlgebraicType(){return ge.Product({elements:[{name:"__identity__",algebraicType:ge.U256}]})}isEqual(t){return this.toHexString()===t.toHexString()}equals(t){return this.isEqual(t)}toHexString(){return pg(this.__identity__)}toUint8Array(){return hc(this.__identity__)}static fromString(t){return new uo(t)}static zero(){return new uo(0n)}toString(){return this.toHexString()}},Zn=new Map,Xn=new Map,ge={Ref:e=>({tag:"Ref",value:e}),Sum:e=>({tag:"Sum",value:e}),Product:e=>({tag:"Product",value:e}),Array:e=>({tag:"Array",value:e}),String:{tag:"String"},Bool:{tag:"Bool"},I8:{tag:"I8"},U8:{tag:"U8"},I16:{tag:"I16"},U16:{tag:"U16"},I32:{tag:"I32"},U32:{tag:"U32"},I64:{tag:"I64"},U64:{tag:"U64"},I128:{tag:"I128"},U128:{tag:"U128"},I256:{tag:"I256"},U256:{tag:"U256"},F32:{tag:"F32"},F64:{tag:"F64"},makeSerializer(e,t){if(e.tag==="Ref"){if(!t)throw new Error("cannot serialize refs without a typespace");for(;e.tag==="Ref";)e=t.types[e.value]}switch(e.tag){case"Product":return Yn.makeSerializer(e.value,t);case"Sum":return Zi.makeSerializer(e.value,t);case"Array":if(e.value.tag==="U8")return gg;{const r=ge.makeSerializer(e.value,t);return(n,i)=>{n.writeU32(i.length);for(const s of i)r(n,s)}}default:return pc[e.tag]}},serializeValue(e,t,r,n){ge.makeSerializer(t,n)(e,r)},makeDeserializer(e,t){if(e.tag==="Ref"){if(!t)throw new Error("cannot deserialize refs without a typespace");for(;e.tag==="Ref";)e=t.types[e.value]}switch(e.tag){case"Product":return Yn.makeDeserializer(e.value,t);case"Sum":return Zi.makeDeserializer(e.value,t);case"Array":if(e.value.tag==="U8")return yg;{const r=ge.makeDeserializer(e.value,t);return n=>{const i=n.readU32(),s=Array(i);for(let o=0;o<i;o++)s[o]=r(n);return s}}default:return mc[e.tag]}},deserializeValue(e,t,r){return ge.makeDeserializer(t,r)(e)},intoMapKey:function(e,t){switch(e.tag){case"U8":case"U16":case"U32":case"U64":case"U128":case"U256":case"I8":case"I16":case"I32":case"I64":case"I128":case"I256":case"F32":case"F64":case"String":case"Bool":return t;case"Product":return Yn.intoMapKey(e.value,t);default:{const r=new Te(10);return ge.serializeValue(r,e,t),r.toBase64()}}}};function ie(e){return Function.prototype.call.bind(e)}var pc={Bool:ie(Te.prototype.writeBool),I8:ie(Te.prototype.writeI8),U8:ie(Te.prototype.writeU8),I16:ie(Te.prototype.writeI16),U16:ie(Te.prototype.writeU16),I32:ie(Te.prototype.writeI32),U32:ie(Te.prototype.writeU32),I64:ie(Te.prototype.writeI64),U64:ie(Te.prototype.writeU64),I128:ie(Te.prototype.writeI128),U128:ie(Te.prototype.writeU128),I256:ie(Te.prototype.writeI256),U256:ie(Te.prototype.writeU256),F32:ie(Te.prototype.writeF32),F64:ie(Te.prototype.writeF64),String:ie(Te.prototype.writeString)};Object.freeze(pc);var gg=ie(Te.prototype.writeUInt8Array),mc={Bool:ie(Me.prototype.readBool),I8:ie(Me.prototype.readI8),U8:ie(Me.prototype.readU8),I16:ie(Me.prototype.readI16),U16:ie(Me.prototype.readU16),I32:ie(Me.prototype.readI32),U32:ie(Me.prototype.readU32),I64:ie(Me.prototype.readI64),U64:ie(Me.prototype.readU64),I128:ie(Me.prototype.readI128),U128:ie(Me.prototype.readU128),I256:ie(Me.prototype.readI256),U256:ie(Me.prototype.readU256),F32:ie(Me.prototype.readF32),F64:ie(Me.prototype.readF64),String:ie(Me.prototype.readString)};Object.freeze(mc);var yg=ie(Me.prototype.readUInt8Array),Yr={Bool:1,I8:1,U8:1,I16:2,U16:2,I32:4,U32:4,I64:8,U64:8,I128:16,U128:16,I256:32,U256:32,F32:4,F64:8},wg=new Set(Object.keys(Yr)),La=e=>e.elements.every(({algebraicType:t})=>wg.has(t.tag)),bg=e=>e.elements.reduce((t,{algebraicType:r})=>t+Yr[r.tag],0),Ui={Bool:"Uint8",I8:"Int8",U8:"Uint8",I16:"Int16",U16:"Uint16",I32:"Int32",U32:"Uint32",I64:"BigInt64",U64:"BigUint64",F32:"Float32",F64:"Float64"},$i={__time_duration_micros__:e=>new ac(e.readI64()),__timestamp_micros_since_unix_epoch__:e=>new uc(e.readI64()),__identity__:e=>new mg(e.readU256()),__connection_id__:e=>new gc(e.readU128()),__uuid__:e=>new og(e.readU128())};Object.freeze($i);var vg=()=>({}),Ka=e=>{let t;switch(e.algebraicType.tag){case"String":t="''";break;case"Bool":t="false";break;case"I8":case"U8":case"I16":case"U16":case"I32":case"U32":t="0";break;case"I64":case"U64":case"I128":case"U128":case"I256":case"U256":t="0n";break;case"F32":case"F64":t="0.0";break;default:t="undefined"}return`${e.name}: ${t}`},Yn={makeSerializer(e,t){let r=Zn.get(e);if(r!=null)return r;if(La(e)){const o=`"use strict";
writer.expandBuffer(${bg(e)});
const view = writer.view;
${e.elements.map(({name:u,algebraicType:{tag:l}})=>l in Ui?`view.set${Ui[l]}(writer.offset, value.${u}, ${Yr[l]>1?"true":""});
writer.offset += ${Yr[l]};`:`writer.write${l}(value.${u});`).join(`
`)}`;return r=Function("writer","value",o),Zn.set(e,r),r}const n={},i=`"use strict";
`+e.elements.map(s=>`this.${s.name}(writer, value.${s.name});`).join(`
`);r=Function("writer","value",i).bind(n),Zn.set(e,r);for(const{name:s,algebraicType:o}of e.elements)n[s]=ge.makeSerializer(o,t);return Object.freeze(n),r},serializeValue(e,t,r,n){Yn.makeSerializer(t,n)(e,r)},makeDeserializer(e,t){switch(e.elements.length){case 0:return vg;case 1:{const i=e.elements[0].name;if(ka($i,i))return $i[i]}}let r=Xn.get(e);if(r!=null)return r;if(La(e)){const i=`"use strict";
const result = { ${e.elements.map(Ka).join(", ")} };
const view = reader.view;
${e.elements.map(({name:s,algebraicType:{tag:o}})=>o in Ui?`result.${s} = view.get${Ui[o]}(reader.offset, ${Yr[o]>1?"true":""});
reader.offset += ${Yr[o]};`:`result.${s} = reader.read${o}();`).join(`
`)}
return result;`;return r=Function("reader",i),Xn.set(e,r),r}const n={};r=Function("reader",`"use strict";
const result = { ${e.elements.map(Ka).join(", ")} };
${e.elements.map(({name:i})=>`result.${i} = this.${i}(reader);`).join(`
`)}
return result;`).bind(n),Xn.set(e,r);for(const{name:i,algebraicType:s}of e.elements)n[i]=ge.makeDeserializer(s,t);return Object.freeze(n),r},deserializeValue(e,t,r){return Yn.makeDeserializer(t,r)(e)},intoMapKey(e,t){if(e.elements.length===1){const n=e.elements[0].name;if(ka($i,n))return t[n]}const r=new Te(10);return ge.serializeValue(r,ge.Product(e),t),r.toBase64()}},Zi={makeSerializer(e,t){if(e.variants.length==2&&e.variants[0].name==="some"&&e.variants[1].name==="none"){const r=ge.makeSerializer(e.variants[0].algebraicType,t);return(n,i)=>{i!=null?(n.writeByte(0),r(n,i)):n.writeByte(1)}}else if(e.variants.length==2&&e.variants[0].name==="ok"&&e.variants[1].name==="err"){const r=ge.makeSerializer(e.variants[0].algebraicType,t),n=ge.makeSerializer(e.variants[0].algebraicType,t);return(i,s)=>{if("ok"in s)i.writeU8(0),r(i,s.ok);else if("err"in s)i.writeU8(1),n(i,s.err);else throw new TypeError("could not serialize result: object had neither a `ok` nor an `err` field")}}else{let r=Zn.get(e);if(r!=null)return r;const n={},i=`switch (value.tag) {
${e.variants.map(({name:s},o)=>`  case ${JSON.stringify(s)}:
    writer.writeByte(${o});
    return this.${s}(writer, value.value);`).join(`
`)}
  default:
    throw new TypeError(
      \`Could not serialize sum type; unknown tag \${value.tag}\`
    )
}
`;r=Function("writer","value",i).bind(n),Zn.set(e,r);for(const{name:s,algebraicType:o}of e.variants)n[s]=ge.makeSerializer(o,t);return Object.freeze(n),r}},serializeValue(e,t,r,n){Zi.makeSerializer(t,n)(e,r)},makeDeserializer(e,t){if(e.variants.length==2&&e.variants[0].name==="some"&&e.variants[1].name==="none"){const r=ge.makeDeserializer(e.variants[0].algebraicType,t);return n=>{const i=n.readU8();if(i===0)return r(n);if(i===1)return;throw`Can't deserialize an option type, couldn't find ${i} tag`}}else if(e.variants.length==2&&e.variants[0].name==="ok"&&e.variants[1].name==="err"){const r=ge.makeDeserializer(e.variants[0].algebraicType,t),n=ge.makeDeserializer(e.variants[1].algebraicType,t);return i=>{const s=i.readByte();if(s===0)return{ok:r(i)};if(s===1)return{err:n(i)};throw`Can't deserialize a result type, couldn't find ${s} tag`}}else{let r=Xn.get(e);if(r!=null)return r;const n={};r=Function("reader",`switch (reader.readU8()) {
${e.variants.map(({name:i},s)=>`case ${s}: return { tag: ${JSON.stringify(i)}, value: this.${i}(reader) };`).join(`
`)} }`).bind(n),Xn.set(e,r);for(const{name:i,algebraicType:s}of e.variants)n[i]=ge.makeDeserializer(s,t);return Object.freeze(n),r}},deserializeValue(e,t,r){return Zi.makeDeserializer(t,r)(e)}},gc=class Ni{constructor(t){x(this,"__connection_id__");this.__connection_id__=t}static getAlgebraicType(){return ge.Product({elements:[{name:"__connection_id__",algebraicType:ge.U128}]})}isZero(){return this.__connection_id__===BigInt(0)}static nullIfZero(t){return t.isZero()?null:t}static random(){function t(){return Math.floor(Math.random()*255)}let r=BigInt(0);for(let n=0;n<16;n++)r=r<<BigInt(8)|BigInt(t());return new Ni(r)}isEqual(t){return this.__connection_id__==t.__connection_id__}equals(t){return this.isEqual(t)}toHexString(){return hg(this.__connection_id__)}toUint8Array(){return dc(this.__connection_id__)}static fromString(t){return new Ni(fg(t))}static fromStringOrNull(t){const r=Ni.fromString(t);return r.isZero()?null:r}};function _g(e){return e.toSql()}function Ig(e){return e.type==="literal"}function ei(e,t){return Vi(e.data,t)}function Vi(e,t){switch(e.type){case"eq":return Ye(e.left,t)===Ye(e.right,t);case"ne":return Ye(e.left,t)!==Ye(e.right,t);case"gt":return Ye(e.left,t)>Ye(e.right,t);case"gte":return Ye(e.left,t)>=Ye(e.right,t);case"lt":return Ye(e.left,t)<Ye(e.right,t);case"lte":return Ye(e.left,t)<=Ye(e.right,t);case"and":return e.clauses.every(r=>Vi(r,t));case"or":return e.clauses.some(r=>Vi(r,t));case"not":return!Vi(e.clause,t)}}function Ye(e,t){return Ig(e)?Ha(e.value):Ha(t[e.column])}function Sg(e){return!!e&&typeof e=="object"&&typeof e.toHexString=="function"}function xg(e){return!e||typeof e!="object"?!1:e instanceof uc?!0:typeof e.__timestamp_micros_since_unix_epoch__=="bigint"}function Ha(e){return Sg(e)?e.toHexString():xg(e)?e.__timestamp_micros_since_unix_epoch__:e}function Tg(e){if(e.table)return e.table.accessorName;if(e.accessorName)return e.accessorName;if(e.sourceQuery)return e.sourceQuery.table.accessorName;throw new Error("Cannot extract accessor name from query")}function Bg(e){if(e.whereClause)return e.whereClause}var yc=Symbol("spacetimedb"),Fe=null,Fn=null;function Ug(e){const t=()=>Fe,r=fs({isActive:!1,identity:void 0,token:void 0,connectionId:gc.random(),connectionError:void 0,getConnection:t});Nu(yc,r);let n=null,i=null,s=null;Ku(()=>{Fn&&(clearTimeout(Fn),Fn=null),Fe||(Fe=e.build()),n=l=>{r.isActive=l.isActive,r.identity=l.identity,r.token=l.token,r.connectionId=l.connectionId,r.connectionError=void 0},i=l=>{r.isActive=l.isActive},s=(l,p)=>{r.isActive=l.isActive,r.connectionError=p},e.onConnect(n),e.onDisconnect(i),e.onConnectError(s);const u=Fe;u&&(r.isActive=u.isActive,r.identity=u.identity,r.token=u.token,r.connectionId=u.connectionId)});const o=()=>{var u,l,p;Fe&&(n&&((u=Fe.removeOnConnect)==null||u.call(Fe,n)),i&&((l=Fe.removeOnDisconnect)==null||l.call(Fe,i)),s&&((p=Fe.removeOnConnectError)==null||p.call(Fe,s)),Fn=setTimeout(()=>{Fe==null||Fe.disconnect(),Fe=null,Fn=null},0))};return vi(o),{state:r,cleanup:o}}var Ag=zu({name:"SpacetimeDBProvider",props:{connectionBuilder:{type:Object,required:!0}},setup(e,{slots:t}){return Ug(e.connectionBuilder),()=>{const r=t.default;return r?r():null}}});function Po(){const e=zn(yc);if(!e)throw new Error("useSpacetimeDB must be used within a SpacetimeDBProvider component. Did you forget to add a `SpacetimeDBProvider` to your component tree?");return e}function Cg(e,t,r){if(!e)return"stayIn";const n=ei(e,t),i=ei(e,r);return n&&!i?"leave":!n&&i?"enter":n&&i?"stayIn":"stayOut"}function Rg(e,t){const r=Tg(e),n=Bg(e),i=_g(e);let s;try{s=Po()}catch{throw new Error("Could not find SpacetimeDB client! Did you forget to add a `SpacetimeDBProvider`? `useTable` must be used in a Vue component tree under a `SpacetimeDBProvider` component.")}const o=Ru([]),u=Cu(!1);let l=null,p=null,d=null;const m=()=>{const U=s.getConnection();if(!U)return[];const E=U.db[r];if(!E)return[];const q=Array.from(E.iter());return n?q.filter(H=>ei(n,H)):q},S=()=>{var I;const U=s.getConnection();if(!U)return;const E=U.db[r];if(!E)return;const q=(_,$)=>{n&&!ei(n,$)||(_.event!==l||!l)&&(l=_.event,o.value=m())},H=(_,$)=>{n&&!ei(n,$)||(_.event!==l||!l)&&(l=_.event,o.value=m())},g=(_,$,te)=>{switch(Cg(n,$,te)){case"leave":break;case"enter":break;case"stayIn":break;case"stayOut":return}(_.event!==l||!l)&&(l=_.event,o.value=m())};return E.onInsert(q),E.onDelete(H),(I=E.onUpdate)==null||I.call(E,g),()=>{var _;E.removeOnInsert(q),E.removeOnDelete(H),(_=E.removeOnUpdate)==null||_.call(E,g)}},b=()=>{const U=s.getConnection();U&&(d=U.subscriptionBuilder().onApplied(()=>{u.value=!0,o.value=m()}).subscribe(i))};return qn(()=>s.isActive,U=>{p&&(p(),p=null),d&&(d.unsubscribe(),d=null),U?(p=S()||null,b(),o.value=m()):(u.value=!1,o.value=[])},{immediate:!0}),vi(()=>{p==null||p(),d==null||d.unsubscribe(),l=null}),[ni(o),ni(u)]}function Eg(e){const t=Po(),r=e.accessorName,n=Ru([]),i=qn(()=>t.isActive,()=>{const s=t.getConnection();if(!s)return;const o=s.reducers[r];if(n.value.length){const u=n.value.splice(0);for(const l of u)o(...l.params).then(l.resolve,l.reject)}},{immediate:!0});return vi(()=>{i()}),(...s)=>{const o=t.getConnection();if(!o)return new Promise((l,p)=>{n.value.push({params:s,resolve:l,reject:p})});const u=o.reducers[r];return u(...s)}}const Mg={style:{padding:"2rem"}},Fg={style:{marginBottom:"1rem"}},Og=["disabled"],Pg=["disabled"],Dg={key:0},$g={key:1},Ng=zu({__name:"app",setup(e){const t=Po(),r=Cu(""),[n]=Rg(rg.person),i=Eg(ng.add),s=()=>{!r.value.trim()||!t.isActive||(i({name:r.value}),r.value="")};return(o,u)=>(Bn(),Un("div",Mg,[u[2]||(u[2]=mt("h1",null,"SpacetimeDB Vue App",-1)),mt("div",Fg,[u[1]||(u[1]=cl(" Status: ",-1)),mt("strong",{style:ls({color:Dt(t).isActive?"green":"red"})},Ci(Dt(t).isActive?"Connected":"Disconnected"),5)]),mt("form",{onSubmit:Kd(s,["prevent"]),style:{marginBottom:"2rem"}},[pf(mt("input",{type:"text",placeholder:"Enter name","onUpdate:modelValue":u[0]||(u[0]=l=>r.value=l),style:{padding:"0.5rem",marginRight:"0.5rem"},disabled:!Dt(t).isActive},null,8,Og),[[qd,r.value]]),mt("button",{type:"submit",style:{padding:"0.5rem 1rem"},disabled:!Dt(t).isActive}," Add Person ",8,Pg)],32),mt("div",null,[mt("h2",null,"People ("+Ci(Dt(n).length)+")",1),Dt(n).length===0?(Bn(),Un("p",Dg,"No people yet. Add someone above!")):(Bn(),Un("ul",$g,[(Bn(!0),Un(yt,null,Ff(Dt(n),(l,p)=>(Bn(),Un("li",{key:p},Ci(l.name),1))),128))]))])]))}}),wc="https://maincloud.spacetimedb.com",bc="hsrpvp-spacetimedb-dxlnj",vc=`${wc}/${bc}/auth_token`,Vg=(e,t,r)=>{localStorage.setItem(vc,r),console.log("Connected to SpacetimeDB with identity:",t.toHexString())},jg=()=>{console.log("Disconnected from SpacetimeDB")},zg=(e,t)=>{console.log("Error connecting to SpacetimeDB:",t)},qg=ao.builder().withUri(wc).withDatabaseName(bc).withToken(localStorage.getItem(vc)||void 0).onConnect(Vg).onDisconnect(jg).onConnectError(zg);Jd({render:()=>ia(Ag,{connectionBuilder:qg},()=>ia(Ng))}).mount("#app");
